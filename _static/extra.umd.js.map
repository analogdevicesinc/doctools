{"version":3,"file":"extra.umd.js","sources":["../scripts/dom.js","../scripts/toolbox.js","../scripts/version_dropdown.js","../scripts/links.js","../scripts/page_actions.js","../scripts/search.js","../scripts/extra.js"],"sourcesContent":["\"use strict\";\nexport {DOM, Animate}\n\n/** Make DOM element*/\nclass DOM {\n  constructor (dom, tags){\n    this.$\n    if (typeof dom != 'string'){\n      this.$ = dom\n      return\n    }\n    this.$ = document.createElement(dom);\n    if (typeof tags == 'object') for (const tag in tags) {\n      if (tag in this.$)\n        this.$[tag] = tags[tag]\n      else\n        this.$.dataset[tag] = tags[tag]\n    }\n  }\n  /**\n   * Clone node\n   * @param {bool} deep - If true, then the node and its whole subtree,\n   * including text that may be in child Text nodes, is also copied.\n   */\n  cloneNode (deep){\n    let node = new DOM(this.$.cloneNode(deep))\n    return node\n  }\n  /**\n   * Set DOM innerText.\n   * @param {string} str - Text to apply.\n   */\n  set innerText(str){\n    this.$.innerText = str\n  }\n  /**\n   * Get DOM innerText.\n   */\n  get innerText(){\n    return this.$.innerText\n  }\n  /** Get DOM offset height */\n  get height (){\n    return this.$.offsetHeight\n  }\n  /** Get DOM offset width */\n  get width (){\n    return this.$.offsetWidth\n  }\n  /** Get DOM id */\n  get id (){\n    return this.$.id\n  }\n  /** Set DOM id */\n  set id (str){\n    this.$.id= str\n  }\n  /** Get DOM value */\n  get value (){\n    return this.$.value\n  }\n  /** Set DOM value */\n  set value (str){\n    this.$.value = str\n  }\n  /** Get DOM src */\n  get src (){\n    return this.$.src\n  }\n  /** Set DOM src */\n  set src (str){\n    this.$.src = str\n  }\n  /**\n   * Focus on DOM.\n   */\n  focus (){\n    this.$.focus()\n  }\n  /** Get DOM classList object. */\n  get classList(){\n    return this.$.classList\n  }\n  /** Get DOM style object. */\n  get style(){\n    return this.$.style\n  }\n  /**\n   * Append a ``onchange`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onchange (self, ev, args){\n    this.$.onchange = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``onclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onclick (self, ev, args){\n    this.$.onclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``mouseup`` and ``touchup`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onup (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousedown`` and ``touchdown`` event.\n   * @param {function} ev - Function to be executed on down.\n   */\n  ondown (self, ev, args){\n    this.$.addEventListener('mousedown', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousemove`` and ``touchmove`` event.\n   * @param {function} ev - Function to be executed on move.\n   */\n  onmove (self, ev, args){\n    this.$.addEventListener('mousemove', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a event listener.\n   * @param {string} event - Event listener name.\n   * @param {function} fun - Function to be executed on move.\n   * @param {function} args - Arguments to be applied to the function.\n   */\n  onevent (event, self, fun, args){\n    this.$.addEventListener(event, (e) => {\n      if (typeof args == 'undefined')\n        fun.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        fun.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Appends others :js:func:`DOM`.\n   * @param {Object[]} DOMS - Array of :js:func:`DOM` or/and direct DOM Nodes.\n   */\n  append (DOMS){\n    if (DOMS.constructor != Array)\n      DOMS = [DOMS]\n\n    DOMS.forEach ((item) => {\n      if (/HTML(.*)Element/.test(item.constructor.name))\n        this.$.appendChild(item)\n      else if (typeof item == 'object' &&\n               /HTML(.*)Element/.test(item.$.constructor.name))\n        this.$.appendChild(item.$)\n    })\n\n    return this\n  }\n  /**\n   * Delete object.\n   */\n  delete (){\n    this.$.remove()\n    delete this\n  }\n  /**\n   * Remove childs from :js:func:`DOM` object.\n   */\n  removeChilds (){\n    let child = this.$.lastElementChild\n    while (child) {\n      this.$.removeChild(child)\n      child = this.$.lastElementChild\n    }\n    return this\n  }\n  /**\n   * Get DOM Node element.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Optional parent DOM.\n   */\n  static get (a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'undefined') ? document.querySelector (a) : b.querySelector(a)\n  }\n  /**\n   * Get all DOM Node elements.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Parent DOM.\n   */\n  static getAll(a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'object') ? b.querySelectorAll(a) : get(b).querySelectorAll(a)\n  }\n  /**\n   * Include or remove a class to a DOM.\n   * @param {Object} b - Target DOM.\n   * @param {string} _class - Optional class, defaults to `on`.\n   */\n  static switchState (b, _class){\n    b = b instanceof DOM ? b.$ : b\n    let cn = _class != undefined ? _class : `on`\n    if (b.classList.contains(cn))\n      b.classList.remove(cn)\n    else\n      b.classList.add(cn)\n  }\n  /**\n  * Generate a unique identifier.\n  */\n  static UID (){\n    return (+new Date).toString(36) + Math.random().toString(36).substr(2)\n  }\n  /**\n   * Prototype a DOM composed by details, sumamary and a h2 title with optional\n   * onclick event.\n   * @param {Object} str - id, title and onclick function of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.title - Title of the DOM element.\n   * @param {Object} str.onclick - Onclick function of the DOM element.\n   */\n  static prototypeDetails (str){\n    let summary = new DOM('summary', {innerText:str.innerText})\n    let details = new DOM('details', {id:str.id, name:str.id})\n      .append(summary)\n\n    if (str.onevent != undefined) {\n      str.onevent.forEach(event => {\n        event.args.push(details.$)\n        summary.onevent(\n          event.event,\n          event.self,\n          event.fun,\n          event.args\n        )\n      })\n    }\n    return details\n  }\n  /**\n   * Prototype a DOM composed by input(file type) and label.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   */\n  static prototypeInputFile (str){\n    return new DOM('label', {\n      htmlFor:`${str.id}_input`,\n      id:str.id,\n      className:str.className,\n      innerText:str.innerText\n      }).append(\n        new DOM('input', {id:`${str.id}_input`, type:'file'})\n      )\n  }\n  /**\n   * Prototype a DOM composed by input(checkbox) and label styled as as switch.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   * @returns Array with input and container.\n   */\n  static prototypeCheckSwitch (str){\n    let input = new DOM('input', {\n      id:str.id,\n      name:str.id,\n      className:'checkswitch',\n      type:'checkbox',\n      value:false\n    })\n\n    let container = new DOM('div', {className:str.className})\n      .append([\n        new DOM('div')\n          .append([\n            new DOM('label', {\n                className:'checkswitch',\n                htmlFor:str.id,\n                innerText:str.innerText\n              }).append([\n                input,\n                new DOM('span')\n              ])\n          ])\n      ])\n\n    return [input, container]\n  }\n  /**\n   * Prototype a DOM that allows data to be downloded on its creation.\n   * @param {string} filename - name of the file.\n   * @param {string} file - file content.\n   */\n  static prototypeDownload (filename, file){\n    let data,\n        reg = /.*\\.(py|xml|csv|json|svg|png)$/\n    if (!reg.test(filename))\n      return\n\n    let format = filename.match(reg)[1]\n    filename = filename\n      .replaceAll('/','-')\n      .replaceAll(' ','_')\n      .toLowerCase()\n\n    switch (format) {\n      case 'xml':\n        data = \"data:x-application/xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'py':\n        data = \"data:text/python;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'json':\n        data = \"data:text/json;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'csv':\n        data = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'svg':\n        data = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'png':\n        data = file; // Expect already in blob\n        break\n    }\n    let element = document.createElement('a')\n    element.setAttribute('href', data)\n    element.setAttribute('download', filename)\n    element.style.display = 'none'\n\n    document.body.appendChild(element)\n    element.click ()\n    document.body.removeChild(element)\n  }\n  /**\n   * Set a option of a select list by its innerText.\n   * @param {Object} dom - Node of the select list.\n   * @param {string} value - Inner text of the target option.\n   */\n  static setSelected (dom, value){\n    for (var i = 0; i < dom.$.options.length; i++){\n      if (dom.$.options[i].text == value){\n        dom.$.options[i].selected = true\n        return\n      }\n    }\n  }\n  /**\n   * Updates parameter of children of a DOM.\n   * Lazy because doesn't care is successful or not.\n   * Useful for generic lists, like in searches.\n   * @param {Object} dom - Container of the list.\n   * @param {string} uid - Item to search for.\n   * @param {Object} props - Properties to update, where the key is also the DOM id.\n   * @param {string} param - Parameter to update.\n   */\n  static lazyUpdate (dom, uid, props, param){\n    param = param == undefined ? 'innerText' : param\n    let element = DOM.get(`[data-uid='${uid}']`, dom)\n    for (const key in props){\n      DOM.get(`#${key}`, element)[param] = props[key]\n    }\n  }\n}\n","\"use strict\";\n\nexport {Toolbox}\n\n/**\n * Provides useful generic functions.\n */\nclass Toolbox {\n  /**\n   * Get random char.\n   */\n  static randomChar () {\n    const alphabet = \"abcdefghijklmnopqrstuvwxyz\"\n    return alphabet[Math.floor(Math.random() * alphabet.length)]\n  }\n /**\n  * Generate a unique identifier.\n  */\n  static UID () {\n    return this.randomChar() + (+new Date).toString(36) + Math.random().toString(36).substring(3)\n  }\n /**\n  * Generate a small non-timed identifier.\n  */\n  static SID () {\n    return this.randomChar() + (Math.random()).toString(36).substring(3,8)\n  }\n  /**\n   * Return param from url search parami, if unset, return the default.\n   * @param {string} _param - Parameter to search in the array.\n   * @return Requested parameter.\n   */\n  static fromUrl (_param) {\n    let param = new URLSearchParams(document.location.search)\n    return param.get(_param) == null ?\n      this.urlDefaults(_param) : this.urlValidParams(_param, param.get(_param))\n  }\n  /**\n   * Default url parameters values if not set\n   * @param {string} _param - Parameter to return the default.\n   * @return Default parameter.\n   */\n  static urlDefaults (_param) {\n    switch (_param) {\n      case 'theme':\n        return 'light'\n    }\n  }\n  /**\n   * Valid parameters, if a invalid is passed, will return the default.\n   */\n  static urlValidParams (_param, value) {\n    switch (_param) {\n      case 'theme':\n        return ['dark', 'light'].includes(value) ? value : this.urlDefaults(_param)\n    }\n  }\n  static cleanPathname (_pathname) {\n    return _pathname.replace(/([^:]\\/)\\/+/g, \"$1\").replace(/[^:]\\.\\//g, \"$1\")\n  }\n  /**\n   * Get the depth of a path name.\n   */\n  static getDepth (_pathname) {\n    return (_pathname.match(/\\//g)||[]).length\n  }\n  /*\n   * Check if link exists, if not, redirect to second option.\n   */\n  static async try_redirect (url, fallback_url) {\n    try {\n      const response = await fetch(url, {\n        method: 'HEAD'\n      })\n\n      if (response.status === 404)\n        location.href = fallback_url\n      else\n        location.href = url\n    } catch (e) {\n      location.href = fallback_url\n    }\n    return\n  }\n  /*\n   * Try to fetch every item in array.\n   */\n  static async fetch_each (urls) {\n    for (let url of urls) {\n      try {\n        const request = new Request(url)\n        const response = await fetch(request)\n\n        if (response.ok === true) {\n          return {'obj': await response.json(), 'url': url}\n        }\n        else if (response.status !== 404)\n          return {'error': response, 'url': url}\n      } catch (error) {\n        return {'error': error, 'url': url}\n      }\n    }\n    return {'error': `No url returned a valid JSON, urls: ${urls}`}\n  }\n  static cache_check (state, fetch_url, hours, callback) {\n    if (!Array.isArray(fetch_url))\n      fetch_url = [fetch_url]\n\n    let cache_key = fetch_url[0]\n    let json = localStorage.getItem(cache_key)\n    if (json !== null)\n      json = JSON.parse(json)\n\n    let cache_timeout = new Date(0)\n    cache_timeout.setHours(hours)\n    if (state.reloaded === true || json === null || json['timestamp'] + cache_timeout.valueOf() < Date.now()) {\n      Toolbox.fetch_each(fetch_url).then((json) => {\n        if ('error' in json) {\n          console.error(`Failed to fetch resource, due to:`, json['error'])\n          return\n        }\n\n        json['timestamp'] = Date.now()\n        callback(json)\n        localStorage.setItem(cache_key, JSON.stringify(json))\n      })\n    } else {\n      callback(json)\n    }\n  }\n}\n","\"use strict\";\nimport {DOM} from './dom.js'\nimport {Toolbox} from './toolbox.js'\n\n/**\n * Fetches the tags.json file and renders a dropdown.\n */\nexport class VersionDropdown {\n  constructor (app) {\n    this.$ = {}\n\n    this.parent = app\n    this.prefix = this.parent.state.sub_hosted ?\n                 `/${this.parent.state.repository}` : ''\n\n    this.init()\n  }\n\n  init() {\n    if (this.parent.state.offline)\n      return\n\n    Toolbox.cache_check(this.parent.state, `${this.prefix}/tags.json`,\n                        2, (obj) => {this.render(obj['obj'])})\n  }\n  /**\n   * Assert if tags.json is valid\n   */\n  assert (obj) {\n    let assert_string = (arr) => {\n      return arr.every(item => typeof item === \"string\")\n    }\n\n    if (Array.isArray(obj)) {\n      /* Mode one: simple array of versions */\n      if (!assert_string(obj)) {\n        console.warn(\"version_dropdown: expected array of strings, got \", obj)\n        return true\n      }\n      return \"string-array\"\n    } else if (Object.prototype.toString.call(obj) === '[object Object]') {\n      /* Mode two: elaborated version */\n      for (let key in obj) {\n        if (!Array.isArray(obj[key])) {\n          console.warn(\"version_dropdown: expected array, got \", obj[key])\n          return true\n        } else if (obj[key].length !== 2) {\n          console.warn(`version_dropdown: expected two items, got ${obj[key].length}`, obj[key])\n          return true\n        }\n      }\n      return \"fine-grained\"\n    }\n\n    console.warn(\"version_dropdown: expected object of arrays or array of strings, got \", obj)\n\n    return true\n  }\n  /**\n   * Convert string array of versions into object.\n   */\n  string_array_to_object (obj) {\n    let obj_ = {}\n\n    obj.forEach((item) => {\n      obj_[item] = [item, \"\"]\n    })\n\n    if (\"\" in obj_)\n      obj_[\"\"] = [\"main\", \"unstable\"]\n\n    for (const key in obj_) {\n      obj_[key] = [obj_[key][0], \"latest\"]\n      break\n    }\n\n    return obj_\n  }\n  /**\n   * Create Tag/Version dropdown at the left sidebar.\n   */\n  render (obj) {\n    let version = this.parent.state.version\n    let path = this.parent.state.path\n    let label = ''\n    let mode = this.assert(obj)\n    if (mode === true)\n      return\n    else if (mode == \"string-array\")\n      obj = this.string_array_to_object(obj)\n\n    let toc_tree = DOM.get('.sphinxsidebarwrapper .toc-tree')\n    let nav_bar = DOM.get('header #right .reverse')\n    let body = DOM.get('body')\n\n    let i = Object.keys(obj).length > 10 ? 4 : 2\n    let cols = \" auto\".repeat(i)\n    let container2 = new DOM('div', {\n      'className': 'version-dropdown-list',\n      'style': `grid-template-columns:${cols}`\n    })\n\n    if (obj.hasOwnProperty(path)) {\n      label = obj[path][1]\n      version = obj[path][0]\n    } else {\n      console.warn(`version_dropdown: current path ${path} is not in the tags.json. Hard-coded meta[name=\"version\"] will be used.`, obj)\n    }\n\n    for (let key in obj) {\n      let entry = new DOM('a', {\n        'href': key.length > 0 ?\n                  `${this.prefix}/${key}` :\n                  `${this.prefix}`\n      })\n      entry.onclick (this, (self, e) => {\n        e.preventDefault()\n        let start = app.state.path.length > 0 ?\n                      `${this.prefix}/${app.state.path}` :\n                      `${this.prefix}`,\n            og_url = location.pathname + location.hash\n        if (og_url.startsWith(start)) {\n          let url = self.$.href + og_url.substring(start.length)\n          Toolbox.try_redirect(url, self.$.href)\n        } else {\n          location.url(self.$.url)\n        }\n      }, [entry])\n      let entry_ = new DOM('div')\n      let label_ = new DOM('div')\n      entry_.innerText = obj[key][0]\n      let label = new DOM('span', {\n        'className': obj[key][1] === '' ? \"\" : \"label\"\n      })\n      label.innerText = obj[key][1]\n      label_.append(label)\n      entry.append(entry_)\n      entry.append(label_)\n      container2.append(entry)\n    }\n    let cancel_dropdown = new DOM('dev', {\n      'id': 'cancel-area-show-version-dropdown'\n    })\n    body.append(cancel_dropdown.$)\n    body.append(container2.$)\n\n    let container = new DOM('div', {\n      'className': 'version-dropdown',\n      'title': 'Change version'\n    })\n    container.innerText = version\n    let label_ = new DOM('span', {\n      'className': label === '' ? \"\" : \"label\"\n    })\n    label_.innerText = label\n    container.append(label_)\n\n    toc_tree.insertAdjacentElement('afterbegin', container.$)\n    let container3 = new DOM(container.$.cloneNode(true))\n\n    container.onclick(this, this.show, [true])\n    container3.onclick(this, this.show, [true])\n    cancel_dropdown.onclick(this, this.show, [true])\n    nav_bar.append(container3.$)\n\n    this.$.list = container2\n    this.$.cancel= cancel_dropdown\n  }\n  show (d) {\n    DOM.switchState(this.$.cancel)\n    DOM.switchState(this.$.list)\n  }\n}\n","\"use strict\";\nimport {DOM} from './dom.js'\nimport {Toolbox} from './toolbox.js'\n\n/**\n * Updates dynamic  links, banners with content from metadata.json.\n */\nexport class Links {\n  constructor (app) {\n    this.$ = {}\n\n    this.set_doms()\n    this.parent = app\n\n    let m = app.state.metadata\n    if ('repotoc' in m)\n      this.update_repotoc(m['repotoc'])\n    if ('banner' in m)\n      this.update_banner(m['banner'])\n  }\n  set_doms () {\n    let $ = this.$\n\n    $.repotocTreeOverlay = new DOM(DOM.get('.repotoc-tree.overlay root'))\n    $.repotocTreeSidebar = new DOM(DOM.get('.sphinxsidebar .repotoc-tree root'))\n    $.banner = new DOM('div', {\n      className: 'banner'\n    })\n    DOM.get('body').prepend($.banner.$)\n  }\n\n  update_repotoc (obj) {\n    let $ = this.$\n\n    let prefix = this.parent.state.sub_hosted === true ?\n                 '/' : this.parent.state.metadata.remote_doc\n    let home = \"index.html\"\n    let linksOverlay = [],\n        linksSidebar = []\n    for (const [key, value] of Object.entries(obj)) {\n      if (!('name' in value))\n        continue\n\n      let base = key == this.parent.state.repository ?\n                 this.parent.state.content_root :\n                 `${prefix}${key}/`\n      linksSidebar.push(new DOM('a', {\n        'href': `${base}${home}`,\n        'className': this.parent.state.repository === key ? 'current' : '',\n        'innerText': value['name']\n      }))\n    }\n\n    linksSidebar.forEach((elem) => {\n      linksOverlay.push(elem.cloneNode(true))\n    })\n\n    if ($.repotocTreeOverlay.$)\n      $.repotocTreeOverlay.removeChilds(),\n      $.repotocTreeOverlay.append(linksOverlay)\n    if ($.repotocTreeSidebar.$)\n      $.repotocTreeSidebar.removeChilds(),\n      $.repotocTreeSidebar.append(linksSidebar)\n  }\n\n  update_banner (obj) {\n    let $ = this.$\n\n    if ('msg' in obj)\n      $.banner.append(new DOM('span', {\n        'innerText': obj['msg']\n      }))\n\n    if ('a_href' in obj && 'a_text' in obj)\n      $.banner.append(new DOM('a', {\n        'href': obj['a_href'],\n        'innerText': obj['a_text'],\n        'target': '_blank'\n      }))\n  }\n}\n","\"use strict\";\nimport {DOM} from './dom.js'\n\n/**\n * Shows page actions buttons to the right side of the title.\n * The actions are:\n * * An edit page button to open the page source code on the git hosting website.\n */\nexport class PageActions {\n  constructor (app) {\n    this.$ = {}\n\n    this.parent = app\n    this.page_source()\n  }\n\n  page_source_sanity (m, r) {\n    if (!m.hasOwnProperty('source_hostname')) {\n      console.warn(\"edit_source: 'source_hostname' missing from metadata\", m)\n      return\n    }\n\n    if (!m['repotoc'].hasOwnProperty(r)) {\n      // The repo may not have been added yet\n      console.log(`edit_source: repository '${r}' not in metadata`)\n      return\n    }\n\n    if (!m['repotoc'][r].hasOwnProperty('pathname')) {\n      console.warn(`edit_source: 'pathname' missing from entry '${r}'`)\n      return\n    }\n\n    if (!m['repotoc'][r].hasOwnProperty('branch')) {\n      console.warn(`edit_source: 'branch' missing from entry '${r}'`)\n      return\n    }\n  }\n  /*\n   * Don't show page source buttom on some pages.\n   */\n  page_source_ignore () {\n    // Search page\n    if (document.querySelector(\"#search-documentation\") !== null)\n      return true\n\n    return false\n  }\n\n  draw_page_source (url) {\n    let container = new DOM('div', {\n      'className': 'page-actions'\n    })\n    let edit_button = new DOM('a', {\n      'className': 'edit-source',\n      'title': 'See and edit this page source',\n      'href': url,\n      'target': 'blank'\n    })\n    container.append(edit_button.$)\n\n    let doc = DOM.get('.bodywrapper .body-header')\n    if (doc === null) {\n      doc =  DOM.get('.bodywrapper .body')\n      doc.insertAdjacentElement('afterbegin', container.$)\n    } else {\n      doc.insertAdjacentElement('beforeend', container.$)\n    }\n  }\n\n  page_source () {\n    let m = this.parent.state.metadata\n    let r = this.parent.state.repository\n\n    if (this.page_source_sanity(m, r))\n      return\n\n    if (this.page_source_ignore())\n      return\n\n    let tgt = m.source_hostname.replace('{repository}', r)\n                               .replace('{branch}', m['repotoc'][r]['branch'])\n                               .replace('{pathname}', m['repotoc'][r]['pathname'])\n    let path = \"\"\n    if (this.parent.state.offline)\n      path = new URL(\"file://\"+location.pathname).href\n    else\n      path = new URL(location.pathname, location.origin).href\n\n    let base = new URL(this.parent.state.content_root, path).href\n    let pathname = path.substring(base.length)\n\n    if (pathname.endsWith('.html'))\n      pathname = pathname.replace(/\\.html$/i, '.rst')\n    else\n      pathname = pathname.concat('index.rst')\n\n    tgt = tgt.concat('/', pathname)\n\n    this.draw_page_source(tgt)\n  }\n}\n","\"use strict\";\n\nimport {DOM} from './dom.js'\n\n/**\n * Simple result scoring code.\n */\nif (typeof Scorer === \"undefined\") {\n  var Scorer = {\n    // Implement the following function to further tweak the score for each result\n    // The function takes a result array [docname, title, anchor, descr, score, filename]\n    // and returns the new score.\n    /*\n    score: result => {\n      const [docname, title, anchor, descr, score, filename, kind] = result\n      return score\n    },\n    */\n\n    // query matches the full name of an object\n    objNameMatch: 11,\n    // or matches in the last dotted part of the object name\n    objPartialMatch: 6,\n    // Additive scores depending on the priority of the object\n    objPrio: {\n      0: 15, // used to be importantResults\n      1: 5, // used to be objectResults\n      2: -5, // used to be unimportantResults\n    },\n    //  Used when the priority is not in the mapping.\n    objPrioDefault: 0,\n\n    // query found in title\n    title: 15,\n    partialTitle: 7,\n    // query found in terms\n    term: 5,\n    partialTerm: 2,\n  };\n}\n\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n */\nconst _escapeRegExp = (string) =>\n  string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n\n/**\n * A fork of Sphinx search tools with multi doc support.\n */\nexport class Search {\n  constructor (app) {\n    this.parent = app\n\n    this.index = {}\n    this.index_state = {}\n\n    let $ = this.$ = {}\n    $.keyCheckbox = {}\n    $.searchUL = {}\n    $.searchLI = {}\n    $.body = new DOM(DOM.get('body'))\n\n    $.searchAreaBg = new DOM(DOM.get('.search-area-bg')) /* polyfill < v0.4.8 */\n    if ($.searchAreaBg.$ === null) {\n      $.searchAreaBg = new DOM('div', {\n        className:'search-area-bg'\n      })\n      $.body.append([$.searchAreaBg])\n    }\n    $.searchAreaBg.onclick(this, this.cancel_search)\n\n    $.searchArea = new DOM(DOM.get('.search-area'))\n    $.searchForm = new DOM(DOM.get('form', $.searchArea))\n      .onevent(\"submit\", this, (e) => {e.preventDefault()})\n    $.searchFormButton = new DOM(DOM.get('button', $.searchForm))\n      .onup(this, this.cancel_search)\n    $.searchInput = new DOM(DOM.get('input', $.searchForm))\n    $.searchTags = new DOM('span', {\n      className: 'search-filter'\n    });\n    $.searchResults = new DOM('ul', {\n      className: 'search-results'\n    });\n    $.searchContainer = new DOM('span', {\n      className: 'search-container'\n    }).onclick(this, (e) => {\n      if (e.target === $.searchContainer.$)\n        this.cancel_search()\n    });\n\n    this.$.searchContainer.append([this.$.searchTags, this.$.searchResults])\n    this.$.searchArea.append([this.$.searchContainer])\n    $.searchForm.$['action'] = DOM.get('link[rel=\"search\"]').href\n\n    $.searchButton = new DOM(DOM.get('header button#search')) /* polyfill < v0.4.8 */\n    if ($.searchButton.$ === null) {\n\t    $.searchButton = new DOM('button', {\n        id:'search',\n        className:'icon',\n        title:'Search (/)'\n      })\n      this.parent.navigation.$.rightHeader.append([$.searchButton])\n    }\n    $.searchButton.onclick(this, () => {\n      $.searchArea.classList.add('on')\n      $.searchAreaBg.classList.add('on')\n      $.searchInput.focus()\n      $.searchInput.$.select()\n      this.$.body.classList.add('overflow-hidden')\n      this.set_default()\n    })\n\n    this.init()\n\n    app.search = this\n  }\n  /**\n   * Default split_query function. Can be overridden in ``sphinx.search`` with a\n   * custom function per language (TODO look for split_query and allow injection).\n   *\n   * The regular expression works by splitting the string on consecutive characters\n   * that are not Unicode letters, numbers, underscores, or emoji characters.\n   * This is the same as ``\\W+`` in Python, preserving the surrogate pair area.\n   */\n  split_query (query) {\n     return query\n        .split(/[^\\p{Letter}\\p{Number}_\\p{Emoji_Presentation}]+/gu)\n        .filter(term => term)\n  }\n  cancel_search () {\n    this.$.searchArea.classList.remove('on')\n    this.$.searchAreaBg.classList.remove('on')\n    this.$.body.classList.remove('overflow-hidden')\n    let url = new URL(location)\n    url.searchParams.delete('q')\n    url.searchParams.delete('r')\n    history.replaceState({}, null, url);\n  }\n  /*\n   * Helper function used by query() to order search results.\n   * Each input is an array of [docname, title, anchor, descr, score, filename, kind].\n   * Order the results by score (in opposite order of appearance, since the\n   * `_displayNextItem` function uses pop() to retrieve items) and then alphabetically.\n   */\n   _orderResultsByScoreThenName = (a, b) => {\n    const leftScore = a[4];\n    const rightScore = b[4];\n    if (leftScore === rightScore) {\n      // same score: sort alphabetically\n      const leftTitle = a[1].toLowerCase();\n      const rightTitle = b[1].toLowerCase();\n      if (leftTitle === rightTitle) return 0;\n      return leftTitle > rightTitle ? -1 : 1; // inverted is intentional\n    }\n    return leftScore > rightScore ? 1 : -1;\n  };\n  check_toc (key, ev) {\n    if (ev.target.checked) {\n      if (this.index_state[key].requested === false) {\n        let search_ = new URL(`${this.parent.state.metadata.remote_doc}${key}/searchindex.js`)\n        this.load_index(search_.href, key)\n        this.index_state[key].requested = true\n        this.$.keyCheckbox[key].classList.add('requested')\n        this.$.keyCheckbox[key].classList.remove('failed')\n      } else {\n        this.query(this.$.searchInput.$.value)\n      }\n    } else {\n      this.get_tags_and_update_url(this.$.searchInput.$.value)\n    }\n    this.renew_search()\n  }\n  renew_search () {\n    let searchUL_ = []\n    for (const [key, value] of Object.entries(this.index_state)) {\n      if (this.$.keyCheckbox[key].$.checked === true && this.index_state[key].ready === true) {\n        if (!(key in this.$.searchUL)) {\n          this.$.searchUL[key] = new DOM('ul')\n          this.$.searchLI[key] = new DOM('li').append([\n            new DOM('div', {\n              innerText:  this.parent.state.metadata.repotoc[key].name\n            }),\n            this.$.searchUL[key]\n          ])\n          searchUL_.push(this.$.searchLI[key])\n        }\n        this.$.searchLI[key].classList.add('on')\n      } else {\n        if (key in this.$.searchUL)\n          this.$.searchLI[key].classList.remove('on')\n      }\n    }\n    this.$.searchResults.append(searchUL_)\n  }\n  set_default () {\n    let key = this.parent.state.repository\n    let event = new Event('change');\n    if (!(key in this.$.keyCheckbox))\n      return\n    this.$.keyCheckbox[key].$.checked = true\n    this.$.keyCheckbox[key].$.dispatchEvent(event)\n  }\n  /* Search shortcut */\n  search_shortcut (e) {\n    if (((e.code === 'IntlRo' || e.code === 'Slash') ||\n         (e.code === 'KeyK' && (e.ctrlKey || e.altKey)))\n        && !this.$.searchArea.classList.contains('on')) {\n      this.$.searchArea.classList.add('on')\n      this.$.searchAreaBg.classList.add('on')\n      this.$.body.classList.add('overflow-hidden')\n      this.$.searchInput.focus()\n      this.$.searchInput.$.select()\n      this.set_default()\n    } else if (e.code === 'Escape') {\n      if (this.$.searchArea.classList.contains('on')) {\n        this.cancel_search()\n      }\n    }\n  }\n  /**\n   * Load index of search sources.\n   */\n  load_index = (url, key) => {\n    let onfailure = (error) => {\n      console.warn(error)\n      this.index_state[key].requested = false\n      this.$.keyCheckbox[key].classList.remove('requested')\n      this.$.keyCheckbox[key].classList.add('failed')\n      this.$.keyCheckbox[key].$.checked = false\n    }\n    const request = new Request(url)\n    fetch (request)\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          if (text.substring(0, 16) != \"Search.setIndex(\" || text.substring(text.length-1) != \")\")\n            throw new Error(`Search index of key '${key}' is impropetly formatted`)\n          this.index[key] = JSON.parse(text.substring(16, text.length-1))\n          this.index_state[key].ready = true\n          this.$.keyCheckbox[key].classList.remove('requested')\n          this.$.keyCheckbox[key].classList.add('ready')\n          this.query(this.$.searchInput.$.value)\n        } catch (error) {\n          onfailure(error)\n        }\n      })\n      .catch(onfailure)\n  }\n  /**\n   * search for object names\n   */\n  perform_object_search (object, objectTerms, searchOn) {\n    const filenames = this.index[searchOn].filenames;\n    const docNames = this.index[searchOn].docnames;\n    const objects = this.index[searchOn].objects;\n    const objNames = this.index[searchOn].objnames;\n    const titles = this.index[searchOn].titles;\n\n    const results = [];\n\n    const objectSearchCallback = (prefix, match) => {\n      const name = match[4]\n      const fullname = (prefix ? prefix + \".\" : \"\") + name;\n      const fullnameLower = fullname.toLowerCase();\n      if (fullnameLower.indexOf(object) < 0) return;\n\n      let score = 0;\n      const parts = fullnameLower.split(\".\");\n\n      // check for different match types: exact matches of full name or\n      // \"last name\" (i.e. last dotted part)\n      if (fullnameLower === object || parts.slice(-1)[0] === object)\n        score += Scorer.objNameMatch;\n      else if (parts.slice(-1)[0].indexOf(object) > -1)\n        score += Scorer.objPartialMatch; // matches in last name\n\n      const objName = objNames[match[1]][2];\n      const title = titles[match[0]];\n\n      // If more than one term searched for, we require other words to be\n      // found in the name/title/description\n      const otherTerms = new Set(objectTerms);\n      otherTerms.delete(object);\n      if (otherTerms.size > 0) {\n        const haystack = `${prefix} ${name} ${objName} ${title}`.toLowerCase();\n        if (\n          [...otherTerms].some((otherTerm) => haystack.indexOf(otherTerm) < 0)\n        )\n          return;\n      }\n\n      let anchor = match[3];\n      if (anchor === \"\") anchor = fullname;\n      else if (anchor === \"-\") anchor = objNames[match[1]][1] + \"-\" + fullname;\n\n      const descr = objName + \", in \" + title;\n\n      // add custom score for some objects according to scorer\n      if (Scorer.objPrio.hasOwnProperty(match[2]))\n        score += Scorer.objPrio[match[2]];\n      else score += Scorer.objPrioDefault;\n\n      results.push([\n        docNames[match[0]],\n        fullname,\n        \"#\" + anchor,\n        descr,\n        score,\n        filenames[match[0]],\n        \"object\",\n      ]);\n    };\n    Object.keys(objects).forEach((prefix) =>\n      objects[prefix].forEach((array) =>\n        objectSearchCallback(prefix, array)\n      )\n    );\n    return results;\n  }\n  /**\n   * search for full-text terms in the index\n   */\n  perform_terms_search (searchTerms, excludedTerms, searchOn) {\n    // prepare search\n    const terms = this.index[searchOn].terms;\n    const titleTerms = this.index[searchOn].titleterms;\n    const filenames = this.index[searchOn].filenames;\n    const docNames = this.index[searchOn].docnames;\n    const titles = this.index[searchOn].titles;\n\n    // Collect multiple result groups to be sorted separately and then ordered.\n    // Each is an array of [docname, title, anchor, descr, score, filename, kind].\n    const normalResults = []\n    const nonMainIndexResults = []\n\n    const scoreMap = new Map();\n    const fileMap = new Map();\n\n    // perform the search on the required terms\n    searchTerms.forEach((word) => {\n      const files = [];\n      // find documents, if any, containing the query word in their text/title term indices\n      // use Object.hasOwnProperty to avoid mismatching against prototype properties\n      const arr = [\n        { files: terms.hasOwnProperty(word) ? terms[word] : undefined, score: Scorer.term },\n        { files: titleTerms.hasOwnProperty(word) ? titleTerms[word] : undefined, score: Scorer.title },\n      ];\n      // add support for partial matches\n      if (word.length > 2) {\n        const escapedWord = _escapeRegExp(word);\n        if (!terms.hasOwnProperty(word)) {\n          Object.keys(terms).forEach((term) => {\n            if (term.match(escapedWord))\n              arr.push({ files: terms[term], score: Scorer.partialTerm });\n          });\n        }\n        if (!titleTerms.hasOwnProperty(word)) {\n          Object.keys(titleTerms).forEach((term) => {\n            if (term.match(escapedWord))\n              arr.push({ files: titleTerms[term], score: Scorer.partialTitle });\n          });\n        }\n      }\n\n      // no match but word was a required one\n      if (arr.every((record) => record.files === undefined)) return;\n\n      // found search word in contents\n      arr.forEach((record) => {\n        if (record.files === undefined) return;\n\n        let recordFiles = record.files;\n        if (recordFiles.length === undefined) recordFiles = [recordFiles];\n        files.push(...recordFiles);\n\n        // set score for the word in each file\n        recordFiles.forEach((file) => {\n          if (!scoreMap.has(file)) scoreMap.set(file, new Map());\n          const fileScores = scoreMap.get(file);\n          fileScores.set(word, record.score);\n        });\n      });\n\n      // create the mapping\n      files.forEach((file) => {\n        if (!fileMap.has(file)) fileMap.set(file, [word]);\n        else if (fileMap.get(file).indexOf(word) === -1) fileMap.get(file).push(word);\n      });\n    });\n\n    // now check if the files don't contain excluded terms\n    const results = [];\n    for (const [file, wordList] of fileMap) {\n      // check if all requirements are matched\n\n      // as search terms with length < 3 are discarded\n      const filteredTermCount = [...searchTerms].filter(\n        (term) => term.length > 2\n      ).length;\n      if (\n        wordList.length !== searchTerms.size &&\n        wordList.length !== filteredTermCount\n      )\n        continue;\n\n      // ensure that none of the excluded terms is in the search result\n      if (\n        [...excludedTerms].some(\n          (term) =>\n            terms[term] === file ||\n            titleTerms[term] === file ||\n            (terms[term] || []).includes(file) ||\n            (titleTerms[term] || []).includes(file)\n        )\n      )\n        break;\n\n      // select one (max) score for the file.\n      const score = Math.max(...wordList.map((w) => scoreMap.get(file).get(w)));\n      // add result to the result list\n      results.push([\n        docNames[file],\n        titles[file],\n        \"\",\n        null,\n        score,\n        filenames[file],\n        \"text\",\n      ]);\n    }\n    return results;\n  }\n  /**\n   * Execute search (requires search index to be loaded)\n   */\n  perform_search (query, searchTerms, excludedTerms, highlightTerms, objectTerms, searchOn) {\n    const filenames = this.index[searchOn].filenames\n    const docNames = this.index[searchOn].docnames\n    const titles = this.index[searchOn].titles\n    const allTitles = this.index[searchOn].alltitles\n    const indexEntries = this.index[searchOn].indexentries\n\n    // Collect multiple result groups to be sorted separately and then ordered.\n    // Each is an array of [docname, title, anchor, descr, score, filename, kind].\n    const normalResults = []\n    const nonMainIndexResults = []\n\n    //_removeChildren(document.getElementById(\"search-progress\"));\n\n    const queryLower = query.toLowerCase().trim();\n    for (const [title, foundTitles] of Object.entries(allTitles)) {\n      if (title.toLowerCase().trim().includes(queryLower) && (queryLower.length >= title.length/2)) {\n        for (const [file, id] of foundTitles) {\n          const score = Math.round(Scorer.title * queryLower.length / title.length)\n          const boost = titles[file] === title ? 1 : 0  // add a boost for document titles\n          normalResults.push([\n            docNames[file],\n            titles[file] !== title ? `${titles[file]} > ${title}` : title,\n            id !== null ? \"#\" + id : \"\",\n            null,\n            score + boost,\n            filenames[file],\n            \"title\",\n          ]);\n        }\n      }\n    }\n\n    // search for explicit entries in index directives\n    for (const [entry, foundEntries] of Object.entries(indexEntries)) {\n      if (entry.includes(queryLower) && (queryLower.length >= entry.length/2)) {\n        for (const [file, id, isMain] of foundEntries) {\n          const score = Math.round(100 * queryLower.length / entry.length)\n          const result = [\n            docNames[file],\n            titles[file],\n            id ? \"#\" + id : \"\",\n            null,\n            score,\n            filenames[file],\n            \"index\",\n          ];\n          if (isMain) {\n            normalResults.push(result);\n          } else {\n            nonMainIndexResults.push(result);\n          }\n        }\n      }\n    }\n\n    // lookup as object\n    objectTerms.forEach((term) =>\n      normalResults.push(...this.perform_object_search(term, objectTerms, searchOn))\n    );\n\n    // lookup as search terms in fulltext\n    normalResults.push(...this.perform_terms_search(searchTerms, excludedTerms, searchOn))\n\n    // let the scorer override scores with a custom scoring function\n    if (Scorer.score) {\n      normalResults.forEach((item) => (item[4] = Scorer.score(item)))\n      nonMainIndexResults.forEach((item) => (item[4] = Scorer.score(item)))\n    }\n\n    // Sort each group of results by score and then alphabetically by name.\n    normalResults.sort(this._orderResultsByScoreThenName)\n    nonMainIndexResults.sort(this._orderResultsByScoreThenName)\n\n    // Combine the result groups in (reverse) order.\n    // Non-main index entries are typically arbitrary cross-references,\n    // so display them after other results.\n    let results = [...nonMainIndexResults, ...normalResults]\n\n    // remove duplicate search results\n    // note the reversing of results, so that in the case of duplicates, the highest-scoring entry is kept\n    let seen = new Set();\n    results = results.reverse().reduce((acc, result) => {\n      let resultStr = result.slice(0, 4).concat([result[5]]).map(v => String(v)).join(',')\n      if (!seen.has(resultStr)) {\n        acc.push(result);\n        seen.add(resultStr);\n      }\n      return acc;\n    }, []);\n\n    return results.reverse();\n  }\n  get_tags_and_update_url (query) {\n    const enabledTags = []\n    for (const [key, value] of Object.entries(this.index_state)) {\n      if (this.$.keyCheckbox[key].$.checked === true && this.index[key] !== undefined)\n        enabledTags.push(key)\n    }\n\n    let url = new URL(location)\n    if (query.length > 0) {\n      url.searchParams.set('q', query)\n      url.searchParams.set('r', enabledTags)\n    } else {\n      url.searchParams.delete('q')\n      url.searchParams.delete('r')\n    }\n    history.replaceState({}, null, url);\n    return enabledTags\n  }\n  query (query) {\n    /* language data not loaded yet */\n    if (typeof Stemmer === \"undefined\")\n      return\n\n    const [searchQuery, searchTerms, excludedTerms, highlightTerms, objectTerms] = this.parse_query(query)\n    this.renew_search()\n    let enabledTags = this.get_tags_and_update_url(query)\n    enabledTags.forEach((key) => {\n      const results = this.perform_search(searchQuery, searchTerms, excludedTerms, highlightTerms, objectTerms, key)\n      while (this.$.searchUL[key].$.firstChild) {\n        this.$.searchUL[key].$.removeChild(this.$.searchUL[key].$.lastChild)\n      }\n\n      let searchResults_ = []\n      /* For now, versioning is not supported, so content_root or path is no used */\n      let prefix = this.parent.state.repository === key ?\n                     (this.parent.state.sub_hosted ? `/${key}` : \"\" )\n                     : `${this.parent.state.metadata.remote_doc}${key}`\n      results.forEach((item) => {\n        searchResults_.push(new DOM('li').append(\n          new DOM('a', {\n            href: `${prefix}/${item[0]}.html`,\n            innerText: item[1],\n          })\n        ))\n      })\n      searchResults_.reverse()\n      this.$.searchUL[key].append(searchResults_)\n      if (results.length === 0)\n        this.$.searchLI[key].classList.add('empty')\n      else\n        this.$.searchLI[key].classList.remove('empty')\n    })\n\n  }\n  parse_query (query) {\n    // stem the search terms and add them to the correct list\n    const stemmer = new Stemmer();\n    const searchTerms = new Set();\n    const excludedTerms = new Set();\n    const highlightTerms = new Set();\n    const objectTerms = new Set(this.split_query(query.toLowerCase().trim()));\n    this.split_query(query.trim()).forEach((queryTerm) => {\n      const queryTermLower = queryTerm.toLowerCase();\n\n      // maybe skip this \"word\"\n      // stopwords array is from language_data.js\n      if (\n        stopwords.indexOf(queryTermLower) !== -1 ||\n        queryTerm.match(/^\\d+$/)\n      )\n        return;\n\n      // stem the word\n      let word = stemmer.stemWord(queryTermLower);\n      // select the correct list\n      if (word[0] === \"-\") excludedTerms.add(word.substr(1));\n      else {\n        searchTerms.add(word);\n        highlightTerms.add(queryTermLower);\n      }\n    });\n\n    localStorage.setItem(\"sphinx_highlight_terms\", [...highlightTerms].join(\" \"))\n\n    return [query, searchTerms, excludedTerms, highlightTerms, objectTerms];\n  }\n  keyup (e) {\n    switch (e.code) {\n      case 'IntlRo':\n      case 'Slash':\n      case 'Escape':\n      case 'KeyK':\n        this.search_shortcut(e)\n        break\n    }\n  }\n  keydown (e) {\n    switch (e.code) {\n      case 'IntlRo':\n      case 'Slash':\n        e.preventDefault()\n        return\n      case 'KeyK':\n        if (e.ctrlKey && e.altKey)\n          e.preventDefault()\n        return\n    }\n  }\n  /**\n   * Init search.\n   */\n  init () {\n    let language_data_script = new URL(`${this.parent.state.content_root}_static/language_data.js`,\n                                       location)\n    this.$.language_data = new DOM('script', {\n      src: language_data_script.href,\n      async: true\n    }).onevent(\"load\", this, (e) => {\n      this.$.searchForm.$.action = \"\"\n    })\n    this.$.body.append([this.$.language_data])\n\n    for (const [key, value] of Object.entries(this.parent.state.metadata.repotoc)) {\n      this.index_state[key] = {\n        ready: false,\n        requested: false\n      }\n      let input_ = new DOM('input', {\n        id: `tag-${key}`,\n        type: 'checkbox'\n      }).onchange(this, this.check_toc, [key])\n      this.$.searchTags.append([\n        new DOM('span').append([\n          input_,\n          new DOM('label', {\n            htmlFor: `tag-${key}`,\n            innerText: value['name']\n          })\n        ])\n      ])\n      this.$.keyCheckbox[key] = input_\n    }\n    this.$.searchInput.$.oninput = (e) => {this.query(e.target.value)}\n\n    let url = new URL(location)\n    let q = url.searchParams.get('q')\n    let r = url.searchParams.get('r')\n    if (q !== null) {\n      if (r !== null) {\n        r = r.split(',')\n        r.forEach((key) => {\n          let event = new Event('change');\n          if (key in this.$.keyCheckbox) {\n            this.$.keyCheckbox[key].$.checked = true\n            this.$.keyCheckbox[key].$.dispatchEvent(event)\n          }\n        })\n      }\n      this.$.searchInput.$.value = q\n      let event = new Event('click');\n      this.$.searchButton.$.dispatchEvent(event)\n    }\n\n    document.addEventListener('keyup', (e) => {this.keyup(e)}, false);\n    document.addEventListener('keydown', (e) => {this.keydown(e)}, false);\n  }\n}\n","import { VersionDropdown } from './version_dropdown.js'\nimport { Links } from './links.js'\nimport { PageActions } from './page_actions.js'\nimport { Search } from './search.js'\n\nexport default function Extra (){\n   new VersionDropdown(app)\n   new Links(app)\n   new PageActions(app)\n   new Search(app)\n}\n\nExtra()\n"],"names":["DOM","constructor","dom","tags","this","$","document","createElement","tag","dataset","cloneNode","deep","innerText","str","height","offsetHeight","width","offsetWidth","id","value","src","focus","classList","style","onchange","self","ev","args","e","apply","Array","push","onclick","onup","addEventListener","ondown","onmove","onevent","event","fun","append","DOMS","forEach","item","test","name","appendChild","remove","removeChilds","child","lastElementChild","removeChild","get","a","b","querySelector","getAll","querySelectorAll","switchState","_class","cn","undefined","contains","add","UID","Date","toString","Math","random","substr","prototypeDetails","summary","details","prototypeInputFile","htmlFor","className","type","prototypeCheckSwitch","input","prototypeDownload","filename","file","data","reg","format","match","replaceAll","toLowerCase","encodeURIComponent","element","setAttribute","display","body","click","setSelected","i","options","length","text","selected","lazyUpdate","uid","props","param","key","Toolbox","randomChar","alphabet","floor","substring","SID","fromUrl","_param","URLSearchParams","location","search","urlDefaults","urlValidParams","includes","cleanPathname","_pathname","replace","getDepth","try_redirect","url","fallback_url","fetch","method","status","href","fetch_each","urls","request","Request","response","ok","obj","json","error","cache_check","state","fetch_url","hours","callback","isArray","cache_key","localStorage","getItem","JSON","parse","cache_timeout","setHours","reloaded","valueOf","now","then","console","setItem","stringify","VersionDropdown","app","parent","prefix","sub_hosted","repository","init","offline","render","assert","every","warn","Object","prototype","call","string_array_to_object","obj_","version","path","label","mode","toc_tree","nav_bar","keys","cols","repeat","container2","hasOwnProperty","entry","preventDefault","start","og_url","pathname","hash","startsWith","entry_","label_","cancel_dropdown","container","title","insertAdjacentElement","container3","show","list","cancel","d","Links","set_doms","m","metadata","update_repotoc","update_banner","repotocTreeOverlay","repotocTreeSidebar","banner","prepend","remote_doc","linksOverlay","linksSidebar","entries","base","content_root","elem","target","PageActions","page_source","page_source_sanity","r","log","page_source_ignore","draw_page_source","edit_button","doc","tgt","source_hostname","URL","origin","endsWith","concat","Scorer","objNameMatch","objPartialMatch","objPrio","objPrioDefault","partialTitle","term","partialTerm","Search","index","index_state","keyCheckbox","searchUL","searchLI","searchAreaBg","cancel_search","searchArea","searchForm","searchFormButton","searchInput","searchTags","searchResults","searchContainer","searchButton","navigation","rightHeader","select","set_default","split_query","query","split","filter","searchParams","delete","history","replaceState","_orderResultsByScoreThenName","leftScore","rightScore","leftTitle","rightTitle","check_toc","checked","requested","search_","load_index","get_tags_and_update_url","renew_search","searchUL_","ready","repotoc","Event","dispatchEvent","search_shortcut","code","ctrlKey","altKey","onfailure","Error","catch","perform_object_search","object","objectTerms","searchOn","filenames","docNames","docnames","objects","objNames","objnames","titles","results","array","fullname","fullnameLower","indexOf","score","parts","slice","objName","otherTerms","Set","size","haystack","some","otherTerm","anchor","descr","objectSearchCallback","perform_terms_search","searchTerms","excludedTerms","terms","titleTerms","titleterms","scoreMap","Map","fileMap","word","files","arr","escapedWord","record","recordFiles","has","set","wordList","filteredTermCount","max","map","w","perform_search","highlightTerms","allTitles","alltitles","indexEntries","indexentries","normalResults","nonMainIndexResults","queryLower","trim","foundTitles","round","boost","foundEntries","isMain","result","sort","seen","reverse","reduce","acc","resultStr","v","String","join","enabledTags","Stemmer","searchQuery","parse_query","firstChild","lastChild","searchResults_","stemmer","queryTerm","queryTermLower","stopwords","stemWord","keyup","keydown","language_data_script","language_data","async","action","input_","oninput","q","Extra"],"mappings":"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"}