{"version":3,"file":"extra.umd.js","sources":["../scripts/polyfill.js","../scripts/dom.js","../scripts/toolbox.js","../scripts/links.js","../scripts/page_actions.js","../scripts/versioned.js","../scripts/search.js","../scripts/content_actions.js","../scripts/event.js","../scripts/extra.js"],"sourcesContent":["\"use strict\";\n\n/**\n * Polyfill context for older versions.\n */\nexport class Polyfill {\n  constructor (app) {\n    /* polyfill < v0.4.11 */\n    if (Object.hasOwn(app.state, 'sub_hosted')) {\n      app.state.subhost = app.state.sub_hosted === true ? `/${app.state.repository}` : ''\n      delete app.state.sub_hosted\n    }\n    /* polyfill < v0.4.17 */\n    if (!Object.hasOwn(app.state, 'standalone'))\n        app.state.standalone =  document.querySelector('meta[name=\"standalone\"]') ? true : false\n  }\n}\n","\"use strict\";\nexport {DOM}\n\n/** Make DOM element */\nclass DOM {\n  constructor (dom, tags){\n    this.$\n    if (typeof dom != 'string'){\n      this.$ = dom\n      return\n    }\n    this.$ = document.createElement(dom);\n    if (typeof tags == 'object') for (const tag in tags) {\n      if (tag in this.$)\n        this.$[tag] = tags[tag]\n      else\n        this.$.dataset[tag] = tags[tag]\n    }\n  }\n  /* Make DOM element, without wrapper class */\n  static new (dom, tags){\n    let elem = document.createElement(dom);\n    if (typeof tags == 'object') for (const tag in tags) {\n      if (tag in elem)\n        elem[tag] = tags[tag]\n      else\n        elem.dataset[tag] = tags[tag]\n    }\n    return elem\n  }\n  /**\n   * Clone node\n   * @param {bool} deep - If true, then the node and its whole subtree,\n   * including text that may be in child Text nodes, is also copied.\n   */\n  cloneNode (deep){\n    let node = new DOM(this.$.cloneNode(deep))\n    return node\n  }\n  /**\n   * Set DOM innerText.\n   * @param {string} str - Text to apply.\n   */\n  set innerText(str){\n    this.$.innerText = str\n  }\n  /**\n   * Get DOM innerText.\n   */\n  get innerText(){\n    return this.$.innerText\n  }\n  /** Get DOM offset height */\n  get height (){\n    return this.$.offsetHeight\n  }\n  /** Get DOM offset width */\n  get width (){\n    return this.$.offsetWidth\n  }\n  /** Get DOM id */\n  get id (){\n    return this.$.id\n  }\n  /** Set DOM id */\n  set id (str){\n    this.$.id= str\n  }\n  /** Get DOM value */\n  get value (){\n    return this.$.value\n  }\n  /** Set DOM value */\n  set value (str){\n    this.$.value = str\n  }\n  /** Get DOM src */\n  get src (){\n    return this.$.src\n  }\n  /** Set DOM src */\n  set src (str){\n    this.$.src = str\n  }\n  /**\n   * Focus on DOM.\n   */\n  focus (){\n    this.$.focus()\n  }\n  /** Get DOM classList object. */\n  get classList(){\n    return this.$.classList\n  }\n  /** Get DOM style object. */\n  get style(){\n    return this.$.style\n  }\n  /**\n   * Append a ``onchange`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onchange (self, ev, args){\n    this.$.onchange = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``onclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onclick (self, ev, args){\n    this.$.onclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``onauxclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onauxclick (self, ev, args){\n    this.$.onauxclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``mouseup`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onup (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``onmiddleclick`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onmiddleclick (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if ( e.which !== 2 )\n        return\n\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousedown`` event.\n   * @param {function} ev - Function to be executed on down.\n   */\n  ondown (self, ev, args){\n    this.$.addEventListener('mousedown', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousemove`` and ``touchmove`` event.\n   * @param {function} ev - Function to be executed on move.\n   */\n  onmove (self, ev, args){\n    this.$.addEventListener('mousemove', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a event listener.\n   * @param {string} event - Event listener name.\n   * @param {function} fun - Function to be executed on move.\n   * @param {function} args - Arguments to be applied to the function.\n   */\n  onevent (event, self, fun, args){\n    this.$.addEventListener(event, (e) => {\n      if (typeof args == 'undefined')\n        fun.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        fun.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Appends others :js:func:`DOM`.\n   * @param {Object[]} DOMS - Array of :js:func:`DOM` or/and direct DOM Nodes.\n   */\n  append (DOMS){\n    if (DOMS.constructor != Array)\n      DOMS = [DOMS]\n\n    DOMS.forEach ((item) => {\n      if (/HTML(.*)Element/.test(item.constructor.name))\n        this.$.appendChild(item)\n      else if (typeof item == 'object' &&\n               /HTML(.*)Element/.test(item.$.constructor.name))\n        this.$.appendChild(item.$)\n    })\n\n    return this\n  }\n  /**\n   * Delete object.\n   */\n  delete (){\n    this.$.remove()\n    delete this\n  }\n  /**\n   * Remove childs from :js:func:`DOM` object.\n   */\n  static removeChilds (a){\n    let child = a.lastElementChild\n    while (child) {\n      a.removeChild(child)\n      child = a.lastElementChild\n    }\n  }\n  /**\n   * Get DOM Node element.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Optional parent DOM.\n   */\n  static get (a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'undefined') ? document.querySelector (a) : b.querySelector(a)\n  }\n  /**\n   * Get all DOM Node elements.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Parent DOM.\n   */\n  static getAll(a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'object') ? b.querySelectorAll(a) : get(b).querySelectorAll(a)\n  }\n  /**\n   * Include or remove a class to a DOM.\n   * @param {Object} b - Target DOM.\n   * @param {string} _class - Optional class, defaults to `on`.\n   */\n  static switchState (b, _class){\n    b = b instanceof DOM ? b.$ : b\n    let cn = _class != undefined ? _class : `on`\n    if (b.classList.contains(cn))\n      b.classList.remove(cn)\n    else\n      b.classList.add(cn)\n  }\n  /**\n  * Generate a unique identifier.\n  */\n  static UID (){\n    return (+new Date).toString(36) + Math.random().toString(36).substr(2)\n  }\n  /**\n   * Set a option of a select list by its innerText.\n   * @param {Object} dom - Node of the select list.\n   * @param {string} value - Inner text of the target option.\n   */\n  static setSelected (dom, value){\n    for (var i = 0; i < dom.$.options.length; i++){\n      if (dom.$.options[i].text == value){\n        dom.$.options[i].selected = true\n        return\n      }\n    }\n  }\n  /**\n   * Updates parameter of children of a DOM.\n   * Lazy because doesn't care is successful or not.\n   * Useful for generic lists, like in searches.\n   * @param {Object} dom - Container of the list.\n   * @param {string} uid - Item to search for.\n   * @param {Object} props - Properties to update, where the key is also the DOM id.\n   * @param {string} param - Parameter to update.\n   */\n  static lazyUpdate (dom, uid, props, param){\n    param = param == undefined ? 'innerText' : param\n    let element = DOM.get(`[data-uid='${uid}']`, dom)\n    for (const key in props){\n      DOM.get(`#${key}`, element)[param] = props[key]\n    }\n  }\n  /**\n   * Gets the inner text of a dom, excluding children.\n   * @param {Object} dom - Element to extract.\n   */\n  static getOwnText(elem) {\n    return Array.from(elem.childNodes)\n      .filter(n => n.nodeType === Node.TEXT_NODE)\n      .map(n => n.textContent)\n      .join(\"\");\n  }\n}\n","\"use strict\";\n\nexport {Toolbox}\n\n/**\n * Provides useful generic functions.\n */\nclass Toolbox {\n  /**\n   * Get random char.\n   */\n  static randomChar () {\n    const alphabet = \"abcdefghijklmnopqrstuvwxyz\"\n    return alphabet[Math.floor(Math.random() * alphabet.length)]\n  }\n /**\n  * Generate a unique identifier.\n  */\n  static UID () {\n    return this.randomChar() + (+new Date).toString(36) + Math.random().toString(36).substring(3)\n  }\n /**\n  * Generate a small non-timed identifier.\n  */\n  static SID () {\n    return this.randomChar() + (Math.random()).toString(36).substring(3,8)\n  }\n  /**\n   * Return param from url search parami, if unset, return the default.\n   * @param {string} _param - Parameter to search in the array.\n   * @return Requested parameter.\n   */\n  static fromUrl (_param) {\n    let param = new URLSearchParams(document.location.search)\n    return param.get(_param) == null ?\n      this.urlDefaults(_param) : this.urlValidParams(_param, param.get(_param))\n  }\n  /**\n   * Default url parameters values if not set\n   * @param {string} _param - Parameter to return the default.\n   * @return Default parameter.\n   */\n  static urlDefaults (_param) {\n    switch (_param) {\n      case 'theme':\n        return 'light'\n    }\n  }\n  /**\n   * Valid parameters, if a invalid is passed, will return the default.\n   */\n  static urlValidParams (_param, value) {\n    switch (_param) {\n      case 'theme':\n        return ['dark', 'light'].includes(value) ? value : this.urlDefaults(_param)\n    }\n  }\n  static cleanPathname (_pathname) {\n    return _pathname.replace(/([^:]\\/)\\/+/g, \"$1\").replace(/[^:]\\.\\//g, \"$1\")\n  }\n  /**\n   * Get the depth of a path name.\n   */\n  static getDepth (_pathname) {\n    return (_pathname.match(/\\//g)||[]).length\n  }\n  /*\n   * Check if link exists, if not, redirect to second option.\n   */\n  static async try_redirect (url, fallback_url, new_tab) {\n    let url_\n    try {\n      const response = await fetch(url, {\n        method: 'HEAD'\n      })\n\n      if (response.status === 404)\n        url_ = fallback_url\n      else\n        url_ = url\n    } catch (e) {\n      url_ = fallback_url\n    }\n    if (!url_)\n      return true\n    if (new_tab)\n      window.open(url_, '_blank').focus()\n    else\n      location.href = url_\n    return false\n  }\n  /*\n   * Check if the raw content is only a include directive.\n   * If yes, resolve its path and redirect to it.\n   */\n  static async try_include (url_raw, url, new_tab) {\n    let fallback = (error) => {\n      if (new_tab)\n        window.open(url, '_blank').focus()\n      else\n        location.href = url\n    }\n    const request = new Request(url_raw)\n    await fetch (request)\n      .then(\n        (response) => {\n          if (!response.ok)\n            throw new Error(response.status)\n          return response.text()\n        })\n      .then((text) => {\n        text = text.replace(/\\n+$/, \"\")\n        if (text.startsWith(\".. include:: \") && text.split(/\\n/).length == 1) {\n          text = text.substring(13)\n          if (new_tab)\n            window.open(new URL(text, url).href, '_blank').focus()\n          else\n            location.href = new URL(text, url).href\n        } else {\n          fallback()\n        }\n      })\n      .catch(fallback)\n    return\n  }\n  /*\n   * Try to fetch every item in array.\n   */\n  static async fetch_each (urls) {\n    if (!Array.isArray(urls))\n      urls = [urls]\n\n    for (let url of urls) {\n      try {\n        const request = new Request(url)\n        const response = await fetch(request)\n\n        if (response.ok === true)\n          return {'obj': await response.json(), 'url': url}\n        else if (response.status !== 404)\n          return {'error': response, 'url': url}\n      } catch (error) {\n        return {'error': error, 'url': url}\n      }\n    }\n    return {'error': `No url returned a valid JSON, urls: ${urls}`}\n  }\n  /*\n   * Return alphanumeric sequence. Can be us used for shortcuts.\n   */\n  static get_alphanumeric () {\n    const numbers = [...Array(9).keys(), -1].map(n => (n + 1).toString())\n    const alphabet = [...Array(26).keys()].map(n => String.fromCharCode(97 + n))\n    return numbers.concat(alphabet)\n  }\n  /*\n   * Lazy method to await condition,\n   * useful for:\n   *   await waitUntil(() => this.parent.state.metadata !== undefined)\n   * When testing parts of extra.js temporally under app.js\n   */\n  static waitUntil = (condition, checkInterval=100) => {\n    return new Promise(resolve => {\n      let interval = setInterval(() => {\n        if (!condition()) return;\n        clearInterval(interval);\n        resolve();\n      }, checkInterval)\n    })\n  }\n  static reducedMotion = (force = false) => {\n    return force || window.matchMedia(`(prefers-reduced-motion: reduce)`).matches == true\n  }\n  /**\n   * Computes the longest common subsequence for two string arrays.\n   * Returns a object with added, modified and deleted.\n   */\n  static LCS = (a, b) => {\n    const m = a.length, n = b.length;\n    /* LCS table */\n    const dp = Array.from({ length: m + 1 }, () => Array(n + 1).fill(0));\n\n    for (let i = m - 1; i >= 0; i--)\n      for (let j = n - 1; j >= 0; j--)\n        dp[i][j] = a[i] === b[j]\n          ? dp[i + 1][j + 1] + 1\n          : Math.max(dp[i + 1][j], dp[i][j + 1]);\n\n    let i = 0, j = 0, added = [], deleted = [];\n    while (i < m && j < n) {\n      if (a[i] === b[j]) { i++; j++; }\n      else if (dp[i + 1][j] >= dp[i][j + 1]) { deleted.push(j); i++; }\n      else { added.push(j); j++; }\n    }\n    while (i++ < m) deleted.push(j);\n    while (j++ < n) added.push(j - 1);\n\n    // merge same-position add+delete â†’ modified\n    const A = new Set(added), D = new Set(deleted), modified = [];\n    for (const k of A) if (D.has(k)) {\n      modified.push(k);\n      A.delete(k);\n      D.delete(k);\n    }\n\n    return { added: [...A], deleted: [...D], modified };\n  }\n}\n","\"use strict\";\nimport {DOM} from './dom.js'\nimport {Toolbox} from './toolbox.js'\n\n/**\n * Updates dynamic links, banners with content from metadata.json.\n */\nexport class Links {\n  constructor (app) {\n    this.$ = {}\n\n    this.$.show_repotoc = document.querySelector('#input-show-repotoc')\n    this.$.show_repotoc.onchange = (ev) => { this.renew_index(ev) }\n    this.set_doms()\n    this.parent = app\n    if (typeof this.parent.fetch === 'object')\n      this.parent.fetch.then(this.construct.bind(this))\n    else\n      this.construct()\n  }\n  construct() {\n    let m = this.parent.state.metadata\n    if ('repotoc' in m)\n      this.update_repotoc(m['repotoc'])\n    if ('banner' in m)\n      this.update_banner(m['banner'])\n  }\n  set_doms () {\n    let $ = this.$\n\n    $.repotocTreeOverlay = document.querySelector('.repotoc-tree.overlay')\n    $.repotocTreeSidebar = document.querySelector('.sphinxsidebar .repotoc-tree')\n    $.banner = DOM.new('div', {\n      className: 'banner'\n    })\n    document.querySelector('body').prepend($.banner)\n  }\n  renew_index (ev) {\n    this.$.linksSidebar.forEach((elem) => {\n      elem.tabIndex = ev.target.checked ? 0 : -1\n    })\n    this.$.linksOverlay.forEach((elem) => {\n      elem.tabIndex = ev.target.checked ? 0 : -1\n    })\n  }\n  update_repotoc (obj) {\n    let $ = this.$\n    if (this.parent.state.standalone)\n      return\n\n    let prefix = this.parent.state.subhost === '' || this.parent.state.subhost === undefined ?\n                 this.parent.state.metadata.remote_doc :\n                 this.parent.state.subhost.startsWith('/docs') ? '/docs/' : '/'\n    let home = \"index.html\"\n    this.$.linksOverlay = []\n    this.$.linksSidebar = []\n    let self_link = this.parent.state.offline ?\n                    this.parent.state.content_root :\n                    new URL(this.parent.state.content_root, location.href)\n    for (const [key, value] of Object.entries(obj)) {\n      if (!('name' in value))\n        continue\n\n      let base = key == this.parent.state.repository ?\n                 self_link : `${prefix}${key}/`\n      let entry = DOM.new('a', {\n        'href': `${base}${home}`,\n        'className': this.parent.state.repository === key ? 'current' : '',\n      })\n      let name = DOM.new('div', {\n        'innerText': value['name'],\n        'className': 'title'\n      })\n      let desc = DOM.new('div', {\n        'innerText': value['description'],\n        'className': 'subtitle'\n      })\n      let spacer = DOM.new('div')\n      entry.append(name)\n      entry.append(desc)\n      entry.append(spacer)\n      this.$.linksSidebar.push(entry)\n    }\n\n    this.$.linksSidebar.forEach((elem) => {\n      this.$.linksOverlay.push(elem.cloneNode(true))\n    })\n\n    // remote_alt doesn't have the open-source landing page\n    const _canonical = new URL(app.state.metadata.remote_alt).host === location.host ?\n                       this.parent.state.metadata.remote_doc : prefix\n    const _developer = this.parent.state.metadata.remote_alt\n    let link_landing =  DOM.new('a', {\n      'innerText': 'Open source home',\n      'href': _canonical,\n      'className': 'landing-page home'\n    })\n    let link_developer = DOM.new('a', {\n      'innerText': 'Developer portal',\n      'href': new URL('..', _developer),\n      'target': '_blank',\n      'className': 'landing-page ext-developer'\n    })\n\n    let cards_links = DOM.new('div', {\n      'className': 'cards-links'\n    })\n    cards_links.append(link_landing, link_developer)\n    if ($.repotocTreeOverlay) {\n      DOM.removeChilds($.repotocTreeOverlay)\n      let container = DOM.new('div', {\n        'className': 'container'\n      })\n       let cards = DOM.new('div', {\n      'className': 'cards'\n      })\n      this.$.linksOverlay.forEach((item) => {cards.append(item)})\n      container.append(cards_links)\n      container.append(cards)\n      $.repotocTreeOverlay.append(container)\n    }\n    if ($.repotocTreeSidebar) {\n      let container = DOM.new('div', {\n        'className': 'container'\n      })\n      let cards = DOM.new('div', {\n        'className': 'cards'\n      })\n      DOM.removeChilds($.repotocTreeSidebar)\n      this.$.linksSidebar.forEach((item) => {cards.append(item)})\n      container.append(cards_links.cloneNode(true))\n      container.append(cards)\n      $.repotocTreeSidebar.append(container)\n    }\n\n    let event = new Event('change');\n    this.$.show_repotoc.dispatchEvent(event)\n  }\n  update_banner (obj) {\n    let $ = this.$\n\n    if ('msg' in obj)\n      $.banner.append(DOM.new('span', {\n        'innerText': obj['msg']\n      }))\n\n    if ('a_href' in obj && 'a_text' in obj)\n      $.banner.append(DOM.new('a', {\n        'href': obj['a_href'],\n        'innerText': obj['a_text'],\n        'target': '_blank'\n      }))\n  }\n}\n","\"use strict\";\nimport {DOM} from './dom.js'\nimport {Toolbox} from './toolbox.js'\n\n/**\n * Shows page actions buttons to the right side of the title.\n * The actions are:\n * * An edit page button to open the page source code on the git hosting website.\n * * Resolve stub pages\n */\nexport class PageActions {\n  constructor (app) {\n    this.$ = {}\n\n    this.with_page_source = false\n    this.parent = app\n    if (typeof this.parent.fetch === 'object')\n      this.parent.fetch.then(this.construct.bind(this))\n    else\n      this.construct()\n\n    this.parent.versioned.then(this.handler_stub.bind(this))\n\n    app.page_actions = this\n  }\n\n  page_source_sanity (m, r) {\n    if (!m.hasOwnProperty('source_hostname')) {\n      console.warn(\"edit_source: 'source_hostname' missing from the metadata\", m)\n      return true\n    }\n\n    if (!m['repotoc'].hasOwnProperty(r)) {\n      // The repo may not have been added yet\n      console.warn(`edit_source: repository '${r}' not in the metadata`)\n      return true\n    }\n\n    if (!m['repotoc'][r].hasOwnProperty('pathname')) {\n      console.warn(`edit_source: 'pathname' missing from entry '${r}'`)\n      return true\n    }\n\n    if (!m['repotoc'][r].hasOwnProperty('branch')) {\n      console.warn(`edit_source: 'branch' missing from entry '${r}'`)\n      return true\n    }\n  }\n  /*\n   * Don't show page source button on some pages.\n   */\n  page_source_ignore () {\n    /* Search page */\n    if (document.querySelector(\"#search-documentation\") !== null)\n      return true\n\n    return false\n  }\n  draw_page_source () {\n    this.$.container = DOM.new('div', {\n      'className': 'page-actions'\n    })\n    this.$.edit_button = DOM.new('button', {\n      'className': 'edit-source',\n      'title': 'See and edit this page source'\n    })\n\n    this.$.edit_button.addEventListener('mousedown', (ev) => {\n      ev.preventDefault()\n    })\n    this.$.edit_button.addEventListener('mouseup', (ev) => {\n      if (ev.which !== 1 && ev.which !== 2)\n        return\n      Toolbox.try_include(\n        this.edit_button_tgt_raw,\n        this.$.edit_button.alt_href,\n        true\n      )\n    })\n    this.$.container.append(this.$.edit_button)\n  }\n  preinit_page_source () {\n    let m = this.parent.state.metadata\n    let r = this.parent.state.repository\n\n    if (this.page_source_sanity(m, r))\n      return\n\n    if (this.page_source_ignore())\n      return\n\n    this.draw_page_source()\n    this.with_page_source = true\n  }\n  init_page_source () {\n    if (!this.with_page_source)\n      return\n\n    let doc = DOM.get('.bodywrapper .body-header .breadcrumb')\n    if (doc === null || doc.classList.contains('empty')) {\n      doc =  DOM.get('.bodywrapper .body')\n      doc.insertAdjacentElement('afterbegin', this.$.container)\n    } else {\n      doc.parentElement.insertAdjacentElement('beforeend', this.$.container)\n    }\n\n    let m = this.parent.state.metadata\n    let r = this.parent.state.repository\n\n    let format_tgt = (hostname) => {\n      return hostname.replace('{repository}', r)\n                              .replace('{branch}', m['repotoc'][r]['branch'])\n                              .replace('{pathname}', m['repotoc'][r]['pathname'])\n    }\n\n    let page_source_suffix = () => {\n      let dom = document.querySelector('meta[name=\"page_source_suffix\"]')\n      if (dom === null)\n        return '.rst'\n      return dom.content\n    }\n    let suffix = page_source_suffix()\n\n    let tgt = format_tgt(m.source_hostname)\n    let tgt_raw = format_tgt(m.source_hostname_raw)\n    let path = \"\"\n    if (this.parent.state.offline)\n      path = new URL(\"file://\"+location.pathname).href\n    else\n      path = new URL(location.pathname, location.origin).href\n\n    let base = new URL(this.parent.state.content_root, path).href\n    let pathname = path.substring(base.length)\n\n    if (pathname.endsWith('.html'))\n      pathname = pathname.replace(/\\.html$/i, suffix)\n    else if (pathname.endsWith('/') || pathname === \"\")\n      pathname = pathname.concat(`index${suffix}`)\n    else\n      pathname = pathname.concat(suffix)\n\n    tgt = tgt.concat('/', pathname)\n    tgt_raw = tgt_raw.concat('/', pathname)\n\n    this.$.edit_button.alt_href = tgt\n    this.edit_button_tgt_raw = tgt_raw\n  }\n  deinit_page_source () {\n    if (!this.with_page_source)\n      return\n\n    this.edit_button_tgt_raw = undefined\n  }\n  handler_stub () {\n    if (!this.parent.versioned.tags)\n      return\n    let dom = document.querySelector('meta[name=\"stub\"]')\n    if (!dom || dom.content === '')\n      return\n\n    const start = app.state.path.length > 0 ?\n                  this.parent.versioned.prefix + app.state.path + '/' :\n                  this.parent.versioned.prefix\n\n    if (!location.href.startsWith(start))\n      return\n\n    const pathname = location.href.substring(start.length)\n    let url = new URL(pathname, this.parent.versioned.prefix + dom.content + '/')\n    if (url.href === location.href) {\n      console.warn(`page_actions: stub cadidate '${dom.content}' references itself`)\n      return\n    }\n    let await_ = async () => {\n      if (await Toolbox.try_redirect(url, undefined, false))\n        console.log(`page_actions: stub candidate '${dom.content}' does not exist`)\n    }\n    await_()\n  }\n  construct () {\n    this.preinit_page_source()\n    this.init()\n  }\n  init () {\n    this.init_page_source()\n    this.handler_stub()\n  }\n  deinit () {\n    this.deinit_page_source()\n  }\n}\n","\"use strict\";\nimport {DOM} from './dom.js'\nimport {Toolbox} from './toolbox.js'\n\n/**\n * Fetches the tags.json file and renders a dropdown.\n */\nexport class Versioned {\n  constructor (app) {\n    this.parent = app\n    this.$ = {}\n\n    this.tags\n    this.prefix\n    this.callback = []\n    this.construct()\n\n    app.versioned = this\n  }\n\n  fallback () {\n    let version = this.parent.state.version\n    let char = version.substr(0,1)\n\n    if (version === \"\")\n      return\n\n    console.log(\"versioned: using hard-coded current version\")\n    if (char >= '0' && char <= '9')\n      version = `v${version}`\n\n    this.render({\"\": [version, \"\"]})\n  }\n  construct () {\n    if (this.parent.state.offline) {\n      let path = location.href\n      this.prefix = new URL(app.state.content_root, path).href\n      this.prefix = this.prefix.substring(0, this.prefix.length - 1)\n      this.fallback()\n      return\n    }\n\n    this.prefix = this.parent.state.subhost\n    this.prefix = new URL(this.prefix, location.origin).href\n    if (!this.prefix.endsWith('/'))\n      this.prefix += '/'\n    const response = fetch(\n      new Request(new URL('tags.json', this.prefix))\n    )\n      .then(response => response)\n      .then(response => response.json())\n      .then(obj => this.init_tags(obj))\n      .catch(error => {\n        console.log(\"versioned: no tags.json and no current version\")\n        this.fallback()\n      })\n  }\n  /**\n   * Assert if tags.json is valid\n   */\n  static assert (obj) {\n    let assert_string = (arr) => {\n      return arr.every(item => typeof item === \"string\")\n    }\n\n    if (Array.isArray(obj)) {\n      /* Mode one: simple array of versions */\n      if (!assert_string(obj)) {\n        console.warn(\"versioned: expected array of strings, got \", obj)\n        return true\n      }\n      return \"string-array\"\n    } else if (Object.prototype.toString.call(obj) === '[object Object]') {\n      /* Mode two: elaborated version */\n      for (let key in obj) {\n        if (!Array.isArray(obj[key])) {\n          console.warn(\"versioned: expected array, got \", obj[key])\n          return true\n        } else if (obj[key].length !== 2) {\n          console.warn(`versioned: expected two items, got ${obj[key].length}`, obj[key])\n          return true\n        }\n      }\n      return \"fine-grained\"\n    }\n\n    console.warn(\"versioned: expected object of arrays or array of strings, got \", obj)\n\n    return true\n  }\n  /**\n   * Convert object into strig array.\n   */\n  static object_to_string_array (obj) {\n    let obj_ = []\n\n    for (const key in obj) {\n      obj_.push(key)\n    }\n\n    return obj_\n  }\n  /**\n   * Convert string array of versions into object.\n   */\n  static string_array_to_object (obj) {\n    let obj_ = {}\n\n    obj.forEach((item) => {\n      obj_[item] = [item, \"\"]\n    })\n\n    if (\"\" in obj_)\n      obj_[\"\"] = [\"main\", \"unstable\"]\n\n    for (const key in obj_) {\n      if (!key.startsWith('pull/') && !key.startsWith('staging/')) {\n        obj_[key] = [obj_[key][0], \"latest\"]\n        break\n      }\n    }\n\n    for (const key in obj_) {\n      if (key.startsWith('pull/'))\n        obj_[key] = ['#'+ obj_[key][0].substring(5), \"pull request\"]\n      else if (key.startsWith('staging/'))\n        obj_[key] = [obj_[key][0], \"branch\"]\n    }\n\n    return obj_\n  }\n  get_class_labels (text) {\n    if (text === '')\n      return ''\n    let labels = 'label'\n    if (text === 'pull request')\n      labels += ' pull_request'\n    else if (text === 'unstable')\n      labels += ' unstable'\n    return labels\n  }\n  init_tags (obj) {\n    this.tags = obj\n    this.callback.forEach(cb => cb())\n    this.render(obj)\n  }\n  /**\n   * Create Tag/Version dropdown at the left sidebar.\n   */\n  render (obj) {\n    let version = this.parent.state.version\n    let path = this.parent.state.path\n    let label = ''\n    let mode = Versioned.assert(obj)\n    if (mode === true)\n      return\n    else if (mode == \"string-array\")\n      obj = Versioned.string_array_to_object(obj)\n\n    let toc_tree = DOM.get('.sphinxsidebarwrapper .toc-tree')\n    let nav_bar = DOM.get('header #right .reverse')\n    let body = DOM.get('body')\n\n    let i = Object.keys(obj).length > 10 ? 4 : 2\n    let cols = \" auto\".repeat(i)\n    let container2 = DOM.new('div', {\n      'className': 'version-dropdown-list',\n      'style': `grid-template-columns:${cols}`\n    })\n\n    if (obj.hasOwnProperty(path)) {\n      label = obj[path][1]\n      version = obj[path][0]\n    } else {\n      console.warn(`versioned: current path ${path} is not in the tags.json. Hard-coded meta[name=\"version\"] will be used.`, obj)\n    }\n\n    for (let key in obj) {\n      let page = key.length > 0 ?\n                 this.prefix + key + '/' :\n                 this.prefix\n      page += \"index.html\"\n      let entry = DOM.new('button', {\n        'alt_href': page\n      })\n      entry.addEventListener('mousedown', (ev) => {\n        ev.preventDefault()\n      })\n      entry.addEventListener('mouseup', (ev) => {\n        if (ev.which !== 1 && ev.which !== 2)\n          return\n        const new_tab = ev.which === 2\n\n        const start = app.state.path.length > 0 ?\n                      this.prefix + app.state.path + '/' :\n                      this.prefix\n        if (location.href.startsWith(start)) {\n          const pathname = location.href.substring(start.length)\n          let url = new URL(pathname, entry.dataset['alt_href'])\n          url.hash = location.hash\n          Toolbox.try_redirect(url, entry.dataset['alt_href'], new_tab)\n        } else {\n          if (new_tab)\n            window.open(entry.dataset['alt_href'], '_blank').focus()\n          else\n            location.href = entry.dataset['alt_href']\n        }\n      })\n      let entry_ = DOM.new('div')\n      let label_ = DOM.new('div')\n      entry_.innerText = obj[key][0]\n      let label = DOM.new('span', {\n        'className': this.get_class_labels(obj[key][1])\n      })\n      label.innerText = obj[key][1]\n      label_.append(label)\n      entry.append(entry_)\n      entry.append(label_)\n      container2.append(entry)\n    }\n    if (Object.keys(obj).length <= 1) {\n      container2.classList.add('no-other')\n    }\n    let cancel_dropdown = DOM.new('dev', {\n      'id': 'cancel-area-show-version-dropdown'\n    })\n    body.append(cancel_dropdown)\n    body.append(container2)\n\n    let container = DOM.new('div', {\n      'className': 'version-dropdown',\n      'title': 'Change version'\n    })\n    container.innerText = version\n    let label_ = DOM.new('span', {\n      'className': this.get_class_labels(label)\n    })\n    label_.innerText = label\n    container.append(label_)\n\n    toc_tree.insertAdjacentElement('afterbegin', container)\n    let container3 = container.cloneNode(true)\n\n    container.onclick = (ev) => { this.show(container, true) }\n    container3.onclick = (ev) => { this.show(container3, true) }\n    cancel_dropdown.onclick = (ev) => {this.show(undefined, false) }\n    onresize = (ev) => { this.show(undefined, false) }\n    nav_bar.append(container3)\n\n    this.$.list = container2\n    this.$.cancel= cancel_dropdown\n  }\n  /**\n   * Append callbacks to call after tags.json is loaded.\n   */\n  then (callback) {\n    if (this.parent.state.version)\n      callback()\n    else\n      this.callback.push(callback)\n  }\n  show (dom, show) {\n    if (!show) {\n      this.$.cancel.classList.remove('on')\n      this.$.list.classList.remove('on')\n      return\n    }\n\n    let rect = dom.getBoundingClientRect()\n    let wiw = window.innerWidth\n    this.$.list.style.top = `${rect.top + 2.5*16}px`\n    if ((wiw - rect.right) < rect.left) {\n      this.$.list.style.removeProperty('left')\n      this.$.list.style.right = `${wiw - rect.right}px`\n    } else {\n      this.$.list.style.left = `${rect.left}px`\n      this.$.list.style.removeProperty('right')\n    }\n    this.$.cancel.classList.add('on')\n    this.$.list.classList.add('on')\n  }\n}\n","\"use strict\";\n\nimport {Versioned} from './versioned.js'\nimport {Toolbox} from './toolbox.js'\nimport {DOM} from './dom.js'\n\n/**\n * Simple result scoring code.\n */\nif (typeof Scorer === \"undefined\") {\n  var Scorer = {\n    // Implement the following function to further tweak the score for each result\n    // The function takes a result array [docname, title, anchor, descr, score, filename]\n    // and returns the new score.\n    /*\n    score: result => {\n      const [docname, title, anchor, descr, score, filename, kind] = result\n      return score\n    },\n    */\n\n    // query matches the full name of an object\n    objNameMatch: 11,\n    // or matches in the last dotted part of the object name\n    objPartialMatch: 6,\n    // Additive scores depending on the priority of the object\n    objPrio: {\n      0: 15, // used to be importantResults\n      1: 5, // used to be objectResults\n      2: -5, // used to be unimportantResults\n    },\n    //  Used when the priority is not in the mapping.\n    objPrioDefault: 0,\n\n    // query found in title\n    title: 15,\n    partialTitle: 7,\n    // query found in terms\n    term: 5,\n    partialTerm: 2,\n  };\n}\n\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n */\nconst _escapeRegExp = (string) =>\n  string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n\n/**\n * A fork of Sphinx search tools with multi doc support.\n */\nexport class Search {\n  constructor (app) {\n    this.parent = app\n\n    this.index = {}\n    this.index_state = {}\n    this.key_prefix = {}\n    this.versions_available = {}\n    this.search_page = new URL(`${this.parent.state.content_root}search.html`, location).pathname\n\n    let $ = this.$ = {}\n    $.keyCheckbox = {}\n    $.keyVersion = {}\n    $.searchUL = {}\n    $.searchLI = {}\n    $.body = new DOM(DOM.get('body'))\n\n    $.searchAreaBg = new DOM(DOM.get('.search-area-bg')) /* polyfill < v0.4.8 */\n    if ($.searchAreaBg.$ === null) {\n      $.searchAreaBg = new DOM('div', {\n        className:'search-area-bg'\n      })\n      $.body.append([$.searchAreaBg])\n    }\n    $.searchAreaBg.onclick(this, this.cancel_search)\n\n    $.searchArea = new DOM(DOM.get('.search-area'))\n    $.searchForm = new DOM(DOM.get('form', $.searchArea))\n    if (this.parent.state.offline) {\n      $.searchForm.$.action = this.search_page\n      $.searchForm.$.method = \"get\"\n    } else\n      $.searchForm.onevent(\"submit\", this, (e) => {e.preventDefault()})\n    $.searchFormButton = new DOM(DOM.get('button', $.searchForm))\n      .onclick(this, this.cancel_search)\n    $.searchInput = new DOM(DOM.get('input', $.searchForm))\n    $.searchTags = new DOM('span', {\n      className: 'search-filter',\n      tabIndex: '-1',\n    }).append([\n      new DOM('div', {\n        className: 'title',\n        innerText: \"Search on\",\n      }).append([\n        new DOM('code', {\n          className: \"literal\",\n          innerText: \"Ctrl +\",\n        }),\n      ])\n    ]);\n    $.searchResults = new DOM('ul', {\n      className: 'search-results',\n      tabIndex: '-1',\n    });\n    $.searchContainer = new DOM('span', {\n      className: 'search-container'\n    }).onclick(this, (e) => {\n      if (e.target === $.searchContainer.$)\n        this.cancel_search()\n    });\n\n    if (!this.parent.state.offline)\n      this.$.searchContainer.append(this.$.searchTags)\n    this.$.searchContainer.append(this.$.searchResults)\n    this.$.searchArea.append([this.$.searchContainer])\n    $.searchForm.$['action'] = DOM.get('link[rel=\"search\"]').href\n\n    $.searchButton = new DOM(DOM.get('header button#search')) /* polyfill < v0.4.8 */\n    if ($.searchButton.$ === null) {\n\t    $.searchButton = new DOM('button', {\n        id:'search',\n        className:'icon',\n        title:'Search (/)'\n      })\n      this.parent.navigation.$.rightHeader.append([$.searchButton])\n    }\n    $.searchButton.onclick(this, () => {\n      $.searchArea.classList.add('on')\n      $.searchAreaBg.classList.add('on')\n      $.searchInput.focus()\n      $.searchInput.$.select()\n      this.$.body.classList.add('overflow-hidden')\n      this.set_default()\n    })\n\n    if (this.parent.state.offline)\n      this.construct_offline()\n    else if (typeof this.parent.fetch === 'object')\n      this.parent.fetch.then(this.construct.bind(this))\n    else\n      this.construct()\n\n    app.search = this\n  }\n  /**\n   * Default split_query function. Can be overridden in ``sphinx.search`` with a\n   * custom function per language (TODO look for split_query and allow injection).\n   *\n   * The regular expression works by splitting the string on consecutive characters\n   * that are not Unicode letters, numbers, underscores, or emoji characters.\n   * This is the same as ``\\W+`` in Python, preserving the surrogate pair area.\n   */\n  split_query (query) {\n     return query\n        .split(/[^\\p{Letter}\\p{Number}_\\p{Emoji_Presentation}]+/gu)\n        .filter(term => term)\n  }\n  cancel_search () {\n    this.$.searchArea.classList.remove('on')\n    this.$.searchAreaBg.classList.remove('on')\n    this.$.body.classList.remove('overflow-hidden')\n    let url = new URL(location)\n    url.searchParams.delete('q')\n    url.searchParams.delete('r')\n    history.replaceState({}, null, url);\n  }\n  /*\n   * Helper function used by query() to order search results.\n   * Each input is an array of [docname, title, anchor, descr, score, filename, kind].\n   * Order the results by score (in opposite order of appearance, since the\n   * `_displayNextItem` function uses pop() to retrieve items) and then alphabetically.\n   */\n   _orderResultsByScoreThenName = (a, b) => {\n    const leftScore = a[4];\n    const rightScore = b[4];\n    if (leftScore === rightScore) {\n      // same score: sort alphabetically\n      const leftTitle = a[1].toLowerCase();\n      const rightTitle = b[1].toLowerCase();\n      if (leftTitle === rightTitle) return 0;\n      return leftTitle > rightTitle ? -1 : 1; // inverted is intentional\n    }\n    return leftScore > rightScore ? 1 : -1;\n  };\n  async get_searchindex(key, not_sub_hosted, version=null) {\n    const prefix = not_sub_hosted && key === \"local\" ?\n                   location.origin : `${this.parent.state.metadata.remote_doc}${key}`\n    let guess_default = (arr) => {\n      let path\n      if (arr.includes(\"\"))\n        path = \"\"\n      else if(arr.includes(\"main\"))\n        path = \"main\"\n      else if (arr.some(item => item.includes(\"adi_meta\")))\n        path = `${arr.find(item => item.includes(\"adi_meta\"))}`\n      else\n        path = `${arr.at(0)}/`\n      return path\n    }\n    let process = (obj) => {\n      let path = \"\"\n      if (!('error' in obj)) {\n        let mode = Versioned.assert(obj['obj'])\n        if (mode === true)\n          return prefix\n\n        if (mode == \"fine-grained\")\n          this.versions_available[key] = obj['obj']\n        else\n          this.versions_available[key] = Versioned.string_array_to_object(obj['obj'])\n\n        if (mode == \"fine-grained\")\n          obj['obj'] = Versioned.object_to_string_array(obj['obj'])\n        let arr = obj['obj']\n\n        if (key in this.versions_available) {\n          if (version in this.versions_available[key]) {\n            path = version\n            this.$.keyVersion[key].innerText = this.versions_available[key][version][0]\n          } else {\n            path = guess_default(arr)\n            this.index_state[key].version = null\n            this.$.keyVersion[key].innerText = this.versions_available[key][path][0]\n          }\n        } else {\n          path = guess_default(arr)\n          this.index_state[key].version = null\n          this.$.keyVersion[key].innerText = \"-\"\n        }\n      } else {\n          this.index_state[key].version = null\n          this.$.keyVersion[key].innerText = \"-\"\n      }\n      return path.length > 0 ? `${prefix}/${path}/` : `${prefix}/`\n    }\n\n    return await Toolbox.fetch_each(`${prefix}/tags.json`).then((obj) => {\n      this.key_prefix[key] = process(obj)\n\n      return `${this.key_prefix[key]}searchindex.js`\n    })\n  }\n  check_toc (key, ev) {\n    if (ev.target.checked) {\n      if (this.index_state[key].requested === false) {\n        let not_sub_hosted = this.parent.state.subhost === '' || this.parent.state.subhost === undefined\n        const selected_version = this.index_state[key].version\n        this.get_searchindex(key, not_sub_hosted, selected_version)\n          .then((url) => {\n            let search_ = new URL(url)\n            this.load_index(search_.href, key)\n            this.index_state[key].requested = true\n            this.$.keyCheckbox[key].classList.add('requested')\n            this.$.keyCheckbox[key].classList.remove('failed')\n            this.renew_search()\n          })\n        return\n      } else {\n        this.query(this.$.searchInput.$.value)\n      }\n    } else {\n      this.get_tags_and_update_url(this.$.searchInput.$.value)\n    }\n    this.renew_search()\n  }\n  renew_search () {\n    let searchUL_ = []\n    for (const [key, value] of Object.entries(this.index_state)) {\n      if (this.$.keyCheckbox[key].$.checked === true && this.index_state[key].ready === true) {\n        if (!(key in this.$.searchUL)) {\n          this.$.searchUL[key] = new DOM('ul')\n          this.$.searchLI[key] = new DOM('li').append([\n            new DOM('div', {\n              innerText: this.$.keyCheckbox[key].$.name\n            }),\n            this.$.searchUL[key]\n          ])\n          searchUL_.push(this.$.searchLI[key])\n        }\n        this.$.searchLI[key].classList.add('on')\n      } else {\n        if (key in this.$.searchUL)\n          this.$.searchLI[key].classList.remove('on')\n      }\n    }\n    searchUL_.forEach((item) => {\n      this.$.searchResults.$.insertAdjacentElement('afterbegin', item.$)\n    })\n  }\n  set_default () {\n    /* Return if filter initialized */\n    for (const [key, value] of Object.entries(this.$.keyCheckbox)) {\n      if (value.$.checked)\n        return\n    }\n    /**\n     * When writing the docs, it is a better user experience to be able to search\n     * the local built docs.\n     */\n    let key = this.parent.state.subhost === '' || this.parent.state.subhost === undefined || this.parent.state.standalone ?\n              'local' : this.parent.state.repository\n    if (this.parent.state.version !== undefined)\n        this.index_state[key].version = this.parent.state.path\n    let event = new Event('change');\n    if (!(key in this.$.keyCheckbox))\n      return\n    this.$.keyCheckbox[key].$.checked = true\n    this.$.keyCheckbox[key].$.dispatchEvent(event)\n  }\n  /* Search shortcut */\n  search_shortcut (e) {\n    if (((e.code === 'IntlRo' || e.code === 'Slash') ||\n         (e.code === 'KeyK' && (e.ctrlKey || e.altKey)))\n        && !this.$.searchArea.classList.contains('on')) {\n      this.$.searchArea.classList.add('on')\n      this.$.searchAreaBg.classList.add('on')\n      this.$.body.classList.add('overflow-hidden')\n      this.$.searchInput.focus()\n      this.$.searchInput.$.select()\n      this.set_default()\n    } else if (e.code === 'Escape') {\n      if (this.$.searchArea.classList.contains('on')) {\n        this.cancel_search()\n      }\n    }\n  }\n  /**\n   * Load index of search sources.\n   */\n  load_index = (url, key) => {\n    let onfailure = (error) => {\n      console.warn(error)\n      this.index_state[key].requested = false\n      this.$.keyCheckbox[key].classList.remove('requested')\n      this.$.keyCheckbox[key].classList.add('failed')\n      this.$.keyCheckbox[key].$.checked = false\n    }\n    const request = new Request(url)\n    fetch (request)\n      .then((response) => response.text())\n      .then((text) => {\n        try {\n          if (text.substring(0, 16) != \"Search.setIndex(\" || text.substring(text.length-1) != \")\")\n            throw new Error(`Search index of key '${key}' is impropetly formatted`)\n          this.index[key] = JSON.parse(text.substring(16, text.length-1))\n          this.index_state[key].ready = true\n          this.$.keyCheckbox[key].classList.remove('requested')\n          this.$.keyCheckbox[key].classList.add('ready')\n          this.query(this.$.searchInput.$.value)\n        } catch (error) {\n          onfailure(error)\n        }\n      })\n      .catch(onfailure)\n  }\n  /**\n   * search for object names\n   */\n  perform_object_search (object, objectTerms, searchOn) {\n    const filenames = this.index[searchOn].filenames;\n    const docNames = this.index[searchOn].docnames;\n    const objects = this.index[searchOn].objects;\n    const objNames = this.index[searchOn].objnames;\n    const titles = this.index[searchOn].titles;\n\n    const results = [];\n\n    const objectSearchCallback = (prefix, match) => {\n      const name = match[4]\n      const fullname = (prefix ? prefix + \".\" : \"\") + name;\n      const fullnameLower = fullname.toLowerCase();\n      if (fullnameLower.indexOf(object) < 0) return;\n\n      let score = 0;\n      const parts = fullnameLower.split(\".\");\n\n      // check for different match types: exact matches of full name or\n      // \"last name\" (i.e. last dotted part)\n      if (fullnameLower === object || parts.slice(-1)[0] === object)\n        score += Scorer.objNameMatch;\n      else if (parts.slice(-1)[0].indexOf(object) > -1)\n        score += Scorer.objPartialMatch; // matches in last name\n\n      const objName = objNames[match[1]][2];\n      const title = titles[match[0]];\n\n      // If more than one term searched for, we require other words to be\n      // found in the name/title/description\n      const otherTerms = new Set(objectTerms);\n      otherTerms.delete(object);\n      if (otherTerms.size > 0) {\n        const haystack = `${prefix} ${name} ${objName} ${title}`.toLowerCase();\n        if (\n          [...otherTerms].some((otherTerm) => haystack.indexOf(otherTerm) < 0)\n        )\n          return;\n      }\n\n      let anchor = match[3];\n      if (anchor === \"\") anchor = fullname;\n      else if (anchor === \"-\") anchor = objNames[match[1]][1] + \"-\" + fullname;\n\n      const descr = objName + \", in \" + title;\n\n      // add custom score for some objects according to scorer\n      if (Scorer.objPrio.hasOwnProperty(match[2]))\n        score += Scorer.objPrio[match[2]];\n      else score += Scorer.objPrioDefault;\n\n      results.push([\n        docNames[match[0]],\n        fullname,\n        \"#\" + anchor,\n        descr,\n        score,\n        filenames[match[0]],\n        \"object\",\n      ]);\n    };\n    Object.keys(objects).forEach((prefix) =>\n      objects[prefix].forEach((array) =>\n        objectSearchCallback(prefix, array)\n      )\n    );\n    return results;\n  }\n  /**\n   * search for full-text terms in the index\n   */\n  perform_terms_search (searchTerms, excludedTerms, searchOn) {\n    // prepare search\n    const terms = this.index[searchOn].terms;\n    const titleTerms = this.index[searchOn].titleterms;\n    const filenames = this.index[searchOn].filenames;\n    const docNames = this.index[searchOn].docnames;\n    const titles = this.index[searchOn].titles;\n\n    // Collect multiple result groups to be sorted separately and then ordered.\n    // Each is an array of [docname, title, anchor, descr, score, filename, kind].\n    const normalResults = []\n    const nonMainIndexResults = []\n\n    const scoreMap = new Map();\n    const fileMap = new Map();\n\n    // perform the search on the required terms\n    searchTerms.forEach((word) => {\n      const files = [];\n      // find documents, if any, containing the query word in their text/title term indices\n      // use Object.hasOwnProperty to avoid mismatching against prototype properties\n      const arr = [\n        { files: terms.hasOwnProperty(word) ? terms[word] : undefined, score: Scorer.term },\n        { files: titleTerms.hasOwnProperty(word) ? titleTerms[word] : undefined, score: Scorer.title },\n      ];\n      // add support for partial matches\n      if (word.length > 2) {\n        const escapedWord = _escapeRegExp(word);\n        if (!terms.hasOwnProperty(word)) {\n          Object.keys(terms).forEach((term) => {\n            if (term.match(escapedWord))\n              arr.push({ files: terms[term], score: Scorer.partialTerm });\n          });\n        }\n        if (!titleTerms.hasOwnProperty(word)) {\n          Object.keys(titleTerms).forEach((term) => {\n            if (term.match(escapedWord))\n              arr.push({ files: titleTerms[term], score: Scorer.partialTitle });\n          });\n        }\n      }\n\n      // no match but word was a required one\n      if (arr.every((record) => record.files === undefined)) return;\n\n      // found search word in contents\n      arr.forEach((record) => {\n        if (record.files === undefined) return;\n\n        let recordFiles = record.files;\n        if (recordFiles.length === undefined) recordFiles = [recordFiles];\n        files.push(...recordFiles);\n\n        // set score for the word in each file\n        recordFiles.forEach((file) => {\n          if (!scoreMap.has(file)) scoreMap.set(file, new Map());\n          const fileScores = scoreMap.get(file);\n          fileScores.set(word, record.score);\n        });\n      });\n\n      // create the mapping\n      files.forEach((file) => {\n        if (!fileMap.has(file)) fileMap.set(file, [word]);\n        else if (fileMap.get(file).indexOf(word) === -1) fileMap.get(file).push(word);\n      });\n    });\n\n    // now check if the files don't contain excluded terms\n    const results = [];\n    for (const [file, wordList] of fileMap) {\n      // check if all requirements are matched\n\n      // as search terms with length < 3 are discarded\n      const filteredTermCount = [...searchTerms].filter(\n        (term) => term.length > 2\n      ).length;\n      if (\n        wordList.length !== searchTerms.size &&\n        wordList.length !== filteredTermCount\n      )\n        continue;\n\n      // ensure that none of the excluded terms is in the search result\n      if (\n        [...excludedTerms].some(\n          (term) =>\n            terms[term] === file ||\n            titleTerms[term] === file ||\n            (terms[term] || []).includes(file) ||\n            (titleTerms[term] || []).includes(file)\n        )\n      )\n        break;\n\n      // select one (max) score for the file.\n      const score = Math.max(...wordList.map((w) => scoreMap.get(file).get(w)));\n      // add result to the result list\n      results.push([\n        docNames[file],\n        titles[file],\n        \"\",\n        null,\n        score,\n        filenames[file],\n        \"text\",\n      ]);\n    }\n    return results;\n  }\n  /**\n   * Execute search (requires search index to be loaded)\n   */\n  perform_search (query, searchTerms, excludedTerms, highlightTerms, objectTerms, searchOn) {\n    const filenames = this.index[searchOn].filenames\n    const docNames = this.index[searchOn].docnames\n    const titles = this.index[searchOn].titles\n    const allTitles = this.index[searchOn].alltitles\n    const indexEntries = this.index[searchOn].indexentries\n\n    // Collect multiple result groups to be sorted separately and then ordered.\n    // Each is an array of [docname, title, anchor, descr, score, filename, kind].\n    const normalResults = []\n    const nonMainIndexResults = []\n\n    //_removeChildren(document.getElementById(\"search-progress\"));\n\n    const queryLower = query.toLowerCase().trim();\n    for (const [title, foundTitles] of Object.entries(allTitles)) {\n      if (title.toLowerCase().trim().includes(queryLower) && (queryLower.length >= title.length/2)) {\n        for (const [file, id] of foundTitles) {\n          const score = Math.round(Scorer.title * queryLower.length / title.length)\n          const boost = titles[file] === title ? 1 : 0  // add a boost for document titles\n          normalResults.push([\n            docNames[file],\n            titles[file] !== title ? `${titles[file]} > ${title}` : title,\n            id !== null ? \"#\" + id : \"\",\n            null,\n            score + boost,\n            filenames[file],\n            \"title\",\n          ]);\n        }\n      }\n    }\n\n    // search for explicit entries in index directives\n    for (const [entry, foundEntries] of Object.entries(indexEntries)) {\n      if (entry.includes(queryLower) && (queryLower.length >= entry.length/2)) {\n        for (const [file, id, isMain] of foundEntries) {\n          const score = Math.round(100 * queryLower.length / entry.length)\n          const result = [\n            docNames[file],\n            titles[file],\n            id ? \"#\" + id : \"\",\n            null,\n            score,\n            filenames[file],\n            \"index\",\n          ];\n          if (isMain) {\n            normalResults.push(result);\n          } else {\n            nonMainIndexResults.push(result);\n          }\n        }\n      }\n    }\n\n    // lookup as object\n    objectTerms.forEach((term) =>\n      normalResults.push(...this.perform_object_search(term, objectTerms, searchOn))\n    );\n\n    // lookup as search terms in fulltext\n    normalResults.push(...this.perform_terms_search(searchTerms, excludedTerms, searchOn))\n\n    // let the scorer override scores with a custom scoring function\n    if (Scorer.score) {\n      normalResults.forEach((item) => (item[4] = Scorer.score(item)))\n      nonMainIndexResults.forEach((item) => (item[4] = Scorer.score(item)))\n    }\n\n    // Sort each group of results by score and then alphabetically by name.\n    normalResults.sort(this._orderResultsByScoreThenName)\n    nonMainIndexResults.sort(this._orderResultsByScoreThenName)\n\n    // Combine the result groups in (reverse) order.\n    // Non-main index entries are typically arbitrary cross-references,\n    // so display them after other results.\n    let results = [...nonMainIndexResults, ...normalResults]\n\n    // remove duplicate search results\n    // note the reversing of results, so that in the case of duplicates, the highest-scoring entry is kept\n    let seen = new Set();\n    results = results.reverse().reduce((acc, result) => {\n      let resultStr = result.slice(0, 4).concat([result[5]]).map(v => String(v)).join(',')\n      if (!seen.has(resultStr)) {\n        acc.push(result);\n        seen.add(resultStr);\n      }\n      return acc;\n    }, []);\n\n    return results.reverse();\n  }\n  get_tags_and_update_url (query) {\n    const enabledTags = []\n    for (const [key, value] of Object.entries(this.index_state)) {\n      if (this.$.keyCheckbox[key].$.checked === true && this.index[key] !== undefined) {\n        if (value['version'] === null)\n          enabledTags.push(key)\n        else\n          enabledTags.push(`${key}@${value['version']}`)\n      }\n    }\n\n    let url = new URL(location)\n    if (query.length > 0) {\n      url.searchParams.set('q', query)\n      url.searchParams.set('r', enabledTags)\n    } else {\n      url.searchParams.delete('q')\n      url.searchParams.delete('r')\n    }\n    history.replaceState({}, null, url);\n    return enabledTags\n  }\n  html_to_text (text, anchor) {\n    const htmlElement = new DOMParser().parseFromString(text, 'text/html');\n    for (const removalQuery of [\".headerlink\", \"script\", \"style\"]) {\n      htmlElement.querySelectorAll(removalQuery).forEach((el) => { el.remove() });\n    }\n    if (anchor) {\n      const anchorContent = htmlElement.querySelector(`[role=\"main\"] ${anchor}`);\n      if (anchorContent)\n        return anchorContent.textContent;\n\n      console.warn(`Anchored content block '[role=main] ${anchor}' not found.`);\n    }\n\n    // if anchor not specified or not found, fall back to main content\n    const docContent = htmlElement.querySelector('[role=\"main\"]');\n    if (docContent)\n      return docContent.textContent;\n\n    console.warn(`Anchored content block '[role=main] ${anchor}' not found.`);\n    return \"\";\n  }\n  get_summary (data, keywords, anchor, p_) {\n    const text = this.html_to_text(data, anchor);\n    if (text === \"\")\n      return\n\n    const textLower = text.toLowerCase();\n    const actualStartPosition = [...keywords]\n      .map((k) => textLower.indexOf(k.toLowerCase()))\n      .filter((i) => i > -1)\n      .slice(-1)[0]\n    const startWithContext = Math.max(actualStartPosition - 120, 0)\n\n    const top = startWithContext === 0 ? \"\" : \"...\"\n    const tail = startWithContext + 240 < text.length ? \"...\" : \"\"\n\n    p_.$.textContent = top + text.substr(startWithContext, 240).trim() + tail\n    p_.$.classList.remove('loading')\n  }\n  query (query) {\n    /* language data not loaded yet */\n    if (typeof Stemmer === \"undefined\")\n      return\n\n    const [searchQuery, searchTerms, excludedTerms, highlightTerms, objectTerms] = this.parse_query(query)\n    this.renew_search()\n    let enabledTags = this.get_tags_and_update_url(query)\n    enabledTags.forEach((key) => {\n      key = key.split('@')\n      const results = this.perform_search(searchQuery, searchTerms, excludedTerms, highlightTerms, objectTerms, key[0])\n      while (this.$.searchUL[key[0]].$.firstElementChild) {\n        this.$.searchUL[key[0]].$.removeChild(this.$.searchUL[key[0]].$.lastChild)\n      }\n\n      let searchResults_ = []\n      results.reverse()\n      results.forEach((item) => {\n        const [docName, title, anchor, descr, score, _filename, kind] = item;\n        let href_ = `${this.key_prefix[key[0]]}${docName}.html${anchor}`\n        let li_ = new DOM('li').append(\n          new DOM('a', {\n            href: href_,\n            innerText: title,\n          })\n          //highlightTerms.forEach((term) => _highlightText(listItem, term, \"highlighted\"))\n        )\n        if (descr) {\n          li_.append(\n            new DOM('span', {\n              innerText: `(${descr})`\n            }\n          ))\n        } else {\n          let p_ = new DOM('p', {\n            className: 'context',\n          })\n          // Make cached snappier\n          // To fully remove flickering it would be required to reuse the previous search DOMs.\n          const loading_ = setTimeout(() => {\n            p_.classList.add('loading')\n          }, 50)\n          li_.append(p_)\n          fetch(href_)\n            .then((response) => response.text())\n            .then((data) => {\n              if (data)\n                this.get_summary(data, searchTerms, anchor, p_)\n                //highlightTerms.forEach((term) => _highlightText(listItem, term, \"highlighted\"))\n            })\n            .finally(() => {\n              clearTimeout(loading_)\n            })\n        }\n        searchResults_.push(li_)\n      })\n      this.$.searchUL[key[0]].append(searchResults_)\n      if (results.length === 0)\n        this.$.searchLI[key[0]].classList.add('empty')\n      else\n        this.$.searchLI[key[0]].classList.remove('empty')\n    })\n\n  }\n  parse_query (query) {\n    // stem the search terms and add them to the correct list\n    const stemmer = new Stemmer();\n    const searchTerms = new Set();\n    const excludedTerms = new Set();\n    const highlightTerms = new Set();\n    const objectTerms = new Set(this.split_query(query.toLowerCase().trim()));\n    this.split_query(query.trim()).forEach((queryTerm) => {\n      const queryTermLower = queryTerm.toLowerCase();\n\n      // polyfill: starting from sphinx#13575, it is a Set\n      if (stopwords instanceof Set) {\n        // stopwords set is from language_data.js\n        if (stopwords.has(queryTermLower) || queryTerm.match(/^\\d+$/))\n          return;\n      } else {\n        // stopwords array is from language_data.js\n        if (\n         stopwords.indexOf(queryTermLower) !== -1 ||\n         queryTerm.match(/^\\d+$/)\n        )\n          return;\n      }\n\n      // stem the word\n      let word = stemmer.stemWord(queryTermLower);\n      // select the correct list\n      if (word[0] === \"-\") excludedTerms.add(word.substr(1));\n      else {\n        searchTerms.add(word);\n        highlightTerms.add(queryTermLower);\n      }\n    });\n\n    localStorage.setItem(\"sphinx_highlight_terms\", [...highlightTerms].join(\" \"))\n\n    return [query, searchTerms, excludedTerms, highlightTerms, objectTerms];\n  }\n  select_filter_tags (e) {\n    if (!this.$.searchArea.classList.contains('on') ||\n        !this.$.searchTags.classList.contains('on'))\n      return\n    Object.values(this.$.keyCheckbox).forEach(checkbox => {\n      if (checkbox.$.dataset['shortcut'] == e.key) {\n        e.preventDefault()\n        let event = new Event('change');\n        checkbox.$.checked = !checkbox.$.checked\n        checkbox.$.dispatchEvent(event)\n      }\n    })\n  }\n  keyup (e) {\n    switch (e.code) {\n      case 'IntlRo':\n      case 'Slash':\n      case 'Escape':\n      case 'KeyK':\n        this.search_shortcut(e)\n        break\n      case 'ControlLeft':\n      case 'ControlRight':\n        this.$.searchTags.classList.remove('on')\n        break\n    }\n  }\n  keydown (e) {\n    switch (e.code) {\n      case 'IntlRo':\n      case 'Slash':\n        e.preventDefault()\n        break\n      case 'KeyK':\n        if (e.ctrlKey && e.altKey)\n          e.preventDefault()\n        break\n      case 'ControlLeft':\n      case 'ControlRight':\n        this.$.searchTags.classList.add('on')\n        break\n    }\n    this.select_filter_tags(e)\n  }\n  focus (e) {\n    // Resolve keyDown not captured due to browser Ctrl shortcut\n    if (this.$.searchTags.classList.contains('on'))\n        this.$.searchTags.classList.remove('on')\n  }\n  include_item (key, name, shortcut) {\n    this.index_state[key] = {\n      ready: false,\n      requested: false\n    }\n\n    let input_ = new DOM('input', {\n      id: `tag-${key}`,\n      type: 'checkbox',\n      name: name,\n      shortcut: shortcut,\n    }).onchange(this, this.check_toc, [key])\n\n    let version_button = new DOM('button', {\n      className: 'version-filter',\n      title: 'Select version to search',\n      innerText: '...'\n    })\n    version_button.onclick(this, (key, e) => {\n      this.show_version_dropdown(key, version_button)\n    }, [key])\n\n    this.$.searchTags.append([\n      new DOM('span', {\n        className: 'search-entry'\n      }).append([\n        input_,\n        new DOM('label', {\n          htmlFor: `tag-${key}`,\n        }).append([\n          new DOM('span', {\n            innerText: shortcut,\n            className: 'checkbox',\n          }),\n          new DOM('span', {\n            innerText: name,\n          }),\n        ]),\n        version_button\n      ])\n    ])\n    this.$.keyVersion[key] = version_button\n    this.$.keyCheckbox[key] = input_\n  }\n  get_class_labels (text) {\n    if (text === '')\n      return ''\n    let labels = 'label'\n    if (text === 'pull request')\n      labels += ' pull_request'\n    else if (text === 'unstable')\n      labels += ' unstable'\n    return labels\n  }\n  /**\n   * Show version dropdown for a specific search entry\n   */\n  show_version_dropdown(key, version_button, ev) {\n    let obj = this.versions_available[key]\n    if (!obj) {\n      console.warn(`No versions available for key: ${key}`)\n      obj = {}\n    }\n\n    this.clean_versions_dropdown()\n\n    let i = Object.keys(obj).length > 10 ? 4 : 2\n    let cols = \" auto\".repeat(i)\n    this.$.list.style = `grid-template-columns:${cols}`\n    if (Object.keys(obj).length <= 1)\n      this.$.list.classList.add('no-other')\n    else\n      this.$.list.classList.remove('no-other')\n\n    for (let version in obj) {\n      let entry = DOM.new('button', {\n        'version': version\n      })\n      entry.addEventListener('mousedown', (ev) => {\n        ev.preventDefault()\n      })\n      entry.addEventListener('mouseup', (ev) => {\n        if (ev.which !== 1 && ev.which !== 2)\n          return\n\n        ev.preventDefault()\n        this.select_version(key, version)\n      })\n      let entry_ = DOM.new('div')\n      let label_ = DOM.new('div')\n      entry_.innerText = obj[version][0]\n      let label = DOM.new('span', {\n        'className': this.get_class_labels(obj[version][1])\n      })\n      label.innerText = obj[version][1]\n      label_.append(label)\n      entry.append(entry_)\n      entry.append(label_)\n      this.$.list.append(entry)\n    }\n\n    this.show(version_button.$, true)\n  }\n  /**\n   * Deinit version in dropdowns\n   */\n  clean_versions_dropdown() {\n    while (this.$.list.firstElementChild) {\n      this.$.list.removeChild(this.$.list.lastChild)\n    }\n  }\n  /**\n   * Select a version for a specific search entry\n   */\n  async select_version(key, version) {\n    this.index_state[key].version = version\n\n    const version_label = version === \"\" ? \"main\" : this.versions_available[key][version][0]\n\n    if (this.$.keyCheckbox[key].$.checked && this.index_state[key].ready) {\n      this.index_state[key].ready = false\n      this.index_state[key].requested = false\n      this.$.keyCheckbox[key].classList.remove('ready')\n      this.$.keyCheckbox[key].classList.add('requested')\n\n      let not_sub_hosted = this.parent.state.subhost === '' || this.parent.state.subhost === undefined\n      this.get_searchindex(key, not_sub_hosted, version)\n        .then((url) => {\n          let search_ = new URL(url)\n          this.load_index(search_.href, key)\n          this.index_state[key].requested = true\n          this.$.keyCheckbox[key].classList.remove('failed')\n          this.renew_search()\n        })\n        .catch((error) => {\n          console.warn(`Failed to load search index for ${key} version ${version}:`, error)\n          this.index_state[key].requested = false\n          this.$.keyCheckbox[key].classList.remove('requested')\n          this.$.keyCheckbox[key].classList.add('failed')\n        })\n    }\n\n    this.show(undefined, false)\n  }\n  show (dom, show) {\n    if (!show) {\n      this.$.cancel.classList.remove('on')\n      this.$.list.classList.remove('on')\n      return\n    }\n\n    let rect = dom.getBoundingClientRect()\n    let wiw = window.innerWidth\n    let wih = window.innerHeight\n    if ((wih - rect.bottom) < rect.top) {\n      this.$.list.style.removeProperty('top')\n      this.$.list.style.bottom = `${wih - rect.bottom + 1.5*16}px`\n    } else {\n      this.$.list.style.removeProperty('bottom')\n      this.$.list.style.top = `${rect.top + 1.5*16}px`\n    }\n    if ((wiw - rect.right) < rect.left) {\n      this.$.list.style.removeProperty('left')\n      this.$.list.style.right = `${wiw - rect.right}px`\n    } else {\n      this.$.list.style.left = `${rect.left}px`\n      this.$.list.style.removeProperty('right')\n    }\n    this.$.cancel.classList.add('on')\n    this.$.list.classList.add('on')\n  }\n  /**\n   * Create Tag/Version dropdown to be re-used.\n   */\n  render () {\n    let body = DOM.get('body')\n\n    let container2 = DOM.new('div', {\n      'className': 'version-dropdown-list',\n    })\n\n    let cancel_dropdown = DOM.new('dev', {\n      'id': 'cancel-area-show-version-dropdown'\n    })\n    body.append(cancel_dropdown)\n    body.append(container2)\n\n    addEventListener(\"resize\", (ev) => { this.show(undefined, false) })\n    cancel_dropdown.onclick = (ev) => {this.show(undefined, false) }\n\n    this.$.list = container2\n    this.$.cancel = cancel_dropdown\n  }\n  /**\n   * Construct offline search.\n   */\n  construct_offline () {\n    window.SPHINX_HIGHLIGHT_ENABLED = false\n    window.DOCUMENTATION_OPTIONS = {}\n    window.DOCUMENTATION_OPTIONS.FILE_SUFFIX=\".html\"\n    window.DOCUMENTATION_OPTIONS.LINK_SUFFIX=\".html\"\n    document.querySelector('.documentwrapper .body')?.append(DOM.new(\"div\", {'id': 'search-results'}))\n    if (this.search_page === location.pathname) {\n      ['doctools.js', 'language_data.js', 'searchtools.js', 'english-stemmer.js']\n        .forEach((item) => {\n        const script = document.createElement(\"script\");\n        script.src = new URL(`${this.parent.state.content_root}_static/${item}`, location)\n        document.querySelector('head')?.append(script)\n      })\n      const script = document.createElement(\"script\");\n      script.src = new URL(`${this.parent.state.content_root}searchindex.js`, location)\n      document.querySelector('head')?.append(script)\n    }\n  }\n  /**\n   * Construct search.\n   */\n  construct () {\n    let alphanumeric = Toolbox.get_alphanumeric()\n    // Remove common text-manipulation shortcuts\n    const drop_ = ['a', 'c', 'f']\n    drop_.forEach(letter => {\n\talphanumeric.splice(alphanumeric.indexOf(letter), 1);\n    })\n    let language_data_script = new URL(`${this.parent.state.content_root}_static/language_data.js`,\n                                       location)\n    this.$.language_data = new DOM('script', {\n      src: language_data_script.href,\n      async: true\n    }).onevent(\"load\", this, (e) => {\n      this.$.searchForm.$.action = \"\"\n    })\n    this.$.body.append([this.$.language_data])\n\n    if (!this.parent.state.standalone)\n      for (const [key, value] of Object.entries(this.parent.state.metadata.repotoc)) {\n        this.include_item(key, value['name'], alphanumeric.shift())\n      }\n    let is_hosted_landing_page = this.parent.state.metadata.remote_doc === location.href\n    let not_subhosted = (this.parent.state.subhost === '' || this.parent.state.subhost === undefined) && !is_hosted_landing_page\n\n    if (not_subhosted || this.parent.state.standalone) {\n      let name = this.parent.state.repository in this.parent.state.metadata.repotoc ?\n                 this.parent.state.metadata.repotoc[this.parent.state.repository]['name'] :\n                 this.parent.state.repository\n      let label = this.parent.state.standalone ? '' : ' (local build)'\n      this.include_item(\"local\", `${name}${label}`, alphanumeric.shift())\n    }\n\n    this.$.searchInput.$.oninput = (e) => {this.query(e.target.value)}\n\n    let url = new URL(location)\n    let q = url.searchParams.get('q')\n    let r = url.searchParams.get('r')\n    if (q !== null) {\n      if (r !== null) {\n        r = r.split(',')\n        r.forEach((key) => {\n          key = key.split('@')\n          let event = new Event('change');\n          if (key[0] in this.$.keyCheckbox) {\n            this.$.keyCheckbox[key[0]].$.checked = true\n            if (key.length === 2)\n              this.index_state[key[0]].version = key[1]\n            else\n              this.index_state[key[0]].version = null\n            this.$.keyCheckbox[key[0]].$.dispatchEvent(event)\n          }\n        })\n      }\n      this.$.searchInput.$.value = q\n      let event = new Event('click');\n      this.$.searchButton.$.dispatchEvent(event)\n    }\n\n    document.addEventListener('keyup', (e) => {this.keyup(e)}, false);\n    document.addEventListener('keydown', (e) => {this.keydown(e)}, false);\n    document.addEventListener(\"focus\", (e) => {this.focus(e)})\n\n    this.render()\n  }\n}\n","\"use strict\";\n\nimport {DispatchEvent} from './event.js'\nimport {DOM} from './dom.js'\nimport {Toolbox} from './toolbox.js'\n\n/**\n * Enhance content interactions.\n * The actions are:\n * * Copy button on code and shell blocks.\n * * Collections, groups of pages of the same category.\n */\nexport class ContentActions {\n  constructor (app) {\n    this.$ = {}\n    this.parent = app\n    this.callback = []\n\n    if (typeof this.parent.fetch === 'object')\n      this.parent.fetch.then(this.construct.bind(this))\n    else\n      this.construct()\n\n    app.content_actions = this\n    DispatchEvent(\"app:content_actions:constructed\")\n  }\n  copy_button () {\n    let body = new DOM(DOM.get('.bodywrapper .body'))\n    let code_block = DOM.getAll('div.highlight pre', body.$)\n    code_block.forEach((item) => {\n      if (item.parentNode.parentNode.classList.contains('no-select'))\n        return\n      if (item.children.length === 2 &&\n          item.children[1].classList.contains('c1'))\n        return\n      let text = item.textContent.replaceAll('\\n', '')\n      if (text.length > 20)\n        text = text.slice(0, 20) + \"...\"\n      let button = new DOM('button', {\n        className: 'icon copy',\n        title: `Copy \"${text}\"`,\n      }).onclick(this, (item, e) => {\n        navigator.clipboard.writeText(item.textContent)\n          .then(() => {})\n          .catch((err) => {\n            console.error(err)\n          })\n\n      }, [item])\n      item.insertAdjacentElement('afterend', button.$)\n    })\n  }\n  init_collection_wrapper () {\n    let tocwrapper = new DOM(DOM.get('.localtoc .tocwrapper'))\n    let header = new DOM('div', {\n      'className': 'header'\n    })\n    header.innerText = \"Collections\"\n    this.$.collection = new DOM('div',\n      {'className': 'collections'}\n    ).append(header)\n\n    tocwrapper.append(this.$.collection)\n  }\n  auto_collection_name (repo, path) {\n    const repo_name = repo in  this.parent.state.metadata.repotoc ?\n      this.parent.state.metadata.repotoc[repo].name : repo\n    if (this.collection_pattern === undefined ||\n       !(repo in this.collection_pattern))\n      return `${repo_name} (${path})`\n\n    for (const pattern in this.collection_pattern[repo]) {\n      const regex = new RegExp(pattern)\n      const basename = path.substring(path.lastIndexOf('/')+1)\n      if (regex.test(path))\n        return this.collection_pattern[repo][pattern]\n          .replace(\"${repository}\", repo_name)\n          .replace(\"${basename}\", basename)\n          .replace(\"${path}\", path)\n    }\n\n    return `${repo_name} ${path}`\n  }\n  add_collection_entry (ul, repo, entry, props) {\n    const name = \"name\" in props ? props[\"name\"] : this.auto_collection_name(repo, entry)\n    const url = new URL(`${this.parent.state.metadata.remote_doc}${repo}/${entry}`)\n    const m = new DOM('a', {'href': url, 'target': 'blank'})\n    m.innerText = name\n    ul.append(new DOM('li').append(m))\n  }\n  add_collection (name, obj) {\n    if (!this.$.collection)\n      this.init_collection_wrapper()\n\n    const id = name.replace(\" \", \"-\")\n    let collection = new DOM('label', {\n      'className': 'sub-header',\n      'htmlFor': `collection-${id}`,\n    })\n    let input_collection = new DOM('input', {\n      'className': 'collection-collapse',\n      'type': 'checkbox',\n      'id': `collection-${id}`,\n    })\n    input_collection.$.checked = true\n    collection.innerText = name\n\n    let ul = new DOM('ul')\n    for (const repo in obj) {\n      for (const page in obj[repo])\n        this.add_collection_entry(ul, repo, page, obj[repo][page])\n    }\n    this.$.collection.append([\n      new DOM('div', {'className': 'group'}).append([\n        input_collection,\n        collection,\n        new DOM('span', {'className': 'span-ul'}).append(ul)\n      ]),\n    ])\n  }\n  load_collection () {\n    const repo = this.parent.state.repository\n    const obj = this.parent.state.collection\n    if (!(\"collection\" in obj))\n      return\n    if (\"pattern\" in obj)\n      this.collection_pattern = obj[\"pattern\"]\n    let path = \"\"\n    if (this.parent.state.offline)\n      path = new URL(\"file://\"+location.pathname).href\n    else\n      path = new URL(location.pathname, location.origin).href\n    let base = new URL(this.parent.state.content_root, path).href\n\n    for (const key in obj[\"collection\"]) {\n      if (!(\"include\" in obj[\"collection\"][key]) ||\n          !(repo in obj[\"collection\"][key]['include']))\n        continue\n\n      const pages = obj[\"collection\"][key]['include'][repo]\n      for (const page in pages) {\n        const collection_base = new URL(page, base).href\n        if (path.startsWith(collection_base)) {\n          this.add_collection(key, obj[\"collection\"][key]['include'])\n          break\n        }\n      }\n    }\n  }\n  deinit_collection () {\n    this.collection_controller.abort()\n\n    if (!this.$.collection)\n      return\n\n    this.$.collection.$.remove()\n    delete this.$.collection\n    delete this.collection_pattern\n  }\n  init_collection () {\n    this.collection_controller = new AbortController();\n    const signal = this.collection_controller.signal\n\n    let state = this.parent.state\n    const base_url = (state.subhost === '' || state.offline === true) ?\n      new URL(`${state.metadata.remote_doc}documentation/`) :\n      new URL('documentation/', new URL(state.subhost, location.origin))\n    // Do you want to use single_hosted with same origin? use below:\n    //const base_url =\n    //  new URL(state.subhost + '/', location.origin)\n\n    if (this.collection) {\n      this.load_collection()\n      return\n    }\n    const response = fetch(\n      new Request(new URL('collection.json', base_url)),\n      { signal }\n    )\n      .then(response => response)\n      .then(response => {\n        if (response.ok === true)\n          return response.json()\n        else if (response.status === 404)\n          return {} // Don't try again if doesn't exist\n        else\n          throw new Error();\n      })\n      .then(obj => {\n        this.parent.state.collection = obj\n        this.callback.forEach(cb => cb())\n        this.load_collection()\n      })\n      .catch(err => {})\n  }\n  construct () {\n    this.init()\n  }\n  deinit () {\n    this.deinit_collection()\n  }\n  init () {\n    if (!document.querySelector('script[src*=\"_static/copybutton.js\"]'))\n      this.copy_button()\n    else\n      console.log('copy_button: sphinx-copy-button extension is present, skipping')\n    this.init_collection()\n  }\n  /**\n   * Append callbacks to call after collection.json is loaded.\n   */\n  then (callback) {\n    if (this.parent.state.collection)\n      callback()\n    else\n      this.callback.push(callback)\n  }\n}\n","export const DispatchEvent = (ev, obj) => {\n  const event = new CustomEvent(ev, {\n    detail: obj\n  });\n  window.dispatchEvent(event);\n}\n\nexport const WaitEvent = (obj, attr, ev) => {\n  if (Object.hasOwn(obj, attr))\n    return obj[attr]\n  else\n    return new Promise((resolve) => {\n      window.addEventListener(\n        ev, (e) => {\n          resolve(e.detail)\n        },\n        { once: true }\n      )\n    })\n}\n","import { Polyfill } from './polyfill.js'\nimport { Links } from './links.js'\nimport { PageActions } from './page_actions.js'\nimport { Versioned } from './versioned.js'\nimport { Search } from './search.js'\nimport { ContentActions } from './content_actions.js'\n\nexport default function Extra (){\n  new Polyfill(app)\n  let on_ready = () => {\n    new Links(app)\n    new Versioned(app)\n    new PageActions(app)\n    new Search(app)\n    new ContentActions(app)\n  }\n\n  if (document.readyState === 'loading')\n    document.addEventListener('DOMContentLoaded', on_ready, { once: true });\n  else\n    on_ready()\n}\n\nExtra()\n"],"names":["Polyfill","constructor","app","Object","hasOwn","state","subhost","sub_hosted","repository","standalone","document","querySelector","DOM","dom","tags","this","$","createElement","tag","dataset","elem","cloneNode","deep","innerText","str","height","offsetHeight","width","offsetWidth","id","value","src","focus","classList","style","onchange","self","ev","args","e","apply","Array","push","onclick","onauxclick","onup","addEventListener","onmiddleclick","which","ondown","onmove","onevent","event","fun","append","DOMS","forEach","item","test","name","appendChild","remove","removeChilds","a","child","lastElementChild","removeChild","get","b","getAll","querySelectorAll","switchState","_class","cn","undefined","contains","add","UID","Date","toString","Math","random","substr","setSelected","i","options","length","text","selected","lazyUpdate","uid","props","param","element","key","getOwnText","from","childNodes","filter","n","nodeType","Node","TEXT_NODE","map","textContent","join","Toolbox","randomChar","alphabet","floor","substring","SID","fromUrl","_param","URLSearchParams","location","search","urlDefaults","urlValidParams","includes","cleanPathname","_pathname","replace","getDepth","match","try_redirect","url","fallback_url","new_tab","url_","fetch","method","status","window","open","href","try_include","url_raw","fallback","error","request","Request","then","response","ok","Error","startsWith","split","URL","catch","fetch_each","urls","isArray","obj","json","get_alphanumeric","numbers","keys","String","fromCharCode","concat","static","condition","checkInterval","Promise","resolve","interval","setInterval","clearInterval","force","matchMedia","matches","m","dp","fill","j","max","added","deleted","A","Set","D","modified","k","has","delete","Links","show_repotoc","renew_index","set_doms","parent","construct","bind","metadata","update_repotoc","update_banner","repotocTreeOverlay","repotocTreeSidebar","banner","new","className","prepend","linksSidebar","tabIndex","target","checked","linksOverlay","prefix","remote_doc","self_link","offline","content_root","entries","base","entry","desc","spacer","_canonical","remote_alt","host","_developer","link_landing","link_developer","cards_links","container","cards","Event","dispatchEvent","PageActions","with_page_source","versioned","handler_stub","page_actions","page_source_sanity","r","hasOwnProperty","console","warn","page_source_ignore","draw_page_source","edit_button","title","preventDefault","edit_button_tgt_raw","alt_href","preinit_page_source","init_page_source","doc","insertAdjacentElement","parentElement","format_tgt","hostname","suffix","content","page_source_suffix","tgt","source_hostname","tgt_raw","source_hostname_raw","path","pathname","origin","endsWith","deinit_page_source","start","async","log","await_","init","deinit","Versioned","callback","version","char","render","init_tags","assert","every","prototype","call","object_to_string_array","obj_","string_array_to_object","get_class_labels","labels","cb","label","mode","toc_tree","nav_bar","body","cols","repeat","container2","page","hash","entry_","label_","cancel_dropdown","container3","show","onresize","list","cancel","rect","getBoundingClientRect","wiw","innerWidth","top","right","left","removeProperty","Scorer","objNameMatch","objPartialMatch","objPrio","objPrioDefault","partialTitle","term","partialTerm","Search","index","index_state","key_prefix","versions_available","search_page","keyCheckbox","keyVersion","searchUL","searchLI","searchAreaBg","cancel_search","searchArea","searchForm","action","searchFormButton","searchInput","searchTags","searchResults","searchContainer","searchButton","navigation","rightHeader","select","set_default","construct_offline","split_query","query","searchParams","history","replaceState","_orderResultsByScoreThenName","leftScore","rightScore","leftTitle","toLowerCase","rightTitle","get_searchindex","not_sub_hosted","guess_default","arr","some","find","at","process","check_toc","requested","selected_version","search_","load_index","renew_search","get_tags_and_update_url","searchUL_","ready","search_shortcut","code","ctrlKey","altKey","onfailure","JSON","parse","perform_object_search","object","objectTerms","searchOn","filenames","docNames","docnames","objects","objNames","objnames","titles","results","array","fullname","fullnameLower","indexOf","score","parts","slice","objName","otherTerms","size","haystack","otherTerm","anchor","descr","objectSearchCallback","perform_terms_search","searchTerms","excludedTerms","terms","titleTerms","titleterms","scoreMap","Map","fileMap","word","files","escapedWord","record","recordFiles","file","set","wordList","filteredTermCount","w","perform_search","highlightTerms","allTitles","alltitles","indexEntries","indexentries","normalResults","nonMainIndexResults","queryLower","trim","foundTitles","round","boost","foundEntries","isMain","result","sort","seen","reverse","reduce","acc","resultStr","v","enabledTags","html_to_text","htmlElement","DOMParser","parseFromString","removalQuery","el","anchorContent","docContent","get_summary","data","keywords","p_","textLower","actualStartPosition","startWithContext","tail","Stemmer","searchQuery","parse_query","firstElementChild","lastChild","searchResults_","docName","_filename","kind","href_","li_","loading_","setTimeout","finally","clearTimeout","stemmer","queryTerm","queryTermLower","stopwords","stemWord","localStorage","setItem","select_filter_tags","values","checkbox","keyup","keydown","include_item","shortcut","input_","type","version_button","show_version_dropdown","htmlFor","clean_versions_dropdown","select_version","wih","innerHeight","bottom","SPHINX_HIGHLIGHT_ENABLED","DOCUMENTATION_OPTIONS","FILE_SUFFIX","LINK_SUFFIX","script","alphanumeric","letter","splice","language_data_script","language_data","repotoc","shift","is_hosted_landing_page","oninput","q","ContentActions","content_actions","CustomEvent","detail","DispatchEvent","copy_button","parentNode","children","replaceAll","button","navigator","clipboard","writeText","err","init_collection_wrapper","tocwrapper","header","collection","auto_collection_name","repo","repo_name","collection_pattern","pattern","regex","RegExp","basename","lastIndexOf","add_collection_entry","ul","add_collection","input_collection","load_collection","pages","collection_base","deinit_collection","collection_controller","abort","init_collection","AbortController","signal","base_url","Extra","on_ready","readyState","once"],"mappings":"qOAKO,MAAMA,EACX,WAAAC,CAAaC,GAEPC,OAAOC,OAAOF,EAAIG,MAAO,gBAC3BH,EAAIG,MAAMC,SAAmC,IAAzBJ,EAAIG,MAAME,WAAsB,IAAIL,EAAIG,MAAMG,aAAe,UAC1EN,EAAIG,MAAME,YAGdJ,OAAOC,OAAOF,EAAIG,MAAO,gBAC1BH,EAAIG,MAAMI,aAAcC,SAASC,cAAc,2BACrD,ECXF,MAAMC,EACJ,WAAAX,CAAaY,EAAKC,GAEhB,GADAC,KAAKC,EACa,iBAAPH,GAKX,GADAE,KAAKC,EAAIN,SAASO,cAAcJ,GACb,iBAARC,EAAkB,IAAK,MAAMI,KAAOJ,EACzCI,KAAOH,KAAKC,EACdD,KAAKC,EAAEE,GAAOJ,EAAKI,GAEnBH,KAAKC,EAAEG,QAAQD,GAAOJ,EAAKI,QAR7BH,KAAKC,EAAIH,CAUb,CAEA,UAAO,CAAKA,EAAKC,GACf,IAAIM,EAAOV,SAASO,cAAcJ,GAClC,GAAmB,iBAARC,EAAkB,IAAK,MAAMI,KAAOJ,EACzCI,KAAOE,EACTA,EAAKF,GAAOJ,EAAKI,GAEjBE,EAAKD,QAAQD,GAAOJ,EAAKI,GAE7B,OAAOE,CACT,CAMA,SAAAC,CAAWC,GAET,OADW,IAAIV,EAAIG,KAAKC,EAAEK,UAAUC,GAEtC,CAKA,aAAIC,CAAUC,GACZT,KAAKC,EAAEO,UAAYC,CACrB,CAIA,aAAID,GACF,OAAOR,KAAKC,EAAEO,SAChB,CAEA,UAAIE,GACF,OAAOV,KAAKC,EAAEU,YAChB,CAEA,SAAIC,GACF,OAAOZ,KAAKC,EAAEY,WAChB,CAEA,MAAIC,GACF,OAAOd,KAAKC,EAAEa,EAChB,CAEA,MAAIA,CAAIL,GACNT,KAAKC,EAAEa,GAAIL,CACb,CAEA,SAAIM,GACF,OAAOf,KAAKC,EAAEc,KAChB,CAEA,SAAIA,CAAON,GACTT,KAAKC,EAAEc,MAAQN,CACjB,CAEA,OAAIO,GACF,OAAOhB,KAAKC,EAAEe,GAChB,CAEA,OAAIA,CAAKP,GACPT,KAAKC,EAAEe,IAAMP,CACf,CAIA,KAAAQ,GACEjB,KAAKC,EAAEgB,OACT,CAEA,aAAIC,GACF,OAAOlB,KAAKC,EAAEiB,SAChB,CAEA,SAAIC,GACF,OAAOnB,KAAKC,EAAEkB,KAChB,CAKA,QAAAC,CAAUC,EAAMC,EAAIC,GASlB,OARAvB,KAAKC,EAAEmB,SAAYI,SACE,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,KAGZvB,IACT,CAKA,OAAA4B,CAASP,EAAMC,EAAIC,GASjB,OARAvB,KAAKC,EAAE2B,QAAWJ,SACG,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,KAGZvB,IACT,CAKA,UAAA6B,CAAYR,EAAMC,EAAIC,GASpB,OARAvB,KAAKC,EAAE4B,WAAcL,SACA,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,KAGZvB,IACT,CAKA,IAAA8B,CAAMT,EAAMC,EAAIC,GASd,OARAvB,KAAKC,EAAE8B,iBAAiB,UAAYP,SACf,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,MAGZvB,IACT,CAKA,aAAAgC,CAAeX,EAAMC,EAAIC,GAYvB,OAXAvB,KAAKC,EAAE8B,iBAAiB,UAAYP,IACjB,IAAZA,EAAES,aAGY,IAARV,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,OAGZvB,IACT,CAKA,MAAAkC,CAAQb,EAAMC,EAAIC,GAShB,OARAvB,KAAKC,EAAE8B,iBAAiB,YAAcP,SACjB,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,MAGZvB,IACT,CAKA,MAAAmC,CAAQd,EAAMC,EAAIC,GAShB,OARAvB,KAAKC,EAAE8B,iBAAiB,YAAcP,SACjB,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,MAGZvB,IACT,CAOA,OAAAoC,CAASC,EAAOhB,EAAMiB,EAAKf,GASzB,OARAvB,KAAKC,EAAE8B,iBAAiBM,EAAQb,SACX,IAARD,EACTe,EAAIb,MAAMJ,EAAM,CAACG,IACVD,EAAKrC,aAAewC,QAC3BH,EAAKI,KAAKH,GACVc,EAAIb,MAAMJ,EAAME,MAGbvB,IACT,CAKA,MAAAuC,CAAQC,GAYN,OAXIA,EAAKtD,aAAewC,QACtBc,EAAO,CAACA,IAEVA,EAAKC,QAAUC,IACT,kBAAkBC,KAAKD,EAAKxD,YAAY0D,MAC1C5C,KAAKC,EAAE4C,YAAYH,GACG,iBAARA,GACP,kBAAkBC,KAAKD,EAAKzC,EAAEf,YAAY0D,OACjD5C,KAAKC,EAAE4C,YAAYH,EAAKzC,KAGrBD,IACT,CAIA,SACEA,KAAKC,EAAE6C,QAET,CAIA,mBAAOC,CAAcC,GACnB,IAAIC,EAAQD,EAAEE,iBACd,KAAOD,GACLD,EAAEG,YAAYF,GACdA,EAAQD,EAAEE,gBAEd,CAMA,UAAOE,CAAKJ,EAAGK,GAEb,YAAoB,KADpBA,EAAIA,aAAaxD,EAAMwD,EAAEpD,EAAIoD,GACM1D,SAASC,cAAeoD,GAAKK,EAAEzD,cAAcoD,EAClF,CAMA,aAAOM,CAAON,EAAGK,GAEf,MAAoB,iBADpBA,EAAIA,aAAaxD,EAAMwD,EAAEpD,EAAIoD,GACGA,EAAEE,iBAAiBP,GAAKI,IAAIC,GAAGE,iBAAiBP,EAClF,CAMA,kBAAOQ,CAAaH,EAAGI,GAErB,IAAIC,EAAeC,MAAVF,EAAsBA,EAAS,MADxCJ,EAAIA,aAAaxD,EAAMwD,EAAEpD,EAAIoD,GAEvBnC,UAAU0C,SAASF,GACvBL,EAAEnC,UAAU4B,OAAOY,GAEnBL,EAAEnC,UAAU2C,IAAIH,EACpB,CAIA,UAAOI,GACL,QAAS,IAAIC,MAAMC,SAAS,IAAMC,KAAKC,SAASF,SAAS,IAAIG,OAAO,EACtE,CAMA,kBAAOC,CAAatE,EAAKiB,GACvB,IAAK,IAAIsD,EAAI,EAAGA,EAAIvE,EAAIG,EAAEqE,QAAQC,OAAQF,IACxC,GAAIvE,EAAIG,EAAEqE,QAAQD,GAAGG,MAAQzD,EAE3B,YADAjB,EAAIG,EAAEqE,QAAQD,GAAGI,UAAW,EAIlC,CAUA,iBAAOC,CAAY5E,EAAK6E,EAAKC,EAAOC,GAClCA,EAAiBlB,MAATkB,EAAqB,YAAcA,EAC3C,IAAIC,EAAUjF,EAAIuD,IAAI,cAAcuB,MAAS7E,GAC7C,IAAK,MAAMiF,KAAOH,EAChB/E,EAAIuD,IAAI,IAAI2B,IAAOD,GAASD,GAASD,EAAMG,EAE/C,CAKA,iBAAOC,CAAW3E,GAChB,OAAOqB,MAAMuD,KAAK5E,EAAK6E,YACpBC,OAAOC,GAAKA,EAAEC,WAAaC,KAAKC,WAChCC,IAAIJ,GAAKA,EAAEK,aACXC,KAAK,GACV,ECtUF,MAAMC,EAIJ,iBAAOC,GACL,MAAMC,EAAW,6BACjB,OAAOA,EAAS5B,KAAK6B,MAAsBD,GAAhB5B,KAAKC,UAClC,CAIA,UAAOJ,GACL,OAAO9D,KAAK4F,eAAiB,IAAI7B,MAAMC,SAAS,IAAMC,KAAKC,SAASF,SAAS,IAAI+B,UAAU,EAC7F,CAIA,UAAOC,GACL,OAAOhG,KAAK4F,aAAgB3B,KAAKC,SAAUF,SAAS,IAAI+B,UAAU,EAAE,EACtE,CAMA,cAAOE,CAASC,GACd,IAAIrB,EAAQ,IAAIsB,gBAAgBxG,SAASyG,SAASC,QAClD,OAA4B,MAArBxB,EAAMzB,IAAI8C,GACflG,KAAKsG,YAAYJ,GAAUlG,KAAKuG,eAAeL,EAAQrB,EAAMzB,IAAI8C,GACrE,CAMA,kBAAOI,CAAaJ,GAClB,GACO,UADCA,EAEJ,MAAO,OAEb,CAIA,qBAAOK,CAAgBL,EAAQnF,GAC7B,GACO,UADCmF,EAEJ,MAAO,CAAC,OAAQ,SAASM,SAASzF,GAASA,EAAQf,KAAKsG,YAAYJ,EAE1E,CACA,oBAAOO,CAAeC,GACpB,OAAOA,EAAUC,QAAQ,eAAgB,MAAMA,QAAQ,YAAa,KACtE,CAIA,eAAOC,CAAUF,GACf,OAAQA,EAAUG,MAAM,QAAQ,IAAItC,MACtC,CAIA,yBAAauC,CAAcC,EAAKC,EAAcC,GAC5C,IAAIC,EACJ,IAMIA,EADsB,aAJDC,MAAMJ,EAAK,CAChCK,OAAQ,UAGGC,OACJL,EAEAD,CACX,CAAE,MAAOvF,GACP0F,EAAOF,CACT,CACA,OAAKE,IAEDD,EACFK,OAAOC,KAAKL,EAAM,UAAUjG,QAE5BmF,SAASoB,KAAON,GACX,EACT,CAKA,wBAAaO,CAAaC,EAASX,EAAKE,GACtC,IAAIU,EAAYC,IACVX,EACFK,OAAOC,KAAKR,EAAK,UAAU9F,QAE3BmF,SAASoB,KAAOT,GAEpB,MAAMc,EAAU,IAAIC,QAAQJ,SACtBP,MAAOU,GACVE,KACEC,IACC,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASX,QAC3B,OAAOW,EAASxD,SAEnBuD,KAAMvD,KACLA,EAAOA,EAAKmC,QAAQ,OAAQ,KACnBwB,WAAW,kBAA+C,GAA3B3D,EAAK4D,MAAM,MAAM7D,QACvDC,EAAOA,EAAKuB,UAAU,IAClBkB,EACFK,OAAOC,KAAK,IAAIc,IAAI7D,EAAMuC,GAAKS,KAAM,UAAUvG,QAE/CmF,SAASoB,KAAO,IAAIa,IAAI7D,EAAMuC,GAAKS,MAErCG,MAGHW,MAAMX,EAEX,CAIA,uBAAaY,CAAYC,GAClB9G,MAAM+G,QAAQD,KACjBA,EAAO,CAACA,IAEV,IAAK,IAAIzB,KAAOyB,EACd,IACE,MAAMX,EAAU,IAAIC,QAAQf,GACtBiB,QAAiBb,MAAMU,GAE7B,IAAoB,IAAhBG,EAASC,GACX,MAAO,CAACS,UAAaV,EAASW,OAAQ5B,IAAOA,GAC1C,GAAwB,MAApBiB,EAASX,OAChB,MAAO,CAACO,MAASI,EAAUjB,IAAOA,EACtC,CAAE,MAAOa,GACP,MAAO,CAACA,MAASA,EAAOb,IAAOA,EACjC,CAEF,MAAO,CAACa,MAAS,uCAAuCY,IAC1D,CAIA,uBAAOI,GACL,MAAMC,EAAU,IAAInH,MAAM,GAAGoH,WAAYtD,IAAIJ,IAAMA,EAAI,GAAGpB,YACpD6B,EAAW,IAAInE,MAAM,IAAIoH,QAAQtD,IAAIJ,GAAK2D,OAAOC,aAAa,GAAK5D,IACzE,OAAOyD,EAAQI,OAAOpD,EACxB,CAOAqD,iBAAmB,CAACC,EAAWC,EAAc,MACpC,IAAIC,QAAQC,IACjB,IAAIC,EAAWC,YAAY,KACpBL,MACLM,cAAcF,GACdD,MACCF,KAGPF,qBAAuB,CAACQ,GAAQ,IACvBA,GAA0E,GAAjEpC,OAAOqC,WAAW,oCAAoCC,QAMxEV,WAAa,CAAClG,EAAGK,KACf,MAAMwG,EAAI7G,EAAEuB,OAAQa,EAAI/B,EAAEkB,OAEpBuF,EAAKpI,MAAMuD,KAAK,CAAEV,OAAQsF,EAAI,GAAK,IAAMnI,MAAM0D,EAAI,GAAG2E,KAAK,IAEjE,IAAK,IAAI1F,EAAIwF,EAAI,EAAGxF,GAAK,EAAGA,IAC1B,IAAK,IAAI2F,EAAI5E,EAAI,EAAG4E,GAAK,EAAGA,IAC1BF,EAAGzF,GAAG2F,GAAKhH,EAAEqB,KAAOhB,EAAE2G,GAClBF,EAAGzF,EAAI,GAAG2F,EAAI,GAAK,EACnB/F,KAAKgG,IAAIH,EAAGzF,EAAI,GAAG2F,GAAIF,EAAGzF,GAAG2F,EAAI,IAEzC,IAAI3F,EAAI,EAAG2F,EAAI,EAAGE,EAAQ,GAAIC,EAAU,GACxC,KAAO9F,EAAIwF,GAAKG,EAAI5E,GACdpC,EAAEqB,KAAOhB,EAAE2G,IAAM3F,IAAK2F,KACjBF,EAAGzF,EAAI,GAAG2F,IAAMF,EAAGzF,GAAG2F,EAAI,IAAMG,EAAQxI,KAAKqI,GAAI3F,MACnD6F,EAAMvI,KAAKqI,GAAIA,KAExB,KAAO3F,IAAMwF,GAAGM,EAAQxI,KAAKqI,GAC7B,KAAOA,IAAM5E,GAAG8E,EAAMvI,KAAKqI,EAAI,GAG/B,MAAMI,EAAI,IAAIC,IAAIH,GAAQI,EAAI,IAAID,IAAIF,GAAUI,EAAW,GAC3D,IAAK,MAAMC,KAAKJ,EAAOE,EAAEG,IAAID,KAC3BD,EAAS5I,KAAK6I,GACdJ,EAAEM,OAAOF,GACTF,EAAEI,OAAOF,IAGX,MAAO,CAAEN,MAAO,IAAIE,GAAID,QAAS,IAAIG,GAAIC,aCtMtC,MAAMI,EACX,WAAAzL,CAAaC,GACXa,KAAKC,EAAI,CAAA,EAETD,KAAKC,EAAE2K,aAAejL,SAASC,cAAc,uBAC7CI,KAAKC,EAAE2K,aAAaxJ,SAAYE,IAAStB,KAAK6K,YAAYvJ,IAC1DtB,KAAK8K,WACL9K,KAAK+K,OAAS5L,EACmB,iBAAtBa,KAAK+K,OAAO5D,MACrBnH,KAAK+K,OAAO5D,MAAMY,KAAK/H,KAAKgL,UAAUC,KAAKjL,OAE3CA,KAAKgL,WACT,CACA,SAAAA,GACE,IAAInB,EAAI7J,KAAK+K,OAAOzL,MAAM4L,SACtB,YAAarB,GACf7J,KAAKmL,eAAetB,EAAW,SAC7B,WAAYA,GACd7J,KAAKoL,cAAcvB,EAAU,OACjC,CACA,QAAAiB,GACE,IAAI7K,EAAID,KAAKC,EAEbA,EAAEoL,mBAAqB1L,SAASC,cAAc,yBAC9CK,EAAEqL,mBAAqB3L,SAASC,cAAc,gCAC9CK,EAAEsL,OAAS1L,EAAI2L,IAAI,MAAO,CACxBC,UAAW,WAEb9L,SAASC,cAAc,QAAQ8L,QAAQzL,EAAEsL,OAC3C,CACA,WAAAV,CAAavJ,GACXtB,KAAKC,EAAE0L,aAAalJ,QAASpC,IAC3BA,EAAKuL,SAAWtK,EAAGuK,OAAOC,QAAU,GAAI,IAE1C9L,KAAKC,EAAE8L,aAAatJ,QAASpC,IAC3BA,EAAKuL,SAAWtK,EAAGuK,OAAOC,QAAU,GAAI,GAE5C,CACA,cAAAX,CAAgBzC,GACd,IAAIzI,EAAID,KAAKC,EACb,GAAID,KAAK+K,OAAOzL,MAAMI,WACpB,OAEF,IAAIsM,EAAuC,KAA9BhM,KAAK+K,OAAOzL,MAAMC,cAAgDoE,IAA9B3D,KAAK+K,OAAOzL,MAAMC,QACtDS,KAAK+K,OAAOzL,MAAM4L,SAASe,WAC3BjM,KAAK+K,OAAOzL,MAAMC,QAAQ4I,WAAW,SAAW,SAAW,IAExEnI,KAAKC,EAAE8L,aAAe,GACtB/L,KAAKC,EAAE0L,aAAe,GACtB,IAAIO,EAAYlM,KAAK+K,OAAOzL,MAAM6M,QAClBnM,KAAK+K,OAAOzL,MAAM8M,aAClB,IAAI/D,IAAIrI,KAAK+K,OAAOzL,MAAM8M,aAAchG,SAASoB,MACjE,IAAK,MAAOzC,EAAKhE,KAAU3B,OAAOiN,QAAQ3D,GAAM,CAC9C,KAAM,SAAU3H,GACd,SAEF,IAAIuL,EAAOvH,GAAO/E,KAAK+K,OAAOzL,MAAMG,WACzByM,EAAY,GAAGF,IAASjH,KAC/BwH,EAAQ1M,EAAI2L,IAAI,IAAK,CACvBhE,KAAQ,GAAG8E,cACXb,UAAazL,KAAK+K,OAAOzL,MAAMG,aAAesF,EAAM,UAAY,KAE9DnC,EAAO/C,EAAI2L,IAAI,MAAO,CACxBhL,UAAaO,EAAY,KACzB0K,UAAa,UAEXe,EAAO3M,EAAI2L,IAAI,MAAO,CACxBhL,UAAaO,EAAmB,YAChC0K,UAAa,aAEXgB,EAAS5M,EAAI2L,IAAI,OACrBe,EAAMhK,OAAOK,GACb2J,EAAMhK,OAAOiK,GACbD,EAAMhK,OAAOkK,GACbzM,KAAKC,EAAE0L,aAAahK,KAAK4K,EAC3B,CAEAvM,KAAKC,EAAE0L,aAAalJ,QAASpC,IAC3BL,KAAKC,EAAE8L,aAAapK,KAAKtB,EAAKC,WAAU,MAI1C,MAAMoM,EAAa,IAAIrE,IAAIlJ,IAAIG,MAAM4L,SAASyB,YAAYC,OAASxG,SAASwG,KACzD5M,KAAK+K,OAAOzL,MAAM4L,SAASe,WAAaD,EACrDa,EAAa7M,KAAK+K,OAAOzL,MAAM4L,SAASyB,WAC9C,IAAIG,EAAgBjN,EAAI2L,IAAI,IAAK,CAC/BhL,UAAa,mBACbgH,KAAQkF,EACRjB,UAAa,sBAEXsB,EAAiBlN,EAAI2L,IAAI,IAAK,CAChChL,UAAa,mBACbgH,KAAQ,IAAIa,IAAI,KAAMwE,GACtBhB,OAAU,SACVJ,UAAa,+BAGXuB,EAAcnN,EAAI2L,IAAI,MAAO,CAC/BC,UAAa,gBAGf,GADAuB,EAAYzK,OAAOuK,EAAcC,GAC7B9M,EAAEoL,mBAAoB,CACxBxL,EAAIkD,aAAa9C,EAAEoL,oBACnB,IAAI4B,EAAYpN,EAAI2L,IAAI,MAAO,CAC7BC,UAAa,cAEVyB,EAAQrN,EAAI2L,IAAI,MAAO,CAC5BC,UAAa,UAEbzL,KAAKC,EAAE8L,aAAatJ,QAASC,IAAUwK,EAAM3K,OAAOG,KACpDuK,EAAU1K,OAAOyK,GACjBC,EAAU1K,OAAO2K,GACjBjN,EAAEoL,mBAAmB9I,OAAO0K,EAC9B,CACA,GAAIhN,EAAEqL,mBAAoB,CACxB,IAAI2B,EAAYpN,EAAI2L,IAAI,MAAO,CAC7BC,UAAa,cAEXyB,EAAQrN,EAAI2L,IAAI,MAAO,CACzBC,UAAa,UAEf5L,EAAIkD,aAAa9C,EAAEqL,oBACnBtL,KAAKC,EAAE0L,aAAalJ,QAASC,IAAUwK,EAAM3K,OAAOG,KACpDuK,EAAU1K,OAAOyK,EAAY1M,WAAU,IACvC2M,EAAU1K,OAAO2K,GACjBjN,EAAEqL,mBAAmB/I,OAAO0K,EAC9B,CAEA,IAAI5K,EAAQ,IAAI8K,MAAM,UACtBnN,KAAKC,EAAE2K,aAAawC,cAAc/K,EACpC,CACA,aAAA+I,CAAe1C,GACb,IAAIzI,EAAID,KAAKC,EAET,QAASyI,GACXzI,EAAEsL,OAAOhJ,OAAO1C,EAAI2L,IAAI,OAAQ,CAC9BhL,UAAakI,EAAS,OAGtB,WAAYA,GAAO,WAAYA,GACjCzI,EAAEsL,OAAOhJ,OAAO1C,EAAI2L,IAAI,IAAK,CAC3BhE,KAAQkB,EAAY,OACpBlI,UAAakI,EAAY,OACzBmD,OAAU,WAEhB,EC9IK,MAAMwB,EACX,WAAAnO,CAAaC,GACXa,KAAKC,EAAI,CAAA,EAETD,KAAKsN,kBAAmB,EACxBtN,KAAK+K,OAAS5L,EACmB,iBAAtBa,KAAK+K,OAAO5D,MACrBnH,KAAK+K,OAAO5D,MAAMY,KAAK/H,KAAKgL,UAAUC,KAAKjL,OAE3CA,KAAKgL,YAEPhL,KAAK+K,OAAOwC,UAAUxF,KAAK/H,KAAKwN,aAAavC,KAAKjL,OAElDb,EAAIsO,aAAezN,IACrB,CAEA,kBAAA0N,CAAoB7D,EAAG8D,GACrB,OAAK9D,EAAE+D,eAAe,mBAKjB/D,EAAW,QAAE+D,eAAeD,GAM5B9D,EAAW,QAAE8D,GAAGC,eAAe,YAK/B/D,EAAW,QAAE8D,GAAGC,eAAe,eAApC,GACEC,QAAQC,KAAK,6CAA6CH,OACnD,IANPE,QAAQC,KAAK,+CAA+CH,OACrD,IANPE,QAAQC,KAAK,4BAA4BH,2BAClC,IAPPE,QAAQC,KAAK,2DAA4DjE,IAClE,EAkBX,CAIA,kBAAAkE,GAEE,OAAwD,OAApDpO,SAASC,cAAc,wBAI7B,CACA,gBAAAoO,GACEhO,KAAKC,EAAEgN,UAAYpN,EAAI2L,IAAI,MAAO,CAChCC,UAAa,iBAEfzL,KAAKC,EAAEgO,YAAcpO,EAAI2L,IAAI,SAAU,CACrCC,UAAa,cACbyC,MAAS,kCAGXlO,KAAKC,EAAEgO,YAAYlM,iBAAiB,YAAcT,IAChDA,EAAG6M,mBAELnO,KAAKC,EAAEgO,YAAYlM,iBAAiB,UAAYT,IAC7B,IAAbA,EAAGW,OAA4B,IAAbX,EAAGW,OAEzB0D,EAAQ8B,YACNzH,KAAKoO,oBACLpO,KAAKC,EAAEgO,YAAYI,UACnB,KAGJrO,KAAKC,EAAEgN,UAAU1K,OAAOvC,KAAKC,EAAEgO,YACjC,CACA,mBAAAK,GACE,IAAIzE,EAAI7J,KAAK+K,OAAOzL,MAAM4L,SACtByC,EAAI3N,KAAK+K,OAAOzL,MAAMG,WAEtBO,KAAK0N,mBAAmB7D,EAAG8D,IAG3B3N,KAAK+N,uBAGT/N,KAAKgO,mBACLhO,KAAKsN,kBAAmB,EAC1B,CACA,gBAAAiB,GACE,IAAKvO,KAAKsN,iBACR,OAEF,IAAIkB,EAAM3O,EAAIuD,IAAI,yCACN,OAARoL,GAAgBA,EAAItN,UAAU0C,SAAS,UACzC4K,EAAO3O,EAAIuD,IAAI,sBACfoL,EAAIC,sBAAsB,aAAczO,KAAKC,EAAEgN,YAE/CuB,EAAIE,cAAcD,sBAAsB,YAAazO,KAAKC,EAAEgN,WAG9D,IAAIpD,EAAI7J,KAAK+K,OAAOzL,MAAM4L,SACtByC,EAAI3N,KAAK+K,OAAOzL,MAAMG,WAEtBkP,EAAcC,GACTA,EAASjI,QAAQ,eAAgBgH,GACfhH,QAAQ,WAAYkD,EAAW,QAAE8D,GAAW,QAC5ChH,QAAQ,aAAckD,EAAW,QAAE8D,GAAa,UASvEkB,EANqB,MACvB,IAAI/O,EAAMH,SAASC,cAAc,mCACjC,OAAY,OAARE,EACK,OACFA,EAAIgP,SAEAC,GAETC,EAAML,EAAW9E,EAAEoF,iBACnBC,EAAUP,EAAW9E,EAAEsF,qBACvBC,EAAO,GAETA,EADEpP,KAAK+K,OAAOzL,MAAM6M,QACb,IAAI9D,IAAI,UAAUjC,SAASiJ,UAAU7H,KAErC,IAAIa,IAAIjC,SAASiJ,SAAUjJ,SAASkJ,QAAQ9H,KAErD,IAAI8E,EAAO,IAAIjE,IAAIrI,KAAK+K,OAAOzL,MAAM8M,aAAcgD,GAAM5H,KACrD6H,EAAWD,EAAKrJ,UAAUuG,EAAK/H,QAGjC8K,EADEA,EAASE,SAAS,SACTF,EAAS1I,QAAQ,WAAYkI,GACjCQ,EAASE,SAAS,MAAqB,KAAbF,EACtBA,EAASpG,OAAO,QAAQ4F,KAExBQ,EAASpG,OAAO4F,GAE7BG,EAAMA,EAAI/F,OAAO,IAAKoG,GACtBH,EAAUA,EAAQjG,OAAO,IAAKoG,GAE9BrP,KAAKC,EAAEgO,YAAYI,SAAWW,EAC9BhP,KAAKoO,oBAAsBc,CAC7B,CACA,kBAAAM,GACOxP,KAAKsN,mBAGVtN,KAAKoO,yBAAsBzK,EAC7B,CACA,YAAA6J,GACE,IAAKxN,KAAK+K,OAAOwC,UAAUxN,KACzB,OACF,IAAID,EAAMH,SAASC,cAAc,qBACjC,IAAKE,GAAuB,KAAhBA,EAAIgP,QACd,OAEF,MAAMW,EAAQtQ,IAAIG,MAAM8P,KAAK7K,OAAS,EACxBvE,KAAK+K,OAAOwC,UAAUvB,OAAS7M,IAAIG,MAAM8P,KAAO,IAChDpP,KAAK+K,OAAOwC,UAAUvB,OAEpC,IAAK5F,SAASoB,KAAKW,WAAWsH,GAC5B,OAEF,MAAMJ,EAAWjJ,SAASoB,KAAKzB,UAAU0J,EAAMlL,QAC/C,IAAIwC,EAAM,IAAIsB,IAAIgH,EAAUrP,KAAK+K,OAAOwC,UAAUvB,OAASlM,EAAIgP,QAAU,KACzE,GAAI/H,EAAIS,OAASpB,SAASoB,KAExB,YADAqG,QAAQC,KAAK,gCAAgChO,EAAIgP,8BAGtCY,iBACD/J,EAAQmB,aAAaC,OAAKpD,GAAW,IAC7CkK,QAAQ8B,IAAI,iCAAiC7P,EAAIgP,4BAErDc,EACF,CACA,SAAA5E,GACEhL,KAAKsO,sBACLtO,KAAK6P,MACP,CACA,IAAAA,GACE7P,KAAKuO,mBACLvO,KAAKwN,cACP,CACA,MAAAsC,GACE9P,KAAKwP,oBACP,ECtLK,MAAMO,EACX,WAAA7Q,CAAaC,GACXa,KAAK+K,OAAS5L,EACda,KAAKC,EAAI,CAAA,EAETD,KAAKD,KACLC,KAAKgM,OACLhM,KAAKgQ,SAAW,GAChBhQ,KAAKgL,YAEL7L,EAAIoO,UAAYvN,IAClB,CAEA,QAAA2H,GACE,IAAIsI,EAAUjQ,KAAK+K,OAAOzL,MAAM2Q,QAC5BC,EAAOD,EAAQ9L,OAAO,EAAE,GAEZ,KAAZ8L,IAGJpC,QAAQ8B,IAAI,+CACRO,GAAQ,KAAOA,GAAQ,MACzBD,EAAU,IAAIA,KAEhBjQ,KAAKmQ,OAAO,CAAC,GAAI,CAACF,EAAS,MAC7B,CACA,SAAAjF,GACE,GAAIhL,KAAK+K,OAAOzL,MAAM6M,QAAS,CAC7B,IAAIiD,EAAOhJ,SAASoB,KAIpB,OAHAxH,KAAKgM,OAAS,IAAI3D,IAAIlJ,IAAIG,MAAM8M,aAAcgD,GAAM5H,KACpDxH,KAAKgM,OAAShM,KAAKgM,OAAOjG,UAAU,EAAG/F,KAAKgM,OAAOzH,OAAS,QAC5DvE,KAAK2H,UAEP,CAEA3H,KAAKgM,OAAShM,KAAK+K,OAAOzL,MAAMC,QAChCS,KAAKgM,OAAS,IAAI3D,IAAIrI,KAAKgM,OAAQ5F,SAASkJ,QAAQ9H,KAC/CxH,KAAKgM,OAAOuD,SAAS,OACxBvP,KAAKgM,QAAU,KACA7E,MACf,IAAIW,QAAQ,IAAIO,IAAI,YAAarI,KAAKgM,UAErCjE,KAAKC,GAAYA,GACjBD,KAAKC,GAAYA,EAASW,QAC1BZ,KAAKW,GAAO1I,KAAKoQ,UAAU1H,IAC3BJ,MAAMV,IACLiG,QAAQ8B,IAAI,kDACZ3P,KAAK2H,YAEX,CAIA,aAAO0I,CAAQ3H,GAKb,GAAIhH,MAAM+G,QAAQC,GAEhB,OAAmBA,EALR4H,MAAM5N,GAAwB,iBAATA,GASzB,gBAHLmL,QAAQC,KAAK,6CAA8CpF,IACpD,GAGJ,GAA4C,oBAAxCtJ,OAAOmR,UAAUvM,SAASwM,KAAK9H,GAA4B,CAEpE,IAAK,IAAI3D,KAAO2D,EAAK,CACnB,IAAKhH,MAAM+G,QAAQC,EAAI3D,IAErB,OADA8I,QAAQC,KAAK,kCAAmCpF,EAAI3D,KAC7C,EACF,GAAwB,IAApB2D,EAAI3D,GAAKR,OAElB,OADAsJ,QAAQC,KAAK,sCAAsCpF,EAAI3D,GAAKR,SAAUmE,EAAI3D,KACnE,CAEX,CACA,MAAO,cACT,CAIA,OAFA8I,QAAQC,KAAK,iEAAkEpF,IAExE,CACT,CAIA,6BAAO+H,CAAwB/H,GAC7B,IAAIgI,EAAO,GAEX,IAAK,MAAM3L,KAAO2D,EAChBgI,EAAK/O,KAAKoD,GAGZ,OAAO2L,CACT,CAIA,6BAAOC,CAAwBjI,GAC7B,IAAIgI,EAAO,CAAA,EAEXhI,EAAIjG,QAASC,IACXgO,EAAKhO,GAAQ,CAACA,EAAM,MAGlB,KAAMgO,IACRA,EAAK,IAAM,CAAC,OAAQ,aAEtB,IAAK,MAAM3L,KAAO2L,EAChB,IAAK3L,EAAIoD,WAAW,WAAapD,EAAIoD,WAAW,YAAa,CAC3DuI,EAAK3L,GAAO,CAAC2L,EAAK3L,GAAK,GAAI,UAC3B,KACF,CAGF,IAAK,MAAMA,KAAO2L,EACZ3L,EAAIoD,WAAW,SACjBuI,EAAK3L,GAAO,CAAC,IAAK2L,EAAK3L,GAAK,GAAGgB,UAAU,GAAI,gBACtChB,EAAIoD,WAAW,cACtBuI,EAAK3L,GAAO,CAAC2L,EAAK3L,GAAK,GAAI,WAG/B,OAAO2L,CACT,CACA,gBAAAE,CAAkBpM,GAChB,GAAa,KAATA,EACF,MAAO,GACT,IAAIqM,EAAS,QAKb,MAJa,iBAATrM,EACFqM,GAAU,gBACM,aAATrM,IACPqM,GAAU,aACLA,CACT,CACA,SAAAT,CAAW1H,GACT1I,KAAKD,KAAO2I,EACZ1I,KAAKgQ,SAASvN,QAAQqO,GAAMA,KAC5B9Q,KAAKmQ,OAAOzH,EACd,CAIA,MAAAyH,CAAQzH,GACN,IAAIuH,EAAUjQ,KAAK+K,OAAOzL,MAAM2Q,QAC5Bb,EAAOpP,KAAK+K,OAAOzL,MAAM8P,KACzB2B,EAAQ,GACRC,EAAOjB,EAAUM,OAAO3H,GAC5B,IAAa,IAATsI,EACF,OACe,gBAARA,IACPtI,EAAMqH,EAAUY,uBAAuBjI,IAEzC,IAAIuI,EAAWpR,EAAIuD,IAAI,mCACnB8N,EAAUrR,EAAIuD,IAAI,0BAClB+N,EAAOtR,EAAIuD,IAAI,QAEfiB,EAAIjF,OAAO0J,KAAKJ,GAAKnE,OAAS,GAAK,EAAI,EACvC6M,EAAO,QAAQC,OAAOhN,GACtBiN,EAAazR,EAAI2L,IAAI,MAAO,CAC9BC,UAAa,wBACbtK,MAAS,yBAAyBiQ,MAGhC1I,EAAIkF,eAAewB,IACrB2B,EAAQrI,EAAI0G,GAAM,GAClBa,EAAUvH,EAAI0G,GAAM,IAEpBvB,QAAQC,KAAK,2BAA2BsB,2EAA+E1G,GAGzH,IAAK,IAAI3D,KAAO2D,EAAK,CACnB,IAAI6I,EAAOxM,EAAIR,OAAS,EACbvE,KAAKgM,OAASjH,EAAM,IACpB/E,KAAKgM,OAChBuF,GAAQ,aACR,IAAIhF,EAAQ1M,EAAI2L,IAAI,SAAU,CAC5B6C,SAAYkD,IAEdhF,EAAMxK,iBAAiB,YAAcT,IACnCA,EAAG6M,mBAEL5B,EAAMxK,iBAAiB,UAAYT,IACjC,GAAiB,IAAbA,EAAGW,OAA4B,IAAbX,EAAGW,MACvB,OACF,MAAMgF,EAAuB,IAAb3F,EAAGW,MAEbwN,EAAQtQ,IAAIG,MAAM8P,KAAK7K,OAAS,EACxBvE,KAAKgM,OAAS7M,IAAIG,MAAM8P,KAAO,IAC/BpP,KAAKgM,OACnB,GAAI5F,SAASoB,KAAKW,WAAWsH,GAAQ,CACnC,MAAMJ,EAAWjJ,SAASoB,KAAKzB,UAAU0J,EAAMlL,QAC/C,IAAIwC,EAAM,IAAIsB,IAAIgH,EAAU9C,EAAMnM,QAAkB,UACpD2G,EAAIyK,KAAOpL,SAASoL,KACpB7L,EAAQmB,aAAaC,EAAKwF,EAAMnM,QAAkB,SAAG6G,EACvD,MACMA,EACFK,OAAOC,KAAKgF,EAAMnM,QAAkB,SAAG,UAAUa,QAEjDmF,SAASoB,KAAO+E,EAAMnM,QAAkB,WAG9C,IAAIqR,EAAS5R,EAAI2L,IAAI,OACjBkG,EAAS7R,EAAI2L,IAAI,OACrBiG,EAAOjR,UAAYkI,EAAI3D,GAAK,GAC5B,IAAIgM,EAAQlR,EAAI2L,IAAI,OAAQ,CAC1BC,UAAazL,KAAK4Q,iBAAiBlI,EAAI3D,GAAK,MAE9CgM,EAAMvQ,UAAYkI,EAAI3D,GAAK,GAC3B2M,EAAOnP,OAAOwO,GACdxE,EAAMhK,OAAOkP,GACblF,EAAMhK,OAAOmP,GACbJ,EAAW/O,OAAOgK,EACpB,CACInN,OAAO0J,KAAKJ,GAAKnE,QAAU,GAC7B+M,EAAWpQ,UAAU2C,IAAI,YAE3B,IAAI8N,EAAkB9R,EAAI2L,IAAI,MAAO,CACnC1K,GAAM,sCAERqQ,EAAK5O,OAAOoP,GACZR,EAAK5O,OAAO+O,GAEZ,IAAIrE,EAAYpN,EAAI2L,IAAI,MAAO,CAC7BC,UAAa,mBACbyC,MAAS,mBAEXjB,EAAUzM,UAAYyP,EACtB,IAAIyB,EAAS7R,EAAI2L,IAAI,OAAQ,CAC3BC,UAAazL,KAAK4Q,iBAAiBG,KAErCW,EAAOlR,UAAYuQ,EACnB9D,EAAU1K,OAAOmP,GAEjBT,EAASxC,sBAAsB,aAAcxB,GAC7C,IAAI2E,EAAa3E,EAAU3M,WAAU,GAErC2M,EAAUrL,QAAWN,IAAStB,KAAK6R,KAAK5E,GAAW,IACnD2E,EAAWhQ,QAAWN,IAAStB,KAAK6R,KAAKD,GAAY,IACrDD,EAAgB/P,QAAWN,IAAQtB,KAAK6R,UAAKlO,GAAW,IACxDmO,SAAYxQ,IAAStB,KAAK6R,UAAKlO,GAAW,IAC1CuN,EAAQ3O,OAAOqP,GAEf5R,KAAKC,EAAE8R,KAAOT,EACdtR,KAAKC,EAAE+R,OAAQL,CACjB,CAIA,IAAA5J,CAAMiI,GACAhQ,KAAK+K,OAAOzL,MAAM2Q,QACpBD,IAEAhQ,KAAKgQ,SAASrO,KAAKqO,EACvB,CACA,IAAA6B,CAAM/R,EAAK+R,GACT,IAAKA,EAGH,OAFA7R,KAAKC,EAAE+R,OAAO9Q,UAAU4B,OAAO,WAC/B9C,KAAKC,EAAE8R,KAAK7Q,UAAU4B,OAAO,MAI/B,IAAImP,EAAOnS,EAAIoS,wBACXC,EAAM7K,OAAO8K,WACjBpS,KAAKC,EAAE8R,KAAK5Q,MAAMkR,IAAM,GAAGJ,EAAKI,IAAM,OACjCF,EAAMF,EAAKK,MAASL,EAAKM,MAC5BvS,KAAKC,EAAE8R,KAAK5Q,MAAMqR,eAAe,QACjCxS,KAAKC,EAAE8R,KAAK5Q,MAAMmR,MAAWH,EAAMF,EAAKK,MAAd,OAE1BtS,KAAKC,EAAE8R,KAAK5Q,MAAMoR,KAAO,GAAGN,EAAKM,SACjCvS,KAAKC,EAAE8R,KAAK5Q,MAAMqR,eAAe,UAEnCxS,KAAKC,EAAE+R,OAAO9Q,UAAU2C,IAAI,MAC5B7D,KAAKC,EAAE8R,KAAK7Q,UAAU2C,IAAI,KAC5B,EC/QF,QAAsB,IAAX4O,EACT,IAAIA,EAAS,CAYXC,aAAc,GAEdC,gBAAiB,EAEjBC,QAAS,CACP,EAAG,GACH,EAAG,EACH,GAAG,GAGLC,eAAgB,EAGhB3E,MAAO,GACP4E,aAAc,EAEdC,KAAM,EACNC,YAAa,GAaV,MAAMC,EACX,WAAA/T,CAAaC,GACXa,KAAK+K,OAAS5L,EAEda,KAAKkT,MAAQ,CAAA,EACblT,KAAKmT,YAAc,CAAA,EACnBnT,KAAKoT,WAAa,CAAA,EAClBpT,KAAKqT,mBAAqB,CAAA,EAC1BrT,KAAKsT,YAAc,IAAIjL,IAAI,GAAGrI,KAAK+K,OAAOzL,MAAM8M,0BAA2BhG,UAAUiJ,SAErF,IAAIpP,EAAID,KAAKC,EAAI,CAAA,EACjBA,EAAEsT,YAAc,CAAA,EAChBtT,EAAEuT,WAAa,CAAA,EACfvT,EAAEwT,SAAW,CAAA,EACbxT,EAAEyT,SAAW,CAAA,EACbzT,EAAEkR,KAAO,IAAItR,EAAIA,EAAIuD,IAAI,SAEzBnD,EAAE0T,aAAe,IAAI9T,EAAIA,EAAIuD,IAAI,oBACR,OAArBnD,EAAE0T,aAAa1T,IACjBA,EAAE0T,aAAe,IAAI9T,EAAI,MAAO,CAC9B4L,UAAU,mBAEZxL,EAAEkR,KAAK5O,OAAO,CAACtC,EAAE0T,gBAEnB1T,EAAE0T,aAAa/R,QAAQ5B,KAAMA,KAAK4T,eAElC3T,EAAE4T,WAAa,IAAIhU,EAAIA,EAAIuD,IAAI,iBAC/BnD,EAAE6T,WAAa,IAAIjU,EAAIA,EAAIuD,IAAI,OAAQnD,EAAE4T,aACrC7T,KAAK+K,OAAOzL,MAAM6M,SACpBlM,EAAE6T,WAAW7T,EAAE8T,OAAS/T,KAAKsT,YAC7BrT,EAAE6T,WAAW7T,EAAEmH,OAAS,OAExBnH,EAAE6T,WAAW1R,QAAQ,SAAUpC,KAAOwB,IAAOA,EAAE2M,mBACjDlO,EAAE+T,iBAAmB,IAAInU,EAAIA,EAAIuD,IAAI,SAAUnD,EAAE6T,aAC9ClS,QAAQ5B,KAAMA,KAAK4T,eACtB3T,EAAEgU,YAAc,IAAIpU,EAAIA,EAAIuD,IAAI,QAASnD,EAAE6T,aAC3C7T,EAAEiU,WAAa,IAAIrU,EAAI,OAAQ,CAC7B4L,UAAW,gBACXG,SAAU,OACTrJ,OAAO,CACR,IAAI1C,EAAI,MAAO,CACb4L,UAAW,QACXjL,UAAW,cACV+B,OAAO,CACR,IAAI1C,EAAI,OAAQ,CACd4L,UAAW,UACXjL,UAAW,eAIjBP,EAAEkU,cAAgB,IAAItU,EAAI,KAAM,CAC9B4L,UAAW,iBACXG,SAAU,OAEZ3L,EAAEmU,gBAAkB,IAAIvU,EAAI,OAAQ,CAClC4L,UAAW,qBACV7J,QAAQ5B,KAAOwB,IACZA,EAAEqK,SAAW5L,EAAEmU,gBAAgBnU,GACjCD,KAAK4T,kBAGJ5T,KAAK+K,OAAOzL,MAAM6M,SACrBnM,KAAKC,EAAEmU,gBAAgB7R,OAAOvC,KAAKC,EAAEiU,YACvClU,KAAKC,EAAEmU,gBAAgB7R,OAAOvC,KAAKC,EAAEkU,eACrCnU,KAAKC,EAAE4T,WAAWtR,OAAO,CAACvC,KAAKC,EAAEmU,kBACjCnU,EAAE6T,WAAW7T,EAAU,OAAIJ,EAAIuD,IAAI,sBAAsBoE,KAEzDvH,EAAEoU,aAAe,IAAIxU,EAAIA,EAAIuD,IAAI,yBACR,OAArBnD,EAAEoU,aAAapU,IAClBA,EAAEoU,aAAe,IAAIxU,EAAI,SAAU,CAChCiB,GAAG,SACH2K,UAAU,OACVyC,MAAM,eAERlO,KAAK+K,OAAOuJ,WAAWrU,EAAEsU,YAAYhS,OAAO,CAACtC,EAAEoU,gBAEjDpU,EAAEoU,aAAazS,QAAQ5B,KAAM,KAC3BC,EAAE4T,WAAW3S,UAAU2C,IAAI,MAC3B5D,EAAE0T,aAAazS,UAAU2C,IAAI,MAC7B5D,EAAEgU,YAAYhT,QACdhB,EAAEgU,YAAYhU,EAAEuU,SAChBxU,KAAKC,EAAEkR,KAAKjQ,UAAU2C,IAAI,mBAC1B7D,KAAKyU,gBAGHzU,KAAK+K,OAAOzL,MAAM6M,QACpBnM,KAAK0U,oBAC+B,iBAAtB1U,KAAK+K,OAAO5D,MAC1BnH,KAAK+K,OAAO5D,MAAMY,KAAK/H,KAAKgL,UAAUC,KAAKjL,OAE3CA,KAAKgL,YAEP7L,EAAIkH,OAASrG,IACf,CASA,WAAA2U,CAAaC,GACV,OAAOA,EACHxM,MAAM,qDACNjD,OAAO4N,GAAQA,EACtB,CACA,aAAAa,GACE5T,KAAKC,EAAE4T,WAAW3S,UAAU4B,OAAO,MACnC9C,KAAKC,EAAE0T,aAAazS,UAAU4B,OAAO,MACrC9C,KAAKC,EAAEkR,KAAKjQ,UAAU4B,OAAO,mBAC7B,IAAIiE,EAAM,IAAIsB,IAAIjC,UAClBW,EAAI8N,aAAanK,OAAO,KACxB3D,EAAI8N,aAAanK,OAAO,KACxBoK,QAAQC,aAAa,GAAI,KAAMhO,EACjC,CAOCiO,6BAA+B,CAAChS,EAAGK,KAClC,MAAM4R,EAAYjS,EAAE,GACdkS,EAAa7R,EAAE,GACrB,GAAI4R,IAAcC,EAAY,CAE5B,MAAMC,EAAYnS,EAAE,GAAGoS,cACjBC,EAAahS,EAAE,GAAG+R,cACxB,OAAID,IAAcE,EAAmB,EAC9BF,EAAYE,GAAa,EAAK,CACvC,CACA,OAAOJ,EAAYC,EAAa,GAAI,GAEtC,qBAAMI,CAAgBvQ,EAAKwQ,EAAgBtF,EAAQ,MACjD,MAAMjE,EAASuJ,GAA0B,UAARxQ,EAClBqB,SAASkJ,OAAS,GAAGtP,KAAK+K,OAAOzL,MAAM4L,SAASe,aAAalH,IAC5E,IAAIyQ,EAAiBC,IACnB,IAAIrG,EASJ,OAPEA,EADEqG,EAAIjP,SAAS,IACR,GACDiP,EAAIjP,SAAS,QACZ,OACAiP,EAAIC,KAAKhT,GAAQA,EAAK8D,SAAS,aAC/B,GAAGiP,EAAIE,KAAKjT,GAAQA,EAAK8D,SAAS,eAElC,GAAGiP,EAAIG,GAAG,MACZxG,GAELyG,EAAWnN,IACb,IAAI0G,EAAO,GACX,GAAM,UAAW1G,EA6Bb1I,KAAKmT,YAAYpO,GAAKkL,QAAU,KAChCjQ,KAAKC,EAAEuT,WAAWzO,GAAKvE,UAAY,QA9BhB,CACrB,IAAIwQ,EAAOjB,EAAUM,OAAO3H,EAAS,KACrC,IAAa,IAATsI,EACF,OAAOhF,EAGPhM,KAAKqT,mBAAmBtO,GADd,gBAARiM,EAC6BtI,EAAS,IAETqH,EAAUY,uBAAuBjI,EAAS,KAE/D,gBAARsI,IACFtI,EAAS,IAAIqH,EAAUU,uBAAuB/H,EAAS,MACzD,IAAI+M,EAAM/M,EAAS,IAEf3D,KAAO/E,KAAKqT,mBACVpD,KAAWjQ,KAAKqT,mBAAmBtO,IACrCqK,EAAOa,EACPjQ,KAAKC,EAAEuT,WAAWzO,GAAKvE,UAAYR,KAAKqT,mBAAmBtO,GAAKkL,GAAS,KAEzEb,EAAOoG,EAAcC,GACrBzV,KAAKmT,YAAYpO,GAAKkL,QAAU,KAChCjQ,KAAKC,EAAEuT,WAAWzO,GAAKvE,UAAYR,KAAKqT,mBAAmBtO,GAAKqK,GAAM,KAGxEA,EAAOoG,EAAcC,GACrBzV,KAAKmT,YAAYpO,GAAKkL,QAAU,KAChCjQ,KAAKC,EAAEuT,WAAWzO,GAAKvE,UAAY,IAEvC,CAIA,OAAO4O,EAAK7K,OAAS,EAAI,GAAGyH,KAAUoD,KAAU,GAAGpD,MAGrD,aAAarG,EAAQ4C,WAAW,GAAGyD,eAAoBjE,KAAMW,IAC3D1I,KAAKoT,WAAWrO,GAAO8Q,EAAQnN,GAExB,GAAG1I,KAAKoT,WAAWrO,oBAE9B,CACA,SAAA+Q,CAAW/Q,EAAKzD,GACd,GAAIA,EAAGuK,OAAOC,QAAS,CACrB,IAAwC,IAApC9L,KAAKmT,YAAYpO,GAAKgR,UAAqB,CAC7C,IAAIR,EAA+C,KAA9BvV,KAAK+K,OAAOzL,MAAMC,cAAgDoE,IAA9B3D,KAAK+K,OAAOzL,MAAMC,QAC3E,MAAMyW,EAAmBhW,KAAKmT,YAAYpO,GAAKkL,QAU/C,YATAjQ,KAAKsV,gBAAgBvQ,EAAKwQ,EAAgBS,GACvCjO,KAAMhB,IACL,IAAIkP,EAAU,IAAI5N,IAAItB,GACtB/G,KAAKkW,WAAWD,EAAQzO,KAAMzC,GAC9B/E,KAAKmT,YAAYpO,GAAKgR,WAAY,EAClC/V,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU2C,IAAI,aACtC7D,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU4B,OAAO,UACzC9C,KAAKmW,gBAGX,CACEnW,KAAK4U,MAAM5U,KAAKC,EAAEgU,YAAYhU,EAAEc,MAEpC,MACEf,KAAKoW,wBAAwBpW,KAAKC,EAAEgU,YAAYhU,EAAEc,OAEpDf,KAAKmW,cACP,CACA,YAAAA,GACE,IAAIE,EAAY,GAChB,IAAK,MAAOtR,EAAKhE,KAAU3B,OAAOiN,QAAQrM,KAAKmT,cACH,IAAtCnT,KAAKC,EAAEsT,YAAYxO,GAAK9E,EAAE6L,UAAoD,IAAhC9L,KAAKmT,YAAYpO,GAAKuR,OAChEvR,KAAO/E,KAAKC,EAAEwT,WAClBzT,KAAKC,EAAEwT,SAAS1O,GAAO,IAAIlF,EAAI,MAC/BG,KAAKC,EAAEyT,SAAS3O,GAAO,IAAIlF,EAAI,MAAM0C,OAAO,CAC1C,IAAI1C,EAAI,MAAO,CACbW,UAAWR,KAAKC,EAAEsT,YAAYxO,GAAK9E,EAAE2C,OAEvC5C,KAAKC,EAAEwT,SAAS1O,KAElBsR,EAAU1U,KAAK3B,KAAKC,EAAEyT,SAAS3O,KAEjC/E,KAAKC,EAAEyT,SAAS3O,GAAK7D,UAAU2C,IAAI,OAE/BkB,KAAO/E,KAAKC,EAAEwT,UAChBzT,KAAKC,EAAEyT,SAAS3O,GAAK7D,UAAU4B,OAAO,MAG5CuT,EAAU5T,QAASC,IACjB1C,KAAKC,EAAEkU,cAAclU,EAAEwO,sBAAsB,aAAc/L,EAAKzC,IAEpE,CACA,WAAAwU,GAEE,IAAK,MAAO1P,EAAKhE,KAAU3B,OAAOiN,QAAQrM,KAAKC,EAAEsT,aAC/C,GAAIxS,EAAMd,EAAE6L,QACV,OAMJ,IAAI/G,EAAoC,KAA9B/E,KAAK+K,OAAOzL,MAAMC,cAAgDoE,IAA9B3D,KAAK+K,OAAOzL,MAAMC,SAAyBS,KAAK+K,OAAOzL,MAAMI,WACjG,QAAUM,KAAK+K,OAAOzL,MAAMG,gBACJkE,IAA9B3D,KAAK+K,OAAOzL,MAAM2Q,UAClBjQ,KAAKmT,YAAYpO,GAAKkL,QAAUjQ,KAAK+K,OAAOzL,MAAM8P,MACtD,IAAI/M,EAAQ,IAAI8K,MAAM,UAChBpI,KAAO/E,KAAKC,EAAEsT,cAEpBvT,KAAKC,EAAEsT,YAAYxO,GAAK9E,EAAE6L,SAAU,EACpC9L,KAAKC,EAAEsT,YAAYxO,GAAK9E,EAAEmN,cAAc/K,GAC1C,CAEA,eAAAkU,CAAiB/U,GACE,WAAXA,EAAEgV,MAAgC,UAAXhV,EAAEgV,OACd,SAAXhV,EAAEgV,OAAoBhV,EAAEiV,UAAWjV,EAAEkV,SACnC1W,KAAKC,EAAE4T,WAAW3S,UAAU0C,SAAS,MAOvB,WAAXpC,EAAEgV,MACPxW,KAAKC,EAAE4T,WAAW3S,UAAU0C,SAAS,OACvC5D,KAAK4T,iBARP5T,KAAKC,EAAE4T,WAAW3S,UAAU2C,IAAI,MAChC7D,KAAKC,EAAE0T,aAAazS,UAAU2C,IAAI,MAClC7D,KAAKC,EAAEkR,KAAKjQ,UAAU2C,IAAI,mBAC1B7D,KAAKC,EAAEgU,YAAYhT,QACnBjB,KAAKC,EAAEgU,YAAYhU,EAAEuU,SACrBxU,KAAKyU,cAMT,CAIAyB,WAAa,CAACnP,EAAKhC,KACjB,IAAI4R,EAAa/O,IACfiG,QAAQC,KAAKlG,GACb5H,KAAKmT,YAAYpO,GAAKgR,WAAY,EAClC/V,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU4B,OAAO,aACzC9C,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU2C,IAAI,UACtC7D,KAAKC,EAAEsT,YAAYxO,GAAK9E,EAAE6L,SAAU,GAEtC,MAAMjE,EAAU,IAAIC,QAAQf,GAC5BI,MAAOU,GACJE,KAAMC,GAAaA,EAASxD,QAC5BuD,KAAMvD,IACL,IACE,GAA6B,oBAAzBA,EAAKuB,UAAU,EAAG,KAA8D,KAAjCvB,EAAKuB,UAAUvB,EAAKD,OAAO,GAC5E,MAAM,IAAI2D,MAAM,wBAAwBnD,8BAC1C/E,KAAKkT,MAAMnO,GAAO6R,KAAKC,MAAMrS,EAAKuB,UAAU,GAAIvB,EAAKD,OAAO,IAC5DvE,KAAKmT,YAAYpO,GAAKuR,OAAQ,EAC9BtW,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU4B,OAAO,aACzC9C,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU2C,IAAI,SACtC7D,KAAK4U,MAAM5U,KAAKC,EAAEgU,YAAYhU,EAAEc,MAClC,CAAE,MAAO6G,GACP+O,EAAU/O,EACZ,IAEDU,MAAMqO,IAKX,qBAAAG,CAAuBC,EAAQC,EAAaC,GAC1C,MAAMC,EAAYlX,KAAKkT,MAAM+D,GAAUC,UACjCC,EAAWnX,KAAKkT,MAAM+D,GAAUG,SAChCC,EAAUrX,KAAKkT,MAAM+D,GAAUI,QAC/BC,EAAWtX,KAAKkT,MAAM+D,GAAUM,SAChCC,EAASxX,KAAKkT,MAAM+D,GAAUO,OAE9BC,EAAU,GA2DhB,OALArY,OAAO0J,KAAKuO,GAAS5U,QAASuJ,GAC5BqL,EAAQrL,GAAQvJ,QAASiV,GArDE,EAAC1L,EAAQnF,KACpC,MAAMjE,EAAOiE,EAAM,GACb8Q,GAAY3L,EAASA,EAAS,IAAM,IAAMpJ,EAC1CgV,EAAgBD,EAASvC,cAC/B,GAAIwC,EAAcC,QAAQd,GAAU,EAAG,OAEvC,IAAIe,EAAQ,EACZ,MAAMC,EAAQH,EAAcxP,MAAM,KAI9BwP,IAAkBb,GAAUgB,EAAMC,UAAU,KAAOjB,EACrDe,GAASrF,EAAOC,aACTqF,EAAMC,UAAU,GAAGH,QAAQd,IAAU,IAC5Ce,GAASrF,EAAOE,iBAElB,MAAMsF,EAAUX,EAASzQ,EAAM,IAAI,GAC7BqH,EAAQsJ,EAAO3Q,EAAM,IAIrBqR,EAAa,IAAI7N,IAAI2M,GAE3B,GADAkB,EAAWxN,OAAOqM,GACdmB,EAAWC,KAAO,EAAG,CACvB,MAAMC,EAAW,GAAGpM,KAAUpJ,KAAQqV,KAAW/J,IAAQkH,cACzD,GACE,IAAI8C,GAAYxC,KAAM2C,GAAcD,EAASP,QAAQQ,GAAa,GAElE,MACJ,CAEA,IAAIC,EAASzR,EAAM,GACJ,KAAXyR,EAAeA,EAASX,EACR,MAAXW,IAAgBA,EAAShB,EAASzQ,EAAM,IAAI,GAAK,IAAM8Q,GAEhE,MAAMY,EAAQN,EAAU,QAAU/J,EAG9BuE,EAAOG,QAAQhF,eAAe/G,EAAM,IACtCiR,GAASrF,EAAOG,QAAQ/L,EAAM,IAC3BiR,GAASrF,EAAOI,eAErB4E,EAAQ9V,KAAK,CACXwV,EAAStQ,EAAM,IACf8Q,EACA,IAAMW,EACNC,EACAT,EACAZ,EAAUrQ,EAAM,IAChB,YAKA2R,CAAqBxM,EAAQ0L,KAG1BD,CACT,CAIA,oBAAAgB,CAAsBC,EAAaC,EAAe1B,GAEhD,MAAM2B,EAAQ5Y,KAAKkT,MAAM+D,GAAU2B,MAC7BC,EAAa7Y,KAAKkT,MAAM+D,GAAU6B,WAClC5B,EAAYlX,KAAKkT,MAAM+D,GAAUC,UACjCC,EAAWnX,KAAKkT,MAAM+D,GAAUG,SAChCI,EAASxX,KAAKkT,MAAM+D,GAAUO,OAO9BuB,EAAW,IAAIC,IACfC,EAAU,IAAID,IAGpBN,EAAYjW,QAASyW,IACnB,MAAMC,EAAQ,GAGR1D,EAAM,CACV,CAAE0D,MAAOP,EAAMhL,eAAesL,GAAQN,EAAMM,QAAQvV,EAAWmU,MAAOrF,EAAOM,MAC7E,CAAEoG,MAAON,EAAWjL,eAAesL,GAAQL,EAAWK,QAAQvV,EAAWmU,MAAOrF,EAAOvE,QAGzF,GAAIgL,EAAK3U,OAAS,EAAG,CACnB,MAAM6U,EAA4BF,EA3ZjCvS,QAAQ,wBAAyB,QA4Z7BiS,EAAMhL,eAAesL,IACxB9Z,OAAO0J,KAAK8P,GAAOnW,QAASsQ,IACtBA,EAAKlM,MAAMuS,IACb3D,EAAI9T,KAAK,CAAEwX,MAAOP,EAAM7F,GAAO+E,MAAOrF,EAAOO,gBAG9C6F,EAAWjL,eAAesL,IAC7B9Z,OAAO0J,KAAK+P,GAAYpW,QAASsQ,IAC3BA,EAAKlM,MAAMuS,IACb3D,EAAI9T,KAAK,CAAEwX,MAAON,EAAW9F,GAAO+E,MAAOrF,EAAOK,gBAG1D,CAGI2C,EAAInF,MAAO+I,QAA4B1V,IAAjB0V,EAAOF,SAGjC1D,EAAIhT,QAAS4W,IACX,QAAqB1V,IAAjB0V,EAAOF,MAAqB,OAEhC,IAAIG,EAAcD,EAAOF,WACExV,IAAvB2V,EAAY/U,SAAsB+U,EAAc,CAACA,IACrDH,EAAMxX,QAAQ2X,GAGdA,EAAY7W,QAAS8W,IACdR,EAAStO,IAAI8O,IAAOR,EAASS,IAAID,EAAM,IAAIP,KAC7BD,EAAS3V,IAAImW,GACrBC,IAAIN,EAAMG,EAAOvB,WAKhCqB,EAAM1W,QAAS8W,IACRN,EAAQxO,IAAI8O,IAC4B,IAApCN,EAAQ7V,IAAImW,GAAM1B,QAAQqB,IAAcD,EAAQ7V,IAAImW,GAAM5X,KAAKuX,GADhDD,EAAQO,IAAID,EAAM,CAACL,SAM/C,MAAMzB,EAAU,GAChB,IAAK,MAAO8B,EAAME,KAAaR,EAAS,CAItC,MAAMS,EAAoB,IAAIhB,GAAavT,OACxC4N,GAASA,EAAKxO,OAAS,GACxBA,OACF,GACEkV,EAASlV,SAAWmU,EAAYP,MAChCsB,EAASlV,SAAWmV,EAEpB,SAGF,GACE,IAAIf,GAAejD,KAChB3C,GACC6F,EAAM7F,KAAUwG,GAChBV,EAAW9F,KAAUwG,IACpBX,EAAM7F,IAAS,IAAIvM,SAAS+S,KAC5BV,EAAW9F,IAAS,IAAIvM,SAAS+S,IAGtC,MAGF,MAAMzB,EAAQ7T,KAAKgG,OAAOwP,EAASjU,IAAKmU,GAAMZ,EAAS3V,IAAImW,GAAMnW,IAAIuW,KAErElC,EAAQ9V,KAAK,CACXwV,EAASoC,GACT/B,EAAO+B,GACP,GACA,KACAzB,EACAZ,EAAUqC,GACV,QAEJ,CACA,OAAO9B,CACT,CAIA,cAAAmC,CAAgBhF,EAAO8D,EAAaC,EAAekB,EAAgB7C,EAAaC,GAC9E,MAAMC,EAAYlX,KAAKkT,MAAM+D,GAAUC,UACjCC,EAAWnX,KAAKkT,MAAM+D,GAAUG,SAChCI,EAASxX,KAAKkT,MAAM+D,GAAUO,OAC9BsC,EAAY9Z,KAAKkT,MAAM+D,GAAU8C,UACjCC,EAAeha,KAAKkT,MAAM+D,GAAUgD,aAIpCC,EAAgB,GAChBC,EAAsB,GAItBC,EAAaxF,EAAMQ,cAAciF,OACvC,IAAK,MAAOnM,EAAOoM,KAAgBlb,OAAOiN,QAAQyN,GAChD,GAAI5L,EAAMkH,cAAciF,OAAO7T,SAAS4T,IAAgBA,EAAW7V,QAAU2J,EAAM3J,OAAO,EACxF,IAAK,MAAOgV,EAAMzY,KAAOwZ,EAAa,CACpC,MAAMxC,EAAQ7T,KAAKsW,MAAM9H,EAAOvE,MAAQkM,EAAW7V,OAAS2J,EAAM3J,QAC5DiW,EAAQhD,EAAO+B,KAAUrL,EAAQ,EAAI,EAC3CgM,EAAcvY,KAAK,CACjBwV,EAASoC,GACT/B,EAAO+B,KAAUrL,EAAQ,GAAGsJ,EAAO+B,QAAWrL,IAAUA,EACjD,OAAPpN,EAAc,IAAMA,EAAK,GACzB,KACAgX,EAAQ0C,EACRtD,EAAUqC,GACV,SAEJ,CAKJ,IAAK,MAAOhN,EAAOkO,KAAiBrb,OAAOiN,QAAQ2N,GACjD,GAAIzN,EAAM/F,SAAS4T,IAAgBA,EAAW7V,QAAUgI,EAAMhI,OAAO,EACnE,IAAK,MAAOgV,EAAMzY,EAAI4Z,KAAWD,EAAc,CAC7C,MAAM3C,EAAQ7T,KAAKsW,MAAM,IAAMH,EAAW7V,OAASgI,EAAMhI,QACnDoW,EAAS,CACbxD,EAASoC,GACT/B,EAAO+B,GACPzY,EAAK,IAAMA,EAAK,GAChB,KACAgX,EACAZ,EAAUqC,GACV,SAEEmB,EACFR,EAAcvY,KAAKgZ,GAEnBR,EAAoBxY,KAAKgZ,EAE7B,CAKJ3D,EAAYvU,QAASsQ,GACnBmH,EAAcvY,QAAQ3B,KAAK8W,sBAAsB/D,EAAMiE,EAAaC,KAItEiD,EAAcvY,QAAQ3B,KAAKyY,qBAAqBC,EAAaC,EAAe1B,IAGxExE,EAAOqF,QACToC,EAAczX,QAASC,GAAUA,EAAK,GAAK+P,EAAOqF,MAAMpV,IACxDyX,EAAoB1X,QAASC,GAAUA,EAAK,GAAK+P,EAAOqF,MAAMpV,KAIhEwX,EAAcU,KAAK5a,KAAKgV,8BACxBmF,EAAoBS,KAAK5a,KAAKgV,8BAK9B,IAAIyC,EAAU,IAAI0C,KAAwBD,GAItCW,EAAO,IAAIxQ,IAUf,OATAoN,EAAUA,EAAQqD,UAAUC,OAAO,CAACC,EAAKL,KACvC,IAAIM,EAAYN,EAAO3C,MAAM,EAAG,GAAG/O,OAAO,CAAC0R,EAAO,KAAKnV,IAAI0V,GAAKnS,OAAOmS,IAAIxV,KAAK,KAKhF,OAJKmV,EAAKpQ,IAAIwQ,KACZD,EAAIrZ,KAAKgZ,GACTE,EAAKhX,IAAIoX,IAEJD,GACN,IAEIvD,EAAQqD,SACjB,CACA,uBAAA1E,CAAyBxB,GACvB,MAAMuG,EAAc,GACpB,IAAK,MAAOpW,EAAKhE,KAAU3B,OAAOiN,QAAQrM,KAAKmT,cACH,IAAtCnT,KAAKC,EAAEsT,YAAYxO,GAAK9E,EAAE6L,cAAwCnI,IAApB3D,KAAKkT,MAAMnO,KAClC,OAArBhE,EAAe,QACjBoa,EAAYxZ,KAAKoD,GAEjBoW,EAAYxZ,KAAK,GAAGoD,KAAOhE,EAAe,YAIhD,IAAIgG,EAAM,IAAIsB,IAAIjC,UASlB,OARIwO,EAAMrQ,OAAS,GACjBwC,EAAI8N,aAAa2E,IAAI,IAAK5E,GAC1B7N,EAAI8N,aAAa2E,IAAI,IAAK2B,KAE1BpU,EAAI8N,aAAanK,OAAO,KACxB3D,EAAI8N,aAAanK,OAAO,MAE1BoK,QAAQC,aAAa,GAAI,KAAMhO,GACxBoU,CACT,CACA,YAAAC,CAAc5W,EAAM8T,GAClB,MAAM+C,GAAc,IAAIC,WAAYC,gBAAgB/W,EAAM,aAC1D,IAAK,MAAMgX,IAAgB,CAAC,cAAe,SAAU,SACnDH,EAAY9X,iBAAiBiY,GAAc/Y,QAASgZ,IAASA,EAAG3Y,WAElE,GAAIwV,EAAQ,CACV,MAAMoD,EAAgBL,EAAYzb,cAAc,iBAAiB0Y,KACjE,GAAIoD,EACF,OAAOA,EAAcjW,YAEvBoI,QAAQC,KAAK,uCAAuCwK,gBACtD,CAGA,MAAMqD,EAAaN,EAAYzb,cAAc,iBAC7C,OAAI+b,EACKA,EAAWlW,aAEpBoI,QAAQC,KAAK,uCAAuCwK,iBAC7C,GACT,CACA,WAAAsD,CAAaC,EAAMC,EAAUxD,EAAQyD,GACnC,MAAMvX,EAAOxE,KAAKob,aAAaS,EAAMvD,GACrC,GAAa,KAAT9T,EACF,OAEF,MAAMwX,EAAYxX,EAAK4Q,cACjB6G,EAAsB,IAAIH,GAC7BtW,IAAKgF,GAAMwR,EAAUnE,QAAQrN,EAAE4K,gBAC/BjQ,OAAQd,GAAMA,GAAI,GAClB2T,OAAM,GAAI,GACPkE,EAAmBjY,KAAKgG,IAAIgS,EAAsB,IAAK,GAEvD5J,EAA2B,IAArB6J,EAAyB,GAAK,MACpCC,EAAOD,EAAmB,IAAM1X,EAAKD,OAAS,MAAQ,GAE5DwX,EAAG9b,EAAEwF,YAAc4M,EAAM7N,EAAKL,OAAO+X,EAAkB,KAAK7B,OAAS8B,EACrEJ,EAAG9b,EAAEiB,UAAU4B,OAAO,UACxB,CACA,KAAA8R,CAAOA,GAEL,GAAuB,oBAAZwH,QACT,OAEF,MAAOC,EAAa3D,EAAaC,EAAekB,EAAgB7C,GAAehX,KAAKsc,YAAY1H,GAChG5U,KAAKmW,eACanW,KAAKoW,wBAAwBxB,GACnCnS,QAASsC,IACnBA,EAAMA,EAAIqD,MAAM,KAChB,MAAMqP,EAAUzX,KAAK4Z,eAAeyC,EAAa3D,EAAaC,EAAekB,EAAgB7C,EAAajS,EAAI,IAC9G,KAAO/E,KAAKC,EAAEwT,SAAS1O,EAAI,IAAI9E,EAAEsc,mBAC/Bvc,KAAKC,EAAEwT,SAAS1O,EAAI,IAAI9E,EAAEkD,YAAYnD,KAAKC,EAAEwT,SAAS1O,EAAI,IAAI9E,EAAEuc,WAGlE,IAAIC,EAAiB,GACrBhF,EAAQqD,UACRrD,EAAQhV,QAASC,IACf,MAAOga,EAASxO,EAAOoK,EAAQC,EAAOT,EAAO6E,EAAWC,GAAQla,EAChE,IAAIma,EAAQ,GAAG7c,KAAKoT,WAAWrO,EAAI,MAAM2X,SAAepE,IACpDwE,EAAM,IAAIjd,EAAI,MAAM0C,OACtB,IAAI1C,EAAI,IAAK,CACX2H,KAAMqV,EACNrc,UAAW0N,KAIf,GAAIqK,EACFuE,EAAIva,OACF,IAAI1C,EAAI,OAAQ,CACdW,UAAW,IAAI+X,YAGd,CACL,IAAIwD,EAAK,IAAIlc,EAAI,IAAK,CACpB4L,UAAW,YAIb,MAAMsR,EAAWC,WAAW,KAC1BjB,EAAG7a,UAAU2C,IAAI,YAChB,IACHiZ,EAAIva,OAAOwZ,GACX5U,MAAM0V,GACH9U,KAAMC,GAAaA,EAASxD,QAC5BuD,KAAM8T,IACDA,GACF7b,KAAK4b,YAAYC,EAAMnD,EAAaJ,EAAQyD,KAG/CkB,QAAQ,KACPC,aAAaH,IAEnB,CACAN,EAAe9a,KAAKmb,KAEtB9c,KAAKC,EAAEwT,SAAS1O,EAAI,IAAIxC,OAAOka,GACR,IAAnBhF,EAAQlT,OACVvE,KAAKC,EAAEyT,SAAS3O,EAAI,IAAI7D,UAAU2C,IAAI,SAEtC7D,KAAKC,EAAEyT,SAAS3O,EAAI,IAAI7D,UAAU4B,OAAO,UAG/C,CACA,WAAAwZ,CAAa1H,GAEX,MAAMuI,EAAU,IAAIf,QACd1D,EAAc,IAAIrO,IAClBsO,EAAgB,IAAItO,IACpBwP,EAAiB,IAAIxP,IACrB2M,EAAc,IAAI3M,IAAIrK,KAAK2U,YAAYC,EAAMQ,cAAciF,SA8BjE,OA7BAra,KAAK2U,YAAYC,EAAMyF,QAAQ5X,QAAS2a,IACtC,MAAMC,EAAiBD,EAAUhI,cAGjC,GAAIkI,qBAAqBjT,KAEvB,GAAIiT,UAAU7S,IAAI4S,IAAmBD,EAAUvW,MAAM,SACnD,YAGF,IACuC,IAAtCyW,UAAUzF,QAAQwF,IAClBD,EAAUvW,MAAM,SAEf,OAIJ,IAAIqS,EAAOiE,EAAQI,SAASF,GAEZ,MAAZnE,EAAK,GAAYP,EAAc9U,IAAIqV,EAAK/U,OAAO,KAEjDuU,EAAY7U,IAAIqV,GAChBW,EAAehW,IAAIwZ,MAIvBG,aAAaC,QAAQ,yBAA0B,IAAI5D,GAAgBnU,KAAK,MAEjE,CAACkP,EAAO8D,EAAaC,EAAekB,EAAgB7C,EAC7D,CACA,kBAAA0G,CAAoBlc,GACbxB,KAAKC,EAAE4T,WAAW3S,UAAU0C,SAAS,OACrC5D,KAAKC,EAAEiU,WAAWhT,UAAU0C,SAAS,OAE1CxE,OAAOue,OAAO3d,KAAKC,EAAEsT,aAAa9Q,QAAQmb,IACxC,GAAIA,EAAS3d,EAAEG,QAAkB,UAAKoB,EAAEuD,IAAK,CAC3CvD,EAAE2M,iBACF,IAAI9L,EAAQ,IAAI8K,MAAM,UACtByQ,EAAS3d,EAAE6L,SAAW8R,EAAS3d,EAAE6L,QACjC8R,EAAS3d,EAAEmN,cAAc/K,EAC3B,GAEJ,CACA,KAAAwb,CAAOrc,GACL,OAAQA,EAAEgV,MACR,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,OACHxW,KAAKuW,gBAAgB/U,GACrB,MACF,IAAK,cACL,IAAK,eACHxB,KAAKC,EAAEiU,WAAWhT,UAAU4B,OAAO,MAGzC,CACA,OAAAgb,CAAStc,GACP,OAAQA,EAAEgV,MACR,IAAK,SACL,IAAK,QACHhV,EAAE2M,iBACF,MACF,IAAK,OACC3M,EAAEiV,SAAWjV,EAAEkV,QACjBlV,EAAE2M,iBACJ,MACF,IAAK,cACL,IAAK,eACHnO,KAAKC,EAAEiU,WAAWhT,UAAU2C,IAAI,MAGpC7D,KAAK0d,mBAAmBlc,EAC1B,CACA,KAAAP,CAAOO,GAEDxB,KAAKC,EAAEiU,WAAWhT,UAAU0C,SAAS,OACrC5D,KAAKC,EAAEiU,WAAWhT,UAAU4B,OAAO,KACzC,CACA,YAAAib,CAAchZ,EAAKnC,EAAMob,GACvBhe,KAAKmT,YAAYpO,GAAO,CACtBuR,OAAO,EACPP,WAAW,GAGb,IAAIkI,EAAS,IAAIpe,EAAI,QAAS,CAC5BiB,GAAI,OAAOiE,IACXmZ,KAAM,WACNtb,KAAMA,EACNob,SAAUA,IACT5c,SAASpB,KAAMA,KAAK8V,UAAW,CAAC/Q,IAE/BoZ,EAAiB,IAAIte,EAAI,SAAU,CACrC4L,UAAW,iBACXyC,MAAO,2BACP1N,UAAW,QAEb2d,EAAevc,QAAQ5B,KAAM,CAAC+E,EAAKvD,KACjCxB,KAAKoe,sBAAsBrZ,EAAKoZ,IAC/B,CAACpZ,IAEJ/E,KAAKC,EAAEiU,WAAW3R,OAAO,CACvB,IAAI1C,EAAI,OAAQ,CACd4L,UAAW,iBACVlJ,OAAO,CACR0b,EACA,IAAIpe,EAAI,QAAS,CACfwe,QAAS,OAAOtZ,MACfxC,OAAO,CACR,IAAI1C,EAAI,OAAQ,CACdW,UAAWwd,EACXvS,UAAW,aAEb,IAAI5L,EAAI,OAAQ,CACdW,UAAWoC,MAGfub,MAGJne,KAAKC,EAAEuT,WAAWzO,GAAOoZ,EACzBne,KAAKC,EAAEsT,YAAYxO,GAAOkZ,CAC5B,CACA,gBAAArN,CAAkBpM,GAChB,GAAa,KAATA,EACF,MAAO,GACT,IAAIqM,EAAS,QAKb,MAJa,iBAATrM,EACFqM,GAAU,gBACM,aAATrM,IACPqM,GAAU,aACLA,CACT,CAIA,qBAAAuN,CAAsBrZ,EAAKoZ,EAAgB7c,GACzC,IAAIoH,EAAM1I,KAAKqT,mBAAmBtO,GAC7B2D,IACHmF,QAAQC,KAAK,kCAAkC/I,KAC/C2D,EAAM,CAAA,GAGR1I,KAAKse,0BAEL,IAAIja,EAAIjF,OAAO0J,KAAKJ,GAAKnE,OAAS,GAAK,EAAI,EACvC6M,EAAO,QAAQC,OAAOhN,GAC1BrE,KAAKC,EAAE8R,KAAK5Q,MAAQ,yBAAyBiQ,IACzChS,OAAO0J,KAAKJ,GAAKnE,QAAU,EAC7BvE,KAAKC,EAAE8R,KAAK7Q,UAAU2C,IAAI,YAE1B7D,KAAKC,EAAE8R,KAAK7Q,UAAU4B,OAAO,YAE/B,IAAK,IAAImN,KAAWvH,EAAK,CACvB,IAAI6D,EAAQ1M,EAAI2L,IAAI,SAAU,CAC5ByE,QAAWA,IAEb1D,EAAMxK,iBAAiB,YAAcT,IACnCA,EAAG6M,mBAEL5B,EAAMxK,iBAAiB,UAAYT,IAChB,IAAbA,EAAGW,OAA4B,IAAbX,EAAGW,QAGzBX,EAAG6M,iBACHnO,KAAKue,eAAexZ,EAAKkL,MAE3B,IAAIwB,EAAS5R,EAAI2L,IAAI,OACjBkG,EAAS7R,EAAI2L,IAAI,OACrBiG,EAAOjR,UAAYkI,EAAIuH,GAAS,GAChC,IAAIc,EAAQlR,EAAI2L,IAAI,OAAQ,CAC1BC,UAAazL,KAAK4Q,iBAAiBlI,EAAIuH,GAAS,MAElDc,EAAMvQ,UAAYkI,EAAIuH,GAAS,GAC/ByB,EAAOnP,OAAOwO,GACdxE,EAAMhK,OAAOkP,GACblF,EAAMhK,OAAOmP,GACb1R,KAAKC,EAAE8R,KAAKxP,OAAOgK,EACrB,CAEAvM,KAAK6R,KAAKsM,EAAele,GAAG,EAC9B,CAIA,uBAAAqe,GACE,KAAOte,KAAKC,EAAE8R,KAAKwK,mBACjBvc,KAAKC,EAAE8R,KAAK5O,YAAYnD,KAAKC,EAAE8R,KAAKyK,UAExC,CAIA,oBAAM+B,CAAexZ,EAAKkL,GAKxB,GAJAjQ,KAAKmT,YAAYpO,GAAKkL,QAAUA,EAEE,KAAZA,GAA0BjQ,KAAKqT,mBAAmBtO,GAAKkL,GAAS,GAElFjQ,KAAKC,EAAEsT,YAAYxO,GAAK9E,EAAE6L,SAAW9L,KAAKmT,YAAYpO,GAAKuR,MAAO,CACpEtW,KAAKmT,YAAYpO,GAAKuR,OAAQ,EAC9BtW,KAAKmT,YAAYpO,GAAKgR,WAAY,EAClC/V,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU4B,OAAO,SACzC9C,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU2C,IAAI,aAEtC,IAAI0R,EAA+C,KAA9BvV,KAAK+K,OAAOzL,MAAMC,cAAgDoE,IAA9B3D,KAAK+K,OAAOzL,MAAMC,QAC3ES,KAAKsV,gBAAgBvQ,EAAKwQ,EAAgBtF,GACvClI,KAAMhB,IACL,IAAIkP,EAAU,IAAI5N,IAAItB,GACtB/G,KAAKkW,WAAWD,EAAQzO,KAAMzC,GAC9B/E,KAAKmT,YAAYpO,GAAKgR,WAAY,EAClC/V,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU4B,OAAO,UACzC9C,KAAKmW,iBAEN7N,MAAOV,IACNiG,QAAQC,KAAK,mCAAmC/I,aAAekL,KAAYrI,GAC3E5H,KAAKmT,YAAYpO,GAAKgR,WAAY,EAClC/V,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU4B,OAAO,aACzC9C,KAAKC,EAAEsT,YAAYxO,GAAK7D,UAAU2C,IAAI,WAE5C,CAEA7D,KAAK6R,UAAKlO,GAAW,EACvB,CACA,IAAAkO,CAAM/R,EAAK+R,GACT,IAAKA,EAGH,OAFA7R,KAAKC,EAAE+R,OAAO9Q,UAAU4B,OAAO,WAC/B9C,KAAKC,EAAE8R,KAAK7Q,UAAU4B,OAAO,MAI/B,IAAImP,EAAOnS,EAAIoS,wBACXC,EAAM7K,OAAO8K,WACboM,EAAMlX,OAAOmX,YACZD,EAAMvM,EAAKyM,OAAUzM,EAAKI,KAC7BrS,KAAKC,EAAE8R,KAAK5Q,MAAMqR,eAAe,OACjCxS,KAAKC,EAAE8R,KAAK5Q,MAAMud,OAAYF,EAAMvM,EAAKyM,OAAS,GAAvB,OAE3B1e,KAAKC,EAAE8R,KAAK5Q,MAAMqR,eAAe,UACjCxS,KAAKC,EAAE8R,KAAK5Q,MAAMkR,IAAM,GAAGJ,EAAKI,IAAM,QAEnCF,EAAMF,EAAKK,MAASL,EAAKM,MAC5BvS,KAAKC,EAAE8R,KAAK5Q,MAAMqR,eAAe,QACjCxS,KAAKC,EAAE8R,KAAK5Q,MAAMmR,MAAWH,EAAMF,EAAKK,MAAd,OAE1BtS,KAAKC,EAAE8R,KAAK5Q,MAAMoR,KAAO,GAAGN,EAAKM,SACjCvS,KAAKC,EAAE8R,KAAK5Q,MAAMqR,eAAe,UAEnCxS,KAAKC,EAAE+R,OAAO9Q,UAAU2C,IAAI,MAC5B7D,KAAKC,EAAE8R,KAAK7Q,UAAU2C,IAAI,KAC5B,CAIA,MAAAsM,GACE,IAAIgB,EAAOtR,EAAIuD,IAAI,QAEfkO,EAAazR,EAAI2L,IAAI,MAAO,CAC9BC,UAAa,0BAGXkG,EAAkB9R,EAAI2L,IAAI,MAAO,CACnC1K,GAAM,sCAERqQ,EAAK5O,OAAOoP,GACZR,EAAK5O,OAAO+O,GAEZvP,iBAAiB,SAAWT,IAAStB,KAAK6R,UAAKlO,GAAW,KAC1DgO,EAAgB/P,QAAWN,IAAQtB,KAAK6R,UAAKlO,GAAW,IAExD3D,KAAKC,EAAE8R,KAAOT,EACdtR,KAAKC,EAAE+R,OAASL,CAClB,CAIA,iBAAA+C,GAME,GALApN,OAAOqX,0BAA2B,EAClCrX,OAAOsX,sBAAwB,CAAA,EAC/BtX,OAAOsX,sBAAsBC,YAAY,QACzCvX,OAAOsX,sBAAsBE,YAAY,QACzCnf,SAASC,cAAc,2BAA2B2C,OAAO1C,EAAI2L,IAAI,MAAO,CAAC1K,GAAM,oBAC3Ed,KAAKsT,cAAgBlN,SAASiJ,SAAU,CAC1C,CAAC,cAAe,mBAAoB,iBAAkB,sBACnD5M,QAASC,IACV,MAAMqc,EAASpf,SAASO,cAAc,UACtC6e,EAAO/d,IAAM,IAAIqH,IAAI,GAAGrI,KAAK+K,OAAOzL,MAAM8M,uBAAuB1J,IAAQ0D,UACzEzG,SAASC,cAAc,SAAS2C,OAAOwc,KAEzC,MAAMA,EAASpf,SAASO,cAAc,UACtC6e,EAAO/d,IAAM,IAAIqH,IAAI,GAAGrI,KAAK+K,OAAOzL,MAAM8M,6BAA8BhG,UACxEzG,SAASC,cAAc,SAAS2C,OAAOwc,EACzC,CACF,CAIA,SAAA/T,GACE,IAAIgU,EAAerZ,EAAQiD,mBAEb,CAAC,IAAK,IAAK,KACnBnG,QAAQwc,IACjBD,EAAaE,OAAOF,EAAanH,QAAQoH,GAAS,KAE/C,IAAIE,EAAuB,IAAI9W,IAAI,GAAGrI,KAAK+K,OAAOzL,MAAM8M,uCACrBhG,UASnC,GARApG,KAAKC,EAAEmf,cAAgB,IAAIvf,EAAI,SAAU,CACvCmB,IAAKme,EAAqB3X,KAC1BkI,OAAO,IACNtN,QAAQ,OAAQpC,KAAOwB,IACxBxB,KAAKC,EAAE6T,WAAW7T,EAAE8T,OAAS,KAE/B/T,KAAKC,EAAEkR,KAAK5O,OAAO,CAACvC,KAAKC,EAAEmf,iBAEtBpf,KAAK+K,OAAOzL,MAAMI,WACrB,IAAK,MAAOqF,EAAKhE,KAAU3B,OAAOiN,QAAQrM,KAAK+K,OAAOzL,MAAM4L,SAASmU,SACnErf,KAAK+d,aAAahZ,EAAKhE,EAAY,KAAGie,EAAaM,SAEvD,IAAIC,EAAyBvf,KAAK+K,OAAOzL,MAAM4L,SAASe,aAAe7F,SAASoB,KAGhF,IAFmD,KAA9BxH,KAAK+K,OAAOzL,MAAMC,cAAgDoE,IAA9B3D,KAAK+K,OAAOzL,MAAMC,WAA2BggB,GAEjFvf,KAAK+K,OAAOzL,MAAMI,WAAY,CACjD,IAAIkD,EAAO5C,KAAK+K,OAAOzL,MAAMG,cAAcO,KAAK+K,OAAOzL,MAAM4L,SAASmU,QAC3Drf,KAAK+K,OAAOzL,MAAM4L,SAASmU,QAAQrf,KAAK+K,OAAOzL,MAAMG,YAAkB,KACvEO,KAAK+K,OAAOzL,MAAMG,WACzBsR,EAAQ/Q,KAAK+K,OAAOzL,MAAMI,WAAa,GAAK,iBAChDM,KAAK+d,aAAa,QAAS,GAAGnb,IAAOmO,IAASiO,EAAaM,QAC7D,CAEAtf,KAAKC,EAAEgU,YAAYhU,EAAEuf,QAAWhe,IAAOxB,KAAK4U,MAAMpT,EAAEqK,OAAO9K,QAE3D,IAAIgG,EAAM,IAAIsB,IAAIjC,UACdqZ,EAAI1Y,EAAI8N,aAAazR,IAAI,KACzBuK,EAAI5G,EAAI8N,aAAazR,IAAI,KAC7B,GAAU,OAANqc,EAAY,CACJ,OAAN9R,IACFA,EAAIA,EAAEvF,MAAM,KACZuF,EAAElL,QAASsC,IACTA,EAAMA,EAAIqD,MAAM,KAChB,IAAI/F,EAAQ,IAAI8K,MAAM,UAClBpI,EAAI,KAAM/E,KAAKC,EAAEsT,cACnBvT,KAAKC,EAAEsT,YAAYxO,EAAI,IAAI9E,EAAE6L,SAAU,EACpB,IAAf/G,EAAIR,OACNvE,KAAKmT,YAAYpO,EAAI,IAAIkL,QAAUlL,EAAI,GAEvC/E,KAAKmT,YAAYpO,EAAI,IAAIkL,QAAU,KACrCjQ,KAAKC,EAAEsT,YAAYxO,EAAI,IAAI9E,EAAEmN,cAAc/K,OAIjDrC,KAAKC,EAAEgU,YAAYhU,EAAEc,MAAQ0e,EAC7B,IAAIpd,EAAQ,IAAI8K,MAAM,SACtBnN,KAAKC,EAAEoU,aAAapU,EAAEmN,cAAc/K,EACtC,CAEA1C,SAASoC,iBAAiB,QAAUP,IAAOxB,KAAK6d,MAAMrc,KAAK,GAC3D7B,SAASoC,iBAAiB,UAAYP,IAAOxB,KAAK8d,QAAQtc,KAAK,GAC/D7B,SAASoC,iBAAiB,QAAUP,IAAOxB,KAAKiB,MAAMO,KAEtDxB,KAAKmQ,QACP,EC7lCK,MAAMuP,EACX,WAAAxgB,CAAaC,GACXa,KAAKC,EAAI,CAAA,EACTD,KAAK+K,OAAS5L,EACda,KAAKgQ,SAAW,GAEiB,iBAAtBhQ,KAAK+K,OAAO5D,MACrBnH,KAAK+K,OAAO5D,MAAMY,KAAK/H,KAAKgL,UAAUC,KAAKjL,OAE3CA,KAAKgL,YAEP7L,EAAIwgB,gBAAkB3f,KCvBG,EAACsB,EAAIoH,KAChC,MAAMrG,EAAQ,IAAIud,YAAYte,EAAI,CAChCue,OAAQnX,IAEVpB,OAAO8F,cAAc/K,IDoBnByd,CAAc,kCAChB,CACA,WAAAC,GACE,IAAI5O,EAAO,IAAItR,EAAIA,EAAIuD,IAAI,uBACVvD,EAAIyD,OAAO,oBAAqB6N,EAAKlR,GAC3CwC,QAASC,IAClB,GAAIA,EAAKsd,WAAWA,WAAW9e,UAAU0C,SAAS,aAChD,OACF,GAA6B,IAAzBlB,EAAKud,SAAS1b,QACd7B,EAAKud,SAAS,GAAG/e,UAAU0C,SAAS,MACtC,OACF,IAAIY,EAAO9B,EAAK+C,YAAYya,WAAW,KAAM,IACzC1b,EAAKD,OAAS,KAChBC,EAAOA,EAAKwT,MAAM,EAAG,IAAM,OAC7B,IAAImI,EAAS,IAAItgB,EAAI,SAAU,CAC7B4L,UAAW,YACXyC,MAAO,SAAS1J,OACf5C,QAAQ5B,KAAM,CAAC0C,EAAMlB,KACtB4e,UAAUC,UAAUC,UAAU5d,EAAK+C,aAChCsC,KAAK,QACLO,MAAOiY,IACN1S,QAAQjG,MAAM2Y,MAGjB,CAAC7d,IACJA,EAAK+L,sBAAsB,WAAY0R,EAAOlgB,IAElD,CACA,uBAAAugB,GACE,IAAIC,EAAa,IAAI5gB,EAAIA,EAAIuD,IAAI,0BAC7Bsd,EAAS,IAAI7gB,EAAI,MAAO,CAC1B4L,UAAa,WAEfiV,EAAOlgB,UAAY,cACnBR,KAAKC,EAAE0gB,WAAa,IAAI9gB,EAAI,MAC1B,CAAC4L,UAAa,gBACdlJ,OAAOme,GAETD,EAAWle,OAAOvC,KAAKC,EAAE0gB,WAC3B,CACA,oBAAAC,CAAsBC,EAAMzR,GAC1B,MAAM0R,EAAYD,KAAS7gB,KAAK+K,OAAOzL,MAAM4L,SAASmU,QACpDrf,KAAK+K,OAAOzL,MAAM4L,SAASmU,QAAQwB,GAAMje,KAAOie,EAClD,QAAgCld,IAA5B3D,KAAK+gB,sBACJF,KAAQ7gB,KAAK+gB,oBAChB,MAAO,GAAGD,MAAc1R,KAE1B,IAAK,MAAM4R,KAAWhhB,KAAK+gB,mBAAmBF,GAAO,CACnD,MAAMI,EAAQ,IAAIC,OAAOF,GACnBG,EAAW/R,EAAKrJ,UAAUqJ,EAAKgS,YAAY,KAAK,GACtD,GAAIH,EAAMte,KAAKyM,GACb,OAAOpP,KAAK+gB,mBAAmBF,GAAMG,GAClCra,QAAQ,gBAAiBma,GACzBna,QAAQ,cAAewa,GACvBxa,QAAQ,UAAWyI,EAC1B,CAEA,MAAO,GAAG0R,KAAa1R,GACzB,CACA,oBAAAiS,CAAsBC,EAAIT,EAAMtU,EAAO3H,GACrC,MAAMhC,EAAO,SAAUgC,EAAQA,EAAY,KAAI5E,KAAK4gB,qBAAqBC,EAAMtU,GACzExF,EAAM,IAAIsB,IAAI,GAAGrI,KAAK+K,OAAOzL,MAAM4L,SAASe,aAAa4U,KAAQtU,KACjE1C,EAAI,IAAIhK,EAAI,IAAK,CAAC2H,KAAQT,EAAK8E,OAAU,UAC/ChC,EAAErJ,UAAYoC,EACd0e,EAAG/e,OAAO,IAAI1C,EAAI,MAAM0C,OAAOsH,GACjC,CACA,cAAA0X,CAAgB3e,EAAM8F,GACf1I,KAAKC,EAAE0gB,YACV3gB,KAAKwgB,0BAEP,MAAM1f,EAAK8B,EAAK+D,QAAQ,IAAK,KAC7B,IAAIga,EAAa,IAAI9gB,EAAI,QAAS,CAChC4L,UAAa,aACb4S,QAAW,cAAcvd,MAEvB0gB,EAAmB,IAAI3hB,EAAI,QAAS,CACtC4L,UAAa,sBACbyS,KAAQ,WACRpd,GAAM,cAAcA,MAEtB0gB,EAAiBvhB,EAAE6L,SAAU,EAC7B6U,EAAWngB,UAAYoC,EAEvB,IAAI0e,EAAK,IAAIzhB,EAAI,MACjB,IAAK,MAAMghB,KAAQnY,EACjB,IAAK,MAAM6I,KAAQ7I,EAAImY,GACrB7gB,KAAKqhB,qBAAqBC,EAAIT,EAAMtP,EAAM7I,EAAImY,GAAMtP,IAExDvR,KAAKC,EAAE0gB,WAAWpe,OAAO,CACvB,IAAI1C,EAAI,MAAO,CAAC4L,UAAa,UAAUlJ,OAAO,CAC5Cif,EACAb,EACA,IAAI9gB,EAAI,OAAQ,CAAC4L,UAAa,YAAYlJ,OAAO+e,MAGvD,CACA,eAAAG,GACE,MAAMZ,EAAO7gB,KAAK+K,OAAOzL,MAAMG,WACzBiJ,EAAM1I,KAAK+K,OAAOzL,MAAMqhB,WAC9B,KAAM,eAAgBjY,GACpB,OACE,YAAaA,IACf1I,KAAK+gB,mBAAqBrY,EAAa,SACzC,IAAI0G,EAAO,GAETA,EADEpP,KAAK+K,OAAOzL,MAAM6M,QACb,IAAI9D,IAAI,UAAUjC,SAASiJ,UAAU7H,KAErC,IAAIa,IAAIjC,SAASiJ,SAAUjJ,SAASkJ,QAAQ9H,KACrD,IAAI8E,EAAO,IAAIjE,IAAIrI,KAAK+K,OAAOzL,MAAM8M,aAAcgD,GAAM5H,KAEzD,IAAK,MAAMzC,KAAO2D,EAAgB,WAAG,CACnC,KAAM,YAAaA,EAAgB,WAAE3D,OAC/B8b,KAAQnY,EAAgB,WAAE3D,GAAc,SAC5C,SAEF,MAAM2c,EAAQhZ,EAAgB,WAAE3D,GAAc,QAAE8b,GAChD,IAAK,MAAMtP,KAAQmQ,EAAO,CACxB,MAAMC,EAAkB,IAAItZ,IAAIkJ,EAAMjF,GAAM9E,KAC5C,GAAI4H,EAAKjH,WAAWwZ,GAAkB,CACpC3hB,KAAKuhB,eAAexc,EAAK2D,EAAgB,WAAE3D,GAAc,SACzD,KACF,CACF,CACF,CACF,CACA,iBAAA6c,GACE5hB,KAAK6hB,sBAAsBC,QAEtB9hB,KAAKC,EAAE0gB,aAGZ3gB,KAAKC,EAAE0gB,WAAW1gB,EAAE6C,gBACb9C,KAAKC,EAAE0gB,kBACP3gB,KAAK+gB,mBACd,CACA,eAAAgB,GACE/hB,KAAK6hB,sBAAwB,IAAIG,gBACjC,MAAMC,EAASjiB,KAAK6hB,sBAAsBI,OAE1C,IAAI3iB,EAAQU,KAAK+K,OAAOzL,MACxB,MAAM4iB,EAA8B,KAAlB5iB,EAAMC,UAAoC,IAAlBD,EAAM6M,QAC9C,IAAI9D,IAAI,GAAG/I,EAAM4L,SAASe,4BAC1B,IAAI5D,IAAI,iBAAkB,IAAIA,IAAI/I,EAAMC,QAAS6G,SAASkJ,SAKxDtP,KAAK2gB,WACP3gB,KAAKyhB,kBAGUta,MACf,IAAIW,QAAQ,IAAIO,IAAI,kBAAmB6Z,IACvC,CAAED,WAEDla,KAAKC,GAAYA,GACjBD,KAAKC,IACJ,IAAoB,IAAhBA,EAASC,GACX,OAAOD,EAASW,OACb,GAAwB,MAApBX,EAASX,OAChB,MAAO,CAAA,EAEP,MAAM,IAAIa,QAEbH,KAAKW,IACJ1I,KAAK+K,OAAOzL,MAAMqhB,WAAajY,EAC/B1I,KAAKgQ,SAASvN,QAAQqO,GAAMA,KAC5B9Q,KAAKyhB,oBAENnZ,MAAMiY,MACX,CACA,SAAAvV,GACEhL,KAAK6P,MACP,CACA,MAAAC,GACE9P,KAAK4hB,mBACP,CACA,IAAA/R,GACOlQ,SAASC,cAAc,wCAG1BiO,QAAQ8B,IAAI,kEAFZ3P,KAAK+f,cAGP/f,KAAK+hB,iBACP,CAIA,IAAAha,CAAMiI,GACAhQ,KAAK+K,OAAOzL,MAAMqhB,WACpB3Q,IAEAhQ,KAAKgQ,SAASrO,KAAKqO,EACvB,EEjNa,SAASmS,IACtB,IAAIljB,EAASE,KACb,IAAIijB,EAAW,KACb,IAAIzX,EAAMxL,KACV,IAAI4Q,EAAU5Q,KACd,IAAIkO,EAAYlO,KAChB,IAAI8T,EAAO9T,KACX,IAAIugB,EAAevgB,MAGO,YAAxBQ,SAAS0iB,WACX1iB,SAASoC,iBAAiB,mBAAoBqgB,EAAU,CAAEE,MAAM,IAEhEF,GACJ,QAEAD"}